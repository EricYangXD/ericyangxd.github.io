---
title: 通达信选股指标收集
author: EricYangXD
date: "2022-06-21"
meta:
  - name: keywords
    content: 通达信,技术,选股,指标
---

## 如何录入通达信公式

导入技术指标公式的步骤:

0. 以 Windows 版本为准，Mac 版根本不能用，同花顺也一样。
1. 打开通达信软件；
2. 点击功能——公式系统——公式管理器；
3. 选择技术指标公式——新建；
4. 填写名称，复制公式粘贴到大框框里，如果公式前面有参数的，把参数填写到大框框上面的参数表中，选择公式类型为其它类型，选择画线方法为主图叠加或者副图；
5. 测试公式——确定。

## 1.通达信主力监控指标

```bash
STEP1:=STEP/20;
MVALUE1:=MVALUE/8;
SARLINE:SAR(N,STEP1,MVALUE1),CIRCLEDOT,COLORRED;

STICKLINE(C>SAR(N,STEP1,MVALUE1) AND C<O,C,O,2.8,0),COLORRED;
STICKLINE(C>SAR(N,STEP1,MVALUE1) AND C>O,C,O,2.8,1),COLORRED;
STICKLINE(C>SAR(N,STEP1,MVALUE1),H,MAX(C,O),0,0),COLORRED;
STICKLINE(C>SAR(N,STEP1,MVALUE1),L,MIN(C,O),0,0),COLORRED;
STICKLINE(C<SAR(N,STEP1,MVALUE1) AND C<O,C,O,2.8,0),COLORCYAN;
STICKLINE(C<SAR(N,STEP1,MVALUE1) AND C>O,C,O,2.8,1),COLORCYAN;
STICKLINE(C<SAR(N,STEP1,MVALUE1),H,MAX(C,O),0,0),COLORCYAN;
STICKLINE(C<SAR(N,STEP1,MVALUE1),L,MIN(C,O),0,0),COLORCYAN;
DRAWTEXT(CROSS(C,SARLINE),L-0.05*L,'主力入场'),COLORRED;
DRAWTEXT(CROSS(SARLINE,C),H+0.05*H,'主力离场'),COLORCYAN;
```

## 2.通达信选股指标-群友指标 1

```bash
VA1:=100*(HHV(HIGH,55)-CLOSE)/(HHV(HIGH,55)-LLV(LOW,55));
VA2:=(CLOSE-LLV(LOW,34))/(HHV(HIGH,34)-LLV(LOW,34))*100;
VA3:=VOL/((HIGH-LOW)*2-ABS(CLOSE-OPEN));
VA4:=SMA(VA2,3,1);
VA5:=SMA(VA4,3,1);
VA6:=3*VA4-2*VA5;
VA7:=EMA(VA6,6);
{MACD}
DIFF:=EMA(CLOSE,12)-EMA(CLOSE,26);
DEA:=EMA(DIFF,9);
MACD:=2*(DIFF-DEA);

妖:=CROSS(VA7,VA1) AND VA7<50 AND DEA>REF(DEA,1) AND MACD>=-0.07 AND V\*100/CAPITAL>1;// 这里有问题，手机上可以。

LWR1:=100*(HHV(HIGH,6)-CLOSE)/(HHV(HIGH,6)-LLV(LOW,6));
LWR3:=100*(HHV(HIGH,14)-CLOSE)/(HHV(HIGH,14)-LLV(LOW,14));
L3:=FILTER(LWR3<9,9);
起:=LWR1<15 AND L3=1;

DYNAINFO(7)<30 AND DYNAINFO(7)>2 AND DYNAINFO(7)<MA(C,60)\*1.38 AND DYNAINFO(7)>MA(C,10) AND MA(C,60)>=REF(MA(C,60),1) AND
FINANCE(41) / 100000000 < 500 AND FINANCE(41) / 100000000 > 20 AND FINANCE(40) / 100000000 > 10 AND EXIST(妖, 3) AND EXIST(起, 3);
```

## 通信达股票必涨买入公式，适合短线炒股操作

```bash
VAR2:=(EXPMA(VAR1,4),4),4);
J:(VAR2-ref(VAR2,1))/ref(VAR2,1)*100, COLORSTICK;
D:MA(J,3);
K:MA(J,1);
V1:=EMA(CLOSE,60)-EMA(CLOSE,300);
V2:=EMA(V1,300);
V3:=(CLOSE-LLV(LOW,8))/(HHV(HIGH,8)-LLV(LOW,8))*100;
V6:=CLOSE/ref(CLOSE,3)>=1.1;
V7:=BACKSET(V6,3);
买入:IF((V7 AND COUNT(V7,3)=1),0.9,0),COLORFFAD1F,LINETHICK3;
DRAWTEXT(买入,0.6,'买入 '),COLORFFAD1F,LINETHICK3;
```

## 触底触顶波段操作图公式

```bash
RSV1:=(CLOSE-LLV(LOW,21))/(HHV(HIGH,21)-LLV(LOW,21))*100;
RSV2:=(CLOSE-LLV(LOW,37))/(HHV(HIGH,37)-LLV(LOW,37))*100;
短线:SMA(SMA(RSV1,3,1),3,1)+3*STD(CLOSE,21),COLOR00FF00;
中线:SMA(RSV2,5,1)+2*STD(CLOSE,37),COLORRED;
RSV3:=(CLOSE-LLV(LOW,55))/(HHV(HIGH,55)-LLV(LOW,55))_100;
长线:SMA(RSV3,5,1),COLORFFAD1F;
看底:STICKLINE(中线<15,中线,15,6,0),COLORF00FF0;
黄金坑:STICKLINE(短线<20 AND 中线<20 AND 长线<20,MAX(长线,MAX(短线,中线)),20,8,0),COLOR00CCFF;
看顶:STICKLINE(中线>80,80,中线,6,0),COLORFFF000;
DRAWICON(CROSS(长线,15),中线,1);
DRAWTEXT(LONGCROSS(中线,20,15),20,'追涨');
DRAWTEXT(CROSS(短线,长线)AND 长线<18 AND 长线>REF(长线,1)OR CROSS(长线,5),20,'千载难逢');
粘合星:DRAWTEXT(ABS(中线-长线)<2 AND 中线>REF(中线,1),中线,'_');
中线 2:=-100\*(HHV(HIGH,40)-CLOSE)/(HHV(HIGH,40)-LLV(LOW,40));
底:DRAWTEXT(CROSS(中线 2,-90) AND (长线<中线 AND 长线>REF(长线,1)OR 短线<20 AND 中线<20 AND 长线<20),长线,'底'),COLORFF00FF;
IF(COUNT(CROSS(中线 2,-90),12)=3,30,5);
IF(COUNT(CROSS(-5,中线 2),12)=3 OR COUNT(CROSS(-15,中线 2),6)=3,70,100);
```

## 通达信综合操盘手主图指标公式

```bash
七天线:MA(C,7),COLORGRAY;
工作线:(EMA(C,17)) ,POINTDOT,LINETHICK4,COLORFFAD1F;
生命线:(MA(C,25)) ,LINETHICK2,COLORMAGENTA;
不惑线:(MA(C,43)) ,COLORCYAN;
姊妹线:(EMA(C,50)) ,CIRCLEDOT,COLORWHITE;
九号线:(MA(C,99)) ,LINETHICK1,COLOR0099FF;
卖线:EMA(SLOPE(C,21)_21+C,42),COLORRED,LINETHICK2;
A3:=EMA((((SLOPE(C,21)) _ 20) + C),68);
A4:=EMA(C,10);
A5:=REF(C,2);
A6:=((SMA((MAX((C - A5),0)),6,1)) / (SMA(ABS((C - A5)),6,1))) _ 100;
A7:=IF(((A6 < (REF(A6,1))) AND (A6 > 79)),A6,0);
DRAWTEXT((CROSS(A4,A3)),L,'△'),COLORFFAD1F;
DRAWTEXT(A7,H,'○'),LINETHICK3,COLORGREEN;
A8:=LLV(L,21);
A9:=HHV(H,21);
A10:=EMA((((CLOSE - A8) / (A9 - A8)) _ 100),5);
A11:=EMA((((CLOSE - A8) / (A9 - A8)) _ 50),13);
A12:=EMA(((0.667 _ (REF(A10,1))) + (0.333 _ A10)),2);
A13:=LLV(L,55);
A14:=HHV(H,34);
A15:=EMA((((C - A13) / (A14 - A13)) _ 100),3);
A16:=(A11 + A15) / 2;
A17:=EMA(((0.667 _ (REF(A15,1))) + (0.333 _ A10)),2);
A18:=EMA(A16,5);
A19:=EMA(((0.667 _ (REF(A18,1))) + (0.333 _ A18)),2);
A20:=CROSS(A10,A11);
A21:=(CROSS(A10,A19)) AND (A19 < 30);
A22:=A21 * 0.6;
DRAWTEXT((A22 = 0.6),L,'◇'),COLORFFAD1F;
DRAWTEXT((A20 = 1),L,'◇'),COLORWHITE;
A23:=((C + L) + H) / 3;
A24:=EMA(A23,6);
A25:=EMA(A24,5);
A26:=CROSS(A24,A25);
DRAWICON(A26,(LOW*0.98),5),COLORMAGENTA;
DRAWICON(CROSS(卖线,C),(H*1.02),4);
STICKLINE(((C >= 工作线) AND (C >= O)),O,C,3,1),COLORRED;
STICKLINE(((C >= 工作线) AND (C <= O)),O,C,3,0),COLORRED;
STICKLINE(((C < 工作线) AND (C >= O)),O,C,3,1),COLORGREEN;
STICKLINE(((C < 工作线) AND (C <= O)),O,C,3,0),COLORGREEN;
DRAWTEXT_FIX(1,0.00,0,0,'所属行业：')COLOR0080FF;
DRAWTEXT_FIX(1,0.07,0,0,HYBLOCK)COLOR0080FF;
DRAWTEXT_FIX(1,0.14,0,0,'所属地区：')COLOR00FFFF;
DRAWTEXT_FIX(1,0.21,0,0,DYBLOCK)COLOR00FFFF;
DRAWTEXT_FIX(1,0.00,0.06,0,'主题投资：')COLOR0000FF;
DRAWTEXT_FIX(1,0.07,0.06,0,EXTERNSTR(0,1))COLOR0000FF;
{股本市值}
总股本:=STRCAT(STRCAT('总股本: ',CON2STR(TOTALCAPITAL/1000000,2)),'亿');
流通盘:=STRCAT(STRCAT(' 流通盘: ',CON2STR(CAPITAL/1000000,2)),'亿');
全流通:=STRCAT(' 全流通: ',CON2STR((CAPITAL/1000000)/(TOTALCAPITAL/1000000),2));
市值:=STRCAT(STRCAT(' 流通市值: ',CON2STR((CAPITAL/1000000)*C,2)),'亿');
上市天数:=STRCAT(' 上市天数: ',CON2STR(FINANCE(42),0));
{上市日期:=STRCAT(' 上市日期: ',CON2STR(HHV((BARSCOUNT(C)=0)*(DATE+19000000),0),0));}
股本市值:=STRCAT('股本市值: ',STRCAT(STRCAT(STRCAT(STRCAT(总股本,流通盘),全流通),市值),上市天数));
{业绩综合}
市盈率:=STRCAT('市盈率: ',CON2STR(C/FINANCE(33),2));
市销率:=STRCAT(' 市销率: ',CON2STR(C/(FINANCE(20)/FINANCE(1)),2));
市净率:=STRCAT(' 市净率: ',CON2STR(C/FINANCE(34),2));
净资收益率:=STRCAT(' 净资收益率: ',CON2STR(FINANCE(33)/FINANCE(34)*100,2));
毛利率:=STRCAT(' 毛利率: ',CON2STR((FINANCE(20)-FINANCE(21))/FINANCE(20)*100,2));
净利润率:=STRCAT(' 净利润率 ',CON2STR(FINANCE(30)/FINANCE(20)*100,2));
主营利润率:=STRCAT(' 主营利润率 ',CON2STR(FINANCE(23)/FINANCE(20)*100,2));
当前业绩:=STRCAT('当前业绩: ',STRCAT(STRCAT(STRCAT(STRCAT(STRCAT(STRCAT(市盈率,市销率),市净率),净资收益率),毛利率),净利润率),主营利润率));
{风险系数}
X1:=(FINANCE(11)-FINANCE(15))/FINANCE(10)*1.2;
X2:=(FINANCE(31)+FINANCE(17))/FINANCE(10)*1.4;{盈余公积用资本公积金代替};
X3:=FINANCE(23)/FINANCE(10)*3.3;
X4:=FINANCE(19)/FINANCE(15)*0.6;{缺长期负债或负债总额}
X5:=FINANCE(20)/FINANCE(15)*0.999;
Z 值:=X1+X2+X3+X4+X5;
预警:=IF(Z 值<1.2,'重警',IF(Z 值>=1.2 AND Z 值<2.6,'轻警','无警'));
财务预警:=STRCAT('财务预警: ',STRCAT(预警,STRCAT('-Z 值: ',CON2STR(Z 值,3))));
优质资产率:=STRCAT(' 优质资产率: ',CON2STR((FINANCE(19)-FINANCE(22)-FINANCE(27))/FINANCE(19),2));{理论上越大越好但不同行业有不同标准};
现金负债比:=STRCAT(' 现金负债比: ',CON2STR(FINANCE(25)/FINANCE(15),3));{缺长期负债或负债总额，理论上越大越好但不同行业有不同标准};
财务系数:=STRCAT('风险系数: ',STRCAT(STRCAT(财务预警,优质资产率),现金负债比));
DRAWTEXT_FIX(ISLASTBAR,0.00,0.12,0,股本市值),COLORGREEN;
DRAWTEXT_FIX(ISLASTBAR,0.00,0.18,0,当前业绩),COLORGREEN;
DRAWTEXT_FIX(ISLASTBAR,0.00,0.24,0,财务系数),COLORGREEN;
C2:=REF(C,1);
非 ST 涨停:=IF((C-C2)*100/C2>=(10-0.01*100/C2),1,0);
涨停:=非 ST 涨停;
STICKLINE(涨停,OPEN,CLOSE,2,0),COLOR00FFFF;
STICKLINE(涨停,H,L,0,0),COLOR00FFFF;
非 ST 跌停:=IF((C2-C)*100/C2>=(10-0.01*100/C2),1,0);
跌停:=非 ST 跌停;
STICKLINE(跌停,OPEN,CLOSE,2,0),COLORGREEN;
STICKLINE(跌停,H,L,0,1),COLORGREEN;
半涨 1:=IF((C-C2)*100/C2>=(5-0.01*100/C2),1,0);
半涨 2:=IF((C-C2)*100/C2<(10-0.01*100/C2),1,0);
JRS:=半涨 1 AND 半涨 2 AND FINANCE(33)>0;
STICKLINE(JRS,OPEN,CLOSE,2,0),COLOR0066FF;
NUMBER:=COUNT(非 ST 涨停,BARSSINCE(非 ST 涨停)+1);
N:=10;
T1:=CONST(HHVBARS(V,N));
T0:IF(CURRBARSCOUNT<=N+7,CONST(IF(T1=0,C,REF(C,T1))),DRAWNULL),LINETHICK3,COLOR0000FF;
IF(CURRBARSCOUNT=T1+1,T0,DRAWNULL),CIRCLEDOT;
DRAWTEXT(ISLASTBAR,T0,' 量能平台');
DRAWTEXT_FIX(1,0.00,0,0,'所属行业：')COLOR0080FF;
DRAWTEXT_FIX(1,0.07,0,0,HYBLOCK)COLOR0080FF;
DRAWTEXT_FIX(1,0.14,0,0,'所属地区：')COLOR00FFFF;
DRAWTEXT_FIX(1,0.21,0,0,DYBLOCK)COLOR00FFFF;
DRAWTEXT_FIX(1,0.00,0.06,0,'主题投资：')COLOR0000FF;
DRAWTEXT_FIX(1,0.07,0.06,0,EXTERNSTR(0,1))COLOR0000FF;
```

## 牛市适用波段涨停指标

```bash
顶:80,COLORFFA500;
大顶:100,COLORBLUE;
VAR1:=(CLOSE-LLV(LOW,60))/(HHV(HIGH,60)-LLV(LOW,60))*80;
VAR2:=SMA(VAR1,10,1);
慢速:SMA(VAR2,5,1),COLORRED;
RSV:= ((HHV(HIGH,9)-CLOSE)/(HHV(HIGH,9)-LLV(LOW,9))*100)-70;
RSV1:= (CLOSE-LLV(LOW,9))/(HHV(HIGH,9)-LLV(LOW,9))*100;
FATK:=SMA(RSV1,3,1);
形态:SMA(FATK,3,1),COLORBB24DB;
VARA:=(CLOSE-LLV(LOW,9))/(HHV(HIGH,9)-LLV(LOW,9))*100;
VARB:=SMA(VARA,3,1);
VARC:=SMA(VARB,3,1);
加速: EMA(3*VARB-2*VARC,3),COLORFFAD1F;
底:6,COLOR00BF00;
大底:-6,COLOR007300;
VAR11:=LLV(LOW,5)=LLV(LOW,45) AND CLOSE>=OPEN*1.04;
VAR22:=CLOSE>(REF(HIGH,1)+REF(LOW,1))/2;
买入:=VAR11 AND VAR22,STICK,LINETHICK2,COLORRED;
VAR3:=REF(CLOSE,1);
VAR4:=SMA(MAX(CLOSE-VAR3,0),6,1)/SMA(ABS(CLOSE-VAR3),6,1)*100;
卖出:=CROSS(80,VAR4),STICK,LINETHICK2,COLORGREEN;
{波段介入点}
A1:=REF(CLOSE,2);
A2:=SMA(MAX(CLOSE-A1,0),7,1)/SMA(ABS(CLOSE-A1),7,1)\*100;
波段介入点:IF(A2<19,19,0)COLORWHITE;
A4:=MA(CLOSE,20);A5:=(CLOSE>MA(CLOSE,5));A6:=(MA(CLOSE,5)>MA(CLOSE,10));
A7:=(CLOSE>MA(CLOSE,10));A8:=(MA(CLOSE,5)>MA(CLOSE,20));A9:=(CLOSE>MA(CLOSE,20));A10:=REF(A4,1);A11:=(A4 > A10);
AVX:(((((IF(A5,10,(0 - 10)) + IF(A6,10,(0 - 10))) + IF(A7,10,(0 - 10))) +
IF(A8,10,(0 - 10))) + IF(A9,10,(0 - 10))) + IF(A11,10,(0 - 10))),COLOR0000FF;
AVX 零轴:0,COLOR00FFFF;
```

## 经典主力散户线指标公式

```bash
{短线:"KDJ.J"(5,3,3),COLORAAAAAA;}
散户线: 100*(HHV(HIGH,60)-CLOSE)/(HHV(HIGH,60)-LLV(LOW,60)),LINETHICK2,COLOR00FF00;
RSV30:=(CLOSE-LLV(LOW,30))/(HHV(HIGH,30)-LLV(LOW,30))*100;
K30:=SMA(RSV30,5,1);
D30:=SMA(K30,3,1);
J30:=3*K30-2*D30; 主力线:EMA(J30,6),COLORFFAD1F,LINETHICK2;
RSV21:=(CLOSE-LLV(LOW,21))/(HHV(HIGH,21)-LLV(LOW,21))\*100;
K21:=SMA(RSV21,13,8);
趋势:CEILING(SMA(K21,13,8)),COLORRED,LINETHICK1;
0;20;50;80;100;
```

## 通达信黄金 MACD 八代指标公式

```bash
MACD2:(EXPMA(CLOSE,30)-REF(EXPMA(CLOSE,30),1))/REF(EXPMA(CLOSE,30),1)\*100,COLORSTICK;
DIF2:EMA(SUM(MACD2,2),5),LINETHICK2,COLORFFAD1F;
入 1:IF(DIF2>REF(DIF2,1),DIF2,DRAWNULL),COLORRED,LINETHICK2;
入 2:IF(DIF2<REF(DIF2,1),DIF2,DRAWNULL),COLOR00FF00,LINETHICK2;
DEA2:MA(DIF2,5),COLORWHITE;
```

## 通达信百战百胜指标

```bash
高1:=REF(HHV(H,120),3);

低1:=REF(LLV(L,120),3);

H1:=高1-(高1-低1)*0.191;

H2:=高1-(高1-低1)*0.382;

H3:=高1-(高1-低1)*0.5;

H4:=高1-(高1-低1)*0.618;

H5:=高1-(高1-低1)*0.809;

突破:=REF(EMA(C,14),1);

A1X:=(EMA(C,10)-突破)/突破*100;

JZ:=IF(A1X>=0,REF(EMA(C,10),BARSLAST(CROSS(A1X,0))+1),REF(EMA(C,10),BARSLAST(CROSS(0,A1X))+1)),COLORFFFF00,LINETHICK2;

N1:=100;

KD:=BARSLAST(CURRBARSCOUNT=N1);

GD:=CONST(IF(ISLASTBAR=1,HHV(H,KD),0));

DD:=CONST(IF(ISLASTBAR=1,LLV(L,KD),0));

KJ:=GD-DD;

GD4:=IF(CURRBARSCOUNT<=N1/2,GD,DRAWNULL);

ND:=IF(BARSCOUNT(C)>=8,8,BARSCOUNT(C));

AMOV:=VOL*(C+L+H)/3;

MN:=SUM(AMOV,ND)/SUM(VOL,ND);

AAC:=CROSS(A1X,0),LINETHICK0;

BBC:=CROSS(0,A1X),LINETHICK0;

DRAWICON(AAC,JZ*0.98,34);

DRAWICON(BBC,JZ*1.015,35);

LC:= REF(CLOSE,1);

RSI:=SMA(MAX(CLOSE-LC,0),6,1)/SMA(ABS(CLOSE-LC),6,1)*100;

逃顶:=CROSS(82,RSI);

DRAWICON( 逃顶,H*1.01,15);

DRAWTEXT( 逃顶,H*1.01,' ←快跑'),COLORFFFFFF;

平衡:=IF(CURRBARSCOUNT<=N1,DD+KJ/2,DRAWNULL),COLOR00FFFF,NODRAW;

压力:=IF(CURRBARSCOUNT<=N1,GD-KJ*0.191,DRAWNULL),COLORFF00FF,NODRAW;

支撑:=IF(CURRBARSCOUNT<=N1,DD+KJ*0.191,DRAWNULL),COLOR00FF00,NODRAW;

高区:IF(CURRBARSCOUNT<=N1,GD,DRAWNULL),COLORRED,DOTLINE;

低区:IF(CURRBARSCOUNT<=N1,DD,DRAWNULL),COLOR00FF00,DOTLINE;

A1:=BARSLAST(MONTH!=REF(MONTH,1))+1;

月±%:(CLOSE/REF(CLOSE,A1)-1)*100,COLOR00FFFF,NODRAW;

DRAWKLINE(H,O,L,C);

DRAWTEXT(CURRBARSCOUNT=1,压力,'0.809'),COLOR0000FF;

DRAWTEXT(CURRBARSCOUNT=1,平衡,'0.500'),COLORFFFFFF;

DRAWTEXT(CURRBARSCOUNT=1,支撑,'0.191'),COLOR00FFFF;

C1:=C>=JZ;

C2:=C<JZ;

AA:=C1>=C2 ;

BB:=C2>C1 ;

STICKLINE(AA,C,O,3,0),COLORRED;

STICKLINE(AA,H,L,0,0),COLORRED;

STICKLINE(BB,C,O,3,0),COLOR00FF00;

STICKLINE(BB,H,L,0,0),COLOR00FF00;
```

## 通达信成交量指标公式

```bash
STICKLINE(VOL/CAPITAL*100<=3,0,3,5,0),COLOR600000;
DRAWBAND(3,RGB(10,20,150),0,RGB(0,0,0));
成交量:V,COLORFFAD1F,NODRAW;
换手:VOL/CAPITAL*100,VOLSTICK;
VAR1B:=EMA(CLOSE,3)-EMA(CLOSE,89);
VAR1C:=EMA(VAR1B,21);
VAR1D:=(VAR1B-VAR1C)*10;
VAR1F:=POW(VAR1D,3)*0.01+POW(VAR1D,2);
拉升:=IF(VAR1D>0.015,VAR1F,0)/25;
STICKLINE(拉升 AND 拉升>0.05,拉升,0,0.2,0),COLOR00DDDD;
STICKLINE(拉升/REF(拉升,1)>2 AND 拉升>0.05,拉升,0,1,0),COLORDD00DD;
DRAWTEXT(拉升/REF(拉升,1)>2 AND 拉升>0.05,拉升,'追'),COLORFFAD1F;
DRAWTEXT_FIX(1,0,0,0,'【黄色柱：大幅缩短需小心，再等机会第二波】'),COLORFFAD1F;
DRAWTEXT_FIX(1,0,0.05,0,'【换手率大于3倍：为空心红柱】'),COLORRED;
DRAWTEXT_FIX(1,0,0.10,0,'【换手率大于10倍：为实芯绿柱】'),COLORGREEN;
DRAWTEXT_FIX(1,0,0.15,0,'【紫色柱：为上涨拉升“追”】'),COLORDD00DD;
DRAWICON(拉升/REF(拉升,1)>5 AND REF(拉升,1)/REF(拉升,2)>5,0.2,9);
DRAWTEXT(拉升/REF(拉升,1)>5 AND REF(拉升,1)/REF(拉升,2)>5,L*0.3,'买'),COLORFFAD1F;
STICKLINE(换手>3,3,换手,-1,1),COLOR0000EE;
STICKLINE(换手>10,10,换手,-1,0),COLORGREEN;
百日低换手:LLV(换手,100)=换手,NODRAW,COLORLIBLUE;
DRAWICON(百日低换手,0.2,11);
DRAWTEXT(百日低换手,L*0.1,'百'),COLORFFAD1F;
DRAWICON(LAST(换手>REF(换手,1),2,0),换手/15,1);
DRAWTEXT(LAST(换手>REF(换手,1),2,0),L*0.1,'加'),COLORFFAD1F;
MA5:MA(换手,5),COLORLIBLUE;
DRAWTEXT(ISLASTBAR AND MA5,MA5,STRCAT('—–五日换手 ',CON2STR(MA5,2))),COLORLIBLUE;
```

## 陈小群

技术指标可以划线，选股指标不能划线。

```bash
X_1:=VOL/REF(VOL,1)>=0.95 AND VOL/REF(VOL,1)<=1.05;
X_2:=REF(HHV(VOL,2),1);
X_3:=VOL/X_2>=0.95 AND VOL/X_2<=1.05;
X_4:=REF(HHV(VOL,3),1);
X_5:=VOL/X_4>=0.95 AND VOL/X_4<=1.05;
X_6:=REF(HHV(VOL,4),1);
X_7:=VOL/X_6>=0.95 AND VOL/X_6<=1.05;
X_8:=REF(HHV(VOL,5),1);
X_9:=VOL/X_8>=0.95 AND VOL/X_8<=1.05;
X_10:=REF(HHV(VOL,6),1);
X_11:=VOL/X_10>=0.95 AND VOL/X_10<=1.05;
X_12:=REF(HHV(VOL,7),1);
X_13:=VOL/X_12>=0.95 AND VOL/X_12<=1.05;
X_14:=REF(HHV(VOL,8),1);
X_15:=VOL/X_14>=0.95 AND VOL/X_14<=1.05;
X_16:=REF(HHV(VOL,9),1);
X_17:=VOL/X_16>=0.95 AND VOL/X_16<=1.05;
X_18:=REF(HHV(VOL,10),1);
X_19:=VOL/X_18>=0.95 AND VOL/X_18<=1.05;
X_20:=REF(HHV(VOL,11),1);
X_21:=VOL/X_20>=0.95 AND VOL/X_20<=1.05;
X_22:=REF(HHV(VOL,12),1);
X_23:=VOL/X_22>=0.95 AND VOL/X_22<=1.05;
X_24:=REF(HHV(VOL,13),1);
X_25:=VOL/X_24>=0.95 AND VOL/X_24<=1.05;
X_26:=X_25 OR X_23 OR X_21 OR X_19 OR X_17 OR X_15 OR X_13 OR X_11 OR X_9 OR X_7 OR X_5 OR X_3 OR X_1;
X_27:=100;
X_28:=100*(VOL-LLV(VOL,X_27))/(HHV(VOL,X_27)-LLV(VOL,X_27));
X_29:=13;
X_30:=100*(VOL-LLV(VOL,X_29))/(HHV(VOL,X_29)-LLV(VOL,X_29));
倍量:VOL>=REF(VOL,1)*1.8,COLORYELLOW;
低量:VOL<=HHV(VOL,13)*0.33 OR X_30<5 AND VOL<REF(VOL,1),COLORMAGENTA;
地量:VOL<=MA(LLV(VOL,100),100) OR (X_28<4 AND VOL<REF(VOL,1)),COLORGREEN;
平量:X_26,COLORWHITE;
倍缩:VOL<=REF(VOL,1)*0.55,COLORRED;
缩量涨:COUNT(CLOSE>REF(CLOSE,1),2)=2 AND COUNT(VOL<REF(VOL,1),2)=2,COLORBLUE;
STICKLINE(CLOSE>OPEN,0,VOL,1.2,1),COLORRED;
STICKLINE(CLOSE<=OPEN,0,VOL,2,0),COLORLIBLUE;
STICKLINE(平量,0,VOL,1,0),COLORRED;
STICKLINE(倍量,0,VOL,1.2,0),COLORYELLOW;
STICKLINE(倍缩,0,VOL,2,0),COLORRED;
STICKLINE(低量,0,VOL,2,0),COLORMAGENTA;
STICKLINE(地量,0,VOL,1,0),COLORGREEN;
STICKLINE(缩量涨,0,VOL,1,0),COLORBLUE;
DRAWTEXT(倍量,VOL*1.09,'倍'),COLORYELLOW;
X_31:=(3*CLOSE+HIGH+LOW+OPEN)/6;
X_32:=(8*X_31+7*REF(X_31,1)+6*REF(X_31,2)+5*REF(X_31,3)+4*REF(X_31,4)+3*REF(X_31,5)+2*REF(X_31,6)+REF(X_31,8))/36;
X_33:=VOL=HHV(VOL,10) AND VOL>2*REF(VOL,1) AND CLOSE>X_32 AND CLOSE>OPEN;
黄金柱:FILTER(X_33,5),STICK,COLORRED;
STICKLINE(黄金柱,0,VOL,1.8,0),COLORRED;
DRAWTEXT(黄金柱,VOL*1.23,'黄'),COLORRED;
X_34:=VOL/((HIGH-LOW)*2-ABS(CLOSE-OPEN));
X_35:=VOL;
主买:IF(CLOSE>OPEN,X_34*(HIGH-LOW),IF(CLOSE<OPEN,X_34*(HIGH-OPEN+(CLOSE-LOW)),VOL/2)),NODRAW,COLORRED;
主卖:IF(CLOSE>OPEN,0-X_34*(HIGH-CLOSE+(OPEN-LOW)),IF(CLOSE<OPEN,0-X_34*(HIGH-LOW),0-VOL/2)),POINTDOT,COLORGREEN;
STICKLINE(主卖<0,0,主卖,1,0),COLORGREEN;
DRAWTEXT(VOL=HHV(VOL,0),HHV(VOL,30)*0.918,'天量'),COLORWHITE;
MAV5:MA(VOL,5),COLORRED;
MA35:MA(VOL,35),COLORLIBLUE;
MAV120:MA(VOL,120),COLORYELLOW,LINETHICK2;
```

## 主力建仓指标

```bash
MID:=(3*CLOSE+LOW+OPEN+HIGH)/6;
趋势线:(20*MID+19*REF(MID,1)+18*REF(MID,2)+17*REF(MID,3)+16*REF(MID,4)+15*REF(MID,5)+14
*REF(MID,6)+13*REF(MID,7)+12*REF(MID,8)+11*REF(MID,9)+10*REF(MID,10)+9*REF(MID,11)+8
*REF(MID,12)+7*REF(MID,13)+6*REF(MID,14)+5*REF(MID,15)+4*REF(MID,16)+3*REF(MID,17)
+2*REF(MID,18)+REF(MID,20))/210,COLORRED;
买卖线:MA(趋势线,6),COLORGREEN;
支撑线:MA(趋势线,2),COLOR00CCCC;
STICKLINE(趋势线>=买卖线 AND C<O,C,O,2.8,0),COLORRED;
STICKLINE(趋势线>=买卖线 AND C>O,C,O,2.8,1),COLORRED;
STICKLINE(趋势线>=买卖线,H,MAX(C,O),0,0),COLORRED;
STICKLINE(趋势线>=买卖线,L,MIN(C,O),0,0),COLORRED;
STICKLINE(趋势线<买卖线 AND C<O,C,O,2.8,0),COLOR0066CC;
STICKLINE(趋势线<买卖线 AND C>O,C,O,2.8,1),COLOR0066CC;
STICKLINE(趋势线<买卖线,H,MAX(C,O),0,0),COLOR0066CC;
STICKLINE(趋势线<买卖线,L,MIN(C,O),0,0),COLOR0066CC;
DRAWTEXT(CROSS(趋势线,买卖线),L*0.99,'主力建仓'),COLORRED;
DRAWTEXT(CROSS(买卖线,趋势线),H*1.01,'主力离场'),COLOR0066CC;
DRAWTEXT(趋势线>=买卖线 AND ISLASTBAR,H+0.05*H,'持有'),COLORRED;
DRAWTEXT(趋势线<买卖线 AND ISLASTBAR,L-0.05*L,'观望'),COLORGREEN;
{
STICKLINE(红色持股,CLOSE,O,2.8,0),COLOR000055;
STICKLINE(红色持股,CLOSE,O,2,0),COLOR000088;
STICKLINE(红色持股,CLOSE,O,1.5,0),COLOR0000AA;
STICKLINE(红色持股,CLOSE,O,1,0),COLOR0000CC;
STICKLINE(红色持股,CLOSE,O,0.5,0),COLOR0000EE;
STICKLINE(青色观望,CLOSE,O,2.8,0),COLOR555500;
STICKLINE(青色观望,CLOSE,O,2,0),COLOR888800;
STICKLINE(青色观望,CLOSE,O,1.5,0),COLORAAAA00;
STICKLINE(青色观望,CLOSE,O,1,0),COLORCCCC00;
STICKLINE(青色观望,CLOSE,O,0.5,0),COLOREEEE00;

}
VAR0:=SMA(MAX(CLOSE-REF(C,1),0),12,1)/SMA(ABS(CLOSE-REF(C,1)),15,1)*100;
{DRAWTEXT(CROSS(82,VAR0),H*1.04,'快卖'),COLORWHITE;}
S:=C-REF(C,1);
DX:=100*EMA(EMA(S,6),6)/EMA(EMA(ABS(S),6),6);
买:=IF(LLV(DX,2)=LLV(DX,7) AND COUNT(DX<0,2) AND CROSS(DX,MA(DX,2)),1,0);
{DRAWTEXT(FILTER(买=1,5),L*0.96,'拉升'),COLORFFDE00;}
DA:=(EMA(C,1)+EMA(C,2)+EMA(C,3)+EMA(C,4))/4;
DB:=(EMA(C,10)+EMA(C,20)+EMA(C,40)+EMA(C,80))/4;
{DRAWICON(CROSS(DA-DB,0),L*0.98,7);}
JH:=SMA(MAX(C-REF(C,1),0),5,1)/SMA(ABS(C-REF(C,1)),5,1)*100;
{DRAWICON(CROSS(84,JH),H*1.04,8);}
字:=STRCAT(STRCAT(STRCAT(STRCAT('名称: ',STKNAME),' 代码: '),CODE),' ' );
板块:=STRCAT('概念板块: ',GNBLOCK);
DRAWTEXT_FIX(ISLASTBAR,0.65,0,0,STRCAT(字,板块)),COLOR00CCCC;
YC:=REF(CLOSE,1);
止损价位:=(YC*1.0035*97+0.2)/99.65;

E:=(HIGH+LOW+OPEN+2*CLOSE)/5;

明日阻力:=2*E-LOW;
明日支撑:=2*E-HIGH;
明日突破:=E+(HIGH-LOW);
明日反转:=E-(HIGH-LOW);
今日阻力:=REF(明日阻力 , 1);
今日支撑:=REF(明日支撑 , 1);
{DRAWTEXT_FIX(C!=0,0.8,0.05,0,STRCAT('今日阻力： ',STRCAT(CON2STR(今日阻力,2),' 元'))),COLORFFFF00;
DRAWTEXT_FIX(C!=0,0.8,0.1,0,STRCAT('今日支撑： ',STRCAT(CON2STR(今日支撑,2),' 元'))),COLORRED;
DRAWTEXT_FIX(C!=0,0.8,0.15,0,STRCAT('明日突破： ',STRCAT(CON2STR(明日突破,2),' 元'))),COLORFF00FF;
DRAWTEXT_FIX(C!=0,0.8,0.2,0,STRCAT('明日阻力： ',STRCAT(CON2STR(明日阻力,2),' 元'))),COLORFFFF00;
DRAWTEXT_FIX(C!=0,0.8,0.25,0,STRCAT('明日支撑： ',STRCAT(CON2STR(明日支撑,2),' 元'))),COLORRED;
{DRAWTEXT_FIX(C!=0,0.8,0.3,0,STRCAT('明日反转： ',STRCAT(CON2STR(明日反转,2),' 元'))),COLOR00CCCC;}
A:=HHV(HIGH,13)=HIGH AND HIGH>REF(HIGH,1);
A1:=FILTER(A,12);
B:=LLV(LOW,13)=LOW AND LOW<REF(LOW,1);
B1:=FILTER(B,12);
TS1:=BARSLAST(A1);
箱顶:REF(HIGH,TS1),COLORFF00FF,NODRAW;
{STICKLINE(1,箱顶,箱顶,1.5,0),COLORFF00FF;
TS2:=BARSLAST(B1);
箱底:REF(LOW,TS2),COLORFFBB80,NODRAW;
STICKLINE(1,箱底,箱底,1.5,0),COLORFFBB80;
箱高:100*(箱顶-箱底)/箱底,NODRAW;}
均价:=(3*C+H+L+O)/6;
VAR1:=(8*均价+7*REF(均价,1)+6*REF(均价,2)+5*REF(均价,3)+
4*REF(均价,4)+3*REF(均价,5)+2*REF(均价,6)+REF(均价,8))/36;
VAR2:=(LLV(VAR1,2)+LLV(VAR1,4)+LLV(VAR1,6))/3;
SZ1:=REF(VAR1,1)=REF(VAR2,1) AND VAR1>VAR2 AND CLOSE>VAR1;
SZ2:=VAR1>VAR2 AND VAR1>REF(VAR1,1) AND VAR2>REF(VAR2,1)
AND H/VAR1<1.1 AND L>VAR2 AND CLOSE>VAR1;
SZ3:=VAR1>VAR2 AND VAR1>REF(VAR1,1) AND VAR2>=REF(VAR2,1) AND H/VAR1>1.1;
SZ4:=VAR1>VAR2 AND VAR1>REF(VAR1,1) AND VAR2>REF(VAR2,1)
AND CLOSE>VAR2 AND CLOSE<VAR1;
SZ5:=(VAR1>VAR2 AND VAR2>REF(VAR2,1) AND VAR1<>REF(VAR1,1)
AND CLOSE<VAR2) OR (VAR1>VAR2 AND VAR1<REF(VAR1,1)
AND VAR2<REF(VAR2,1) AND CLOSE<VAR2);
SZ6:=REF(VAR1,1)>REF(VAR2,1) AND VAR1=VAR2 AND CLOSE<VAR2;
XD1:=VAR1=VAR2 AND CLOSE<VAR2 OR (VAR1<REF(VAR1,1) AND VAR2<REF(VAR2,1)
AND REF(VAR1,1)=REF(VAR2,1) AND CLOSE<VAR2);
XD2:=VAR1=VAR2 AND CLOSE>VAR1;
SAT:=(AMOUNT/C)/(HHV(AMOUNT,20)/HHV(C,20));
量能饱和度:=IF(SAT>1,1,SAT)*100;

```

## 分时主力监测

```bash
A1:=SUM(IF(CLOSE>REF(CLOSE,1),VOL/CAPITAL*100,IF(CLOSE<REF(CLOSE,1),-VOL/CAPITAL*100,0)),0);
CJE:=V*C/100,NODRAW;
A2:=SUM((IF(((CJE/8>20) AND (CLOSE>(REF(CLOSE,1)))),CJE,0)),0);
A3:=SUM((IF(((CJE/8>20) AND (CLOSE<(REF(CLOSE,1)))),CJE,0)),0);
A4:=SUM((IF(((CJE/8<20) AND (CLOSE>(REF(CLOSE,1)))),CJE,0)),0);
A5:=SUM((IF(((CJE/8<20) AND (CLOSE<(REF(CLOSE,1)))),CJE,0)),0);
A6:=((A2+A3)+A4)+A5;
A7:=IF((ISLASTBAR),((100*A2)/A6),0);
A8:=IF((ISLASTBAR),((100*A3)/A6),0);
A9:=IF((ISLASTBAR),((100*A4)/A6),0);
A10:=IF((ISLASTBAR),((100*A5)/A6),0);
机构买:(A2),LINETHICK6,COLORRED;
机构卖:(A3),LINETHICK6,COLORGREEN;
机构进出:机构买-机构卖,NODRAW;
散户买:(A4),COLOR5555FF;
散户卖:(A5),COLOR55FF55;
SHJC:=散户买-散户卖,NODRAW;
强势:((100*A2)/A6>50);
STICKLINE(强势,机构买*1.02,机构买*1.1,1,0),COLORYELLOW;
拉升:((100*A2)/A6-(100*A3)/A6)>18 AND (100*A2)/A6-(100*A5)/A6>18;
STICKLINE(拉升,机构买*1.1,机构买*1.2,1,0),COLORRED;
DRAWTEXT(ISLASTBAR=1,机构买*0.95,''),LINETHICK2,COLORRED;
DRAWTEXT(ISLASTBAR=1,机构卖*0.95,''),LINETHICK2,COLORFFFF55;
Q:=BETWEEN(C/(SUM(AMOUNT,BARSCOUNT(C))/SUM(VOL*100,BARSCOUNT(C))),1.05,0.95);
Q2:=IF(Q=0,MA(C,BARSCOUNT(C)),(SUM(AMOUNT,BARSCOUNT(C))/SUM(VOL*100,BARSCOUNT(C))));
DRAWICON(CROSS((C/Q2),1.03),机构买,5);
XG:=C/Q2;
DD1:=1;
LIJINA1:=STRCAT(STRCAT('机构买入',CON2STR((100*A2)/A6,0)),'%');
LIJINA2:=STRCAT(STRCAT('机构卖出',CON2STR((100*A3)/A6,0)),'%');
LIJINA0:=STRCAT(STRCAT('机构总买',CON2STR((100*(A2-A3))/A6,0)),'%');
LIJINA3:=STRCAT(STRCAT('散户买入',CON2STR((100*A4)/A6,0)),'%');
LIJINA4:=STRCAT(STRCAT('散户卖出',CON2STR((100*A5)/A6,0)),'%');
LIJINA5:=STRCAT(STRCAT('散户总买',CON2STR((100*(A4-A5))/A6,0)),'%');
DRAWTEXT_FIX(DD1=1,0.50,0.60,0,LIJINA1),COLORRED;
DRAWTEXT_FIX(DD1=1,0.50,0.70,0,LIJINA2),COLORGREEN;
DRAWTEXT_FIX(DD1=1,0.50,0.80,0,LIJINA0),COLORYELLOW;
DRAWTEXT_FIX(DD1=1,0.80,0.60,0,LIJINA3),COLORRED;
DRAWTEXT_FIX(DD1=1,0.80,0.70,0,LIJINA4),COLORGREEN;
DRAWTEXT_FIX(DD1=1,0.80,0.80,0,LIJINA5),COLORYELLOW;
JJ1:=SUM(V*C,0)/SUM(V,0),COLORYELLOW;
地:EMA(JJ1,50)/0.97,LINETHICK2,COLORGREEN,NODRAW;
DMCS:=COUNT(V>4000 AND C>REF(C,1),0);
HCS:=COUNT(V>DYNAINFO(16)*10 AND C>REF(C,1),0),COLORYELLOW,NODRAW;
DRAWICON(DMCS>REF(DMCS,1) AND HCS>REF(HCS,1) AND CROSS(C,地),机构买,24);
HD:=HIGH-REF(HIGH,1);
LD:=REF(LOW,1)-LOW;
DMP:=EMA(IF(HD>0 AND HD>LD,HD,0),28);
DMM:=EMA(IF(LD>0 AND LD>HD,LD,0),28);
VZH:=EMA(DMP/TR,28);
VZL:=EMA(DMM/TR,28);
MA1:=EMA((CLOSE+HIGH+LOW)/3,2);
LIJIN1:=MAX((DYNAINFO(3)),EMA(DYNAINFO(5),5));
LIJIN2:=MIN((DYNAINFO(3)),EMA(DYNAINFO(6),5));
HH:=(COST(95)+DYNAINFO(11))/2;
LL:=(COST(5)+DYNAINFO(11))/2;
LIJIN3:=CONST((LIJIN1+HH)/2);
LIJIN4:=CONST((LIJIN2+LL)/2);
LIJIN5:=(LIJIN3+LIJIN4)/2;
LIJIN6:=(LIJIN4+LIJIN5)-LIJIN3;
LIJIN7:=(LIJIN4+LIJIN6)/2;
LIJIN8:=(LIJIN6+LIJIN7)/2;
LIJIN10:=(3*SMA((C-LLV(L,54))/(HHV(H,54)-LLV(L,54)),3,1)-2*SMA(SMA((C-LLV(L,54))/(HHV(H,54)-LLV(L,54)),3,1),3,1));
LIJIN11:=MEMA(LIJIN10,10);
LIJIN12:=EMA(LIJIN11,10);
LIJIN13:=IF(EXIST(CROSS(LIJIN3,MA1),5) AND EXIST(C>LIJIN3,10) AND LIJIN11<HHV(LIJIN11,10) AND LIJIN12<REF(LIJIN12,1),1,0);
LIJIN14:=IF(EXIST(CROSS(MA1,LIJIN4),5) AND EXIST(C<LIJIN4,10) AND LIJIN11>LLV(LIJIN11,10) AND LIJIN12>REF(LIJIN12,1),1,0);
顶:=LIJIN3,POINTDOT,COLORFF00FF;
底:=LIJIN4,POINTDOT,COLORGREEN;
多空:=IF(VZH>VZL,LIJIN7,LIJIN6);
```

## 烽火起爆指标

```bash
DRAWTEXT_FIX(1,0.215,0,0,'[起爆]'),COLORRED;
L1A:=LLV(L,10);
起爆点0:=(DCLOSE-REF(C,1))/REF(C,1)*100;
XG:=CROSS(起爆点0,20) OR CROSS(起爆点0,18);
L3:=IF(XG,O,L1A*0.999)LINETHICK5,COLORYELLOW;
YY:=STICKLINE(XG,L3,L3,20,0),COLORGRAY,LINETHICK5;
HAN:=DATE=DATE;
MA6:=MA(C,6);
MA12:=MA(C,12);
MA18:=MA(C,18);
YY1:=O<MA6 AND C>MA6;
YY2:=O<MA12 AND C>MA12;
YY3:=O<MA18 AND C>MA18;
YY4:=C/O>=1.02;
YY5:=V>HHV(H,10);
YY6:=MA6>=REF(MA6,1);
YYY:=YY1 AND YY2 AND YY3 AND YY4 AND YY5 AND YY6;

STICKLINE(YY,0,100,9999,0)*HAN,COLOR000000;
STICKLINE(YY,50,100,2,0)*HAN,COLOR0000FF;
STICKLINE(YY,60,100,4,0)*HAN,COLOR0000FF;
STICKLINE(YY,70,100,6,0)*HAN,COLOR0000FF;
STICKLINE(YY,80,100,7,0)*HAN,COLOR0000FF;
STICKLINE(YY,90,100,8,0)*HAN,COLOR0000FF;

STICKLINE(YY,70,100,1,0)*HAN,COLOR00FFFF;
STICKLINE(YY,80,100,2,0)*HAN,COLOR00FFFF;
STICKLINE(YY,90,100,3,0)*HAN,COLOR00FFFF;

STICKLINE(YY,35,45,9,0)*HAN,COLOR00FFFF;
DRAWTEXT(YY,YY*50,' ←启爆火焰'),COLOR0000FF;
VAR0:=(CLOSE-LLV(LOW,60))/(HHV(HIGH,60)-LLV(LOW,60))*100;
VAR3:=SMA(VAR0,3,1);
VAR1:=SMA(VAR3,4,1)-10,NODRAW;
VAR4:=(HHV(HIGH,60)-CLOSE)/(HHV(HIGH,60)-LLV(LOW,60))*100;
VAR5:=SMA(VAR4,3,1);
VAR2:=SMA(VAR5,4,1)-90;
STICKLINE(REF(VAR1,1)<VAR1,VAR1,REF(VAR1,1),3,0),COLOR0000FF;
STICKLINE(REF(VAR1,1)>VAR1,VAR1,REF(VAR1,1),3,0),COLOR00FF00;
{STICKLINE(REF(VAR2,1)>VAR2,VAR2,REF(VAR2,1),3,0),COLOR0000FF;
STICKLINE(REF(VAR2,1)<VAR2,VAR2,REF(VAR2,1),2,0),COLOR00FF00;}
{0,COLOR0000FF;
5,COLORCYAN;
85,COLORCYAN;
75,COLORYELLOW;};
VAR02:=REF(LOW,1);
VAR03:=SMA(ABS(LOW-VAR02),13,1)/SMA(MAX(LOW-VAR02,0),13,1)*100;
VAR04:=EMA(IF(CLOSE*1.2,VAR03*13,VAR03/13),13);
VAR05:=LLV(LOW,34);
VAR6:=HHV(VAR04,34);
VAR7:=IF(LLV(LOW,56),1,0);
VAR8:=EMA(IF(LOW<=VAR05,(VAR4+VAR6*2)/2,0),3)/618*VAR7;
AA:=VAR8>REF(VAR8,1);
DR:=100;ZRQ:=3;
DJ:=REF(LLV(L,100),3);
ZD:=REFDATE(DJ,DATE);
XG0:=L=ZD;
XGA:=AA AND XG0,COLORRED,LINETHICK2;
XG1:=XGA>REF(XGA,1);
起爆点:=XG1>REF(XG1,1)COLORRED,LINETHICK2;
STICKLINE(FILTER(起爆点>=1,5),45,0,4,0),COLORRED;
DRAWTEXT(FILTER(起爆点=1,5),36,'起爆点'),COLORRED;
STICKLINE(起爆点,40,25,1,0),COLORYELLOW;
STICKLINE(起爆点,25,10,2,0),COLOR00FF00;
STICKLINE(起爆点,10,0,3,0),COLORBLUE;
STICKLINE(起爆点,25,15,5,0),COLORRED;
STICKLINE(起爆点,15,6,4,0),COLORLIGREEN;
STICKLINE(起爆点,6,0,6,0),COLORGREEN;
STICKLINE(起爆点,30,10,4,1),COLORMAGENTA;
XXG:=CROSS(起爆点0,20) OR CROSS(起爆点0,18);
ZDF:=(C-REF(C,1))/REF(C,1)*100;
STICKLINE(ZDF<-9.9,O,C,1,0),COLORBLUE;
AQ1:=REF(V,1);AQ2:=DVOL;AQ3:=AQ2/AQ1;
LNX:=AQ3-REF(AQ3,1);
E1:=REF(C,1);E2:=DCLOSE;E3:=(E2-E1)/E1*100;

QMX:=E3-REF(E3,1);

E:=CROSS(LNX,500) AND CROSS(QMX,10);
STICKLINE(XXG,6,2,2.5,1),COLORYELLOW;
STICKLINE(XXG,2,36,3.5,1),COLORYELLOW;
STICKLINE(XXG,10,20,3,1),COLORMAGENTA;
DRAWICON(XXG,21,32);
DRAWICON(XXG,25,26);
DRAWICON(XXG,30,28);
DRAWICON(XXG,18,28);
DRAWICON(XXG,15,28);
DRAWICON(XXG,20,10);
DRAWICON(XXG,10,28);
DRAWICON(XXG,6.6,29);
DRAWTEXT(XXG,26,'【启动点】'),COLORMAGENTA;

STICKLINE(IF(E,-10,0),+38,3,2.2,0),COLOR990099;
STICKLINE(IF(E,-120,0),+39,0,2.6,0),COLORBB00BB;
STICKLINE(IF(E,-120,0),+39,0,2.1,0),COLORDD00DD;
STICKLINE(IF(E,-120,0),+36,0,3.0,0),COLOR003300;
STICKLINE(IF(E,-120,0),+36,0,2.4,0),COLOR005500;
STICKLINE(IF(E,-120,0),+33,0,3.0,0),COLOR005555;
STICKLINE(IF(E,-120,0),+33,0,3.4,0),COLOR007777;
STICKLINE(IF(E,-120,0),+33,0,1.8,0),COLOR009999;
STICKLINE(IF(E,-120,0),+33,0,1.2,0),COLOR00BBBB;
STICKLINE(IF(E,-120,0),+33,0,0.6,0),COLOR00DDDD;
STICKLINE(E,2,20,3.5,1),COLORYELLOW;
DRAWTEXT(E,6,'【启爆器】'),COLORYELLOW;
```

## 庄家控盘

```bash
VAR1:=EMA(EMA(CLOSE,9),9);
控盘:=(VAR1-REF(VAR1,1))/REF(VAR1,1)*1000;
STICKLINE(控盘<0,控盘,0,1,0),COLORWHITE;
A10:=CROSS(控盘,0);
庄家抬轿1:IF(控盘<0 OR 控盘>0,控盘,0),COLORBLACK,NODRAW;
庄家抬轿2:IF(控盘<0 OR 控盘>0,控盘,0),COLORBLACK,NODRAW;
庄家抬轿3:IF(控盘<0 OR 控盘>0,控盘,0),COLORBLACK,NODRAW;
庄家抬轿4:IF(控盘<0 OR 控盘>0,控盘,0),COLORBLACK,NODRAW;
庄家抬轿5:IF(控盘<0 OR 控盘>0,控盘,0),COLORBLACK,NODRAW;
庄家抬轿6:IF(控盘<0 OR 控盘>0,控盘,0),COLORBLACK,NODRAW;
庄家抬轿7:IF(控盘<0 OR 控盘>0,控盘,0),COLORBLACK,NODRAW;
庄家抬轿8:IF(控盘<0 OR 控盘>0,控盘,0),COLORBLACK,NODRAW;
庄家抬轿9:IF(控盘<0 OR 控盘>0,控盘,0),COLORBLACK,NODRAW;
无庄控盘:IF(控盘<0,控盘,0),COLORWHITE,NODRAW;
开始控盘:IF(A10,5,0),LINETHICK1,COLORYELLOW;
STICKLINE(控盘>REF(控盘,1) AND 控盘>0,控盘,0,1,0),COLORRED;
有庄控盘:IF(控盘>REF(控盘,1) AND 控盘>0,控盘,0),COLORRED,NODRAW;
VAR2:=100*WINNER(CLOSE*0.95);
STICKLINE(VAR2>50 AND COST(85)<CLOSE AND 控盘>0,控盘,0,1,0),COLORFF00FF;
高度控盘:IF(VAR2>50 AND COST(85)<CLOSE AND 控盘>0,控盘,0),COLORFF00FF,NODRAW;
STICKLINE(控盘<REF(控盘,1) AND 控盘>0,控盘,0,1,0),COLOR00FF00;
主力出货:IF(控盘<REF(控盘,1) AND 控盘>0,控盘,0),COLOR00FF00,NODRAW;
```

## 主力监控器

```bash
STEP1:=STEP/20;
MVALUE1:=MVALUE/8;
SARLINE:SAR(N,STEP1,MVALUE1),CIRCLEDOT,COLORRED;
DRAWTEXT(CROSS(C,SARLINE),L-0.05*L,'主力入场'),COLORRED;
DRAWTEXT(CROSS(SARLINE,C),H+0.05*H,'主力离场'),COLORCYAN;

STICKLINE(C>SAR(N,STEP1,MVALUE1) AND C<O,C,O,2.8,0),COLORRED;
STICKLINE(C>SAR(N,STEP1,MVALUE1) AND C>O,C,O,2.8,1),COLORRED;
STICKLINE(C>SAR(N,STEP1,MVALUE1),H,MAX(C,O),0,0),COLORRED;
STICKLINE(C>SAR(N,STEP1,MVALUE1),L,MIN(C,O),0,0),COLORRED;
STICKLINE(C<SAR(N,STEP1,MVALUE1) AND C<O,C,O,2.8,0),COLORCYAN;
STICKLINE(C<SAR(N,STEP1,MVALUE1) AND C>O,C,O,2.8,1),COLORCYAN;
STICKLINE(C<SAR(N,STEP1,MVALUE1),H,MAX(C,O),0,0),COLORCYAN;
STICKLINE(C<SAR(N,STEP1,MVALUE1),L,MIN(C,O),0,0),COLORCYAN;
```

## 分时操盘法

```bash
{分时买卖点}
AA1:=(VOL/CLOSE)/3;
AA2:=SUM((IF(((AA1>40) AND (CLOSE>(REF(CLOSE,1)))),AA1,0)),0);
AA3:=SUM((IF(((AA1>40) AND (CLOSE<(REF(CLOSE,1)))),AA1,0)),0);
AA4:=SUM((IF(((AA1<40) AND (CLOSE>(REF(CLOSE,1)))),AA1,0)),0);
AA5:=SUM((IF(((AA1<40) AND (CLOSE<(REF(CLOSE,1)))),AA1,0)),0);
AA6:=((AA2+AA3)+AA4)+AA5;
AA7:=IF((BARSTATUS=2),((100*AA2)/AA6),0);
AA8:=((IF((BARSTATUS=2),((100*AA3)/AA6),0)));
AA9:=((IF((BARSTATUS=2),((100*AA4)/AA6),0)));
AA10:=((IF((BARSTATUS=2),((100*AA5)/AA6),0)));
机买:=(AA2),LINETHICK0;
机卖:=(AA3),LINETHICK0;
散买:=(AA4);
散卖:=(AA5);
总买:=AA2+AA4;
总卖:=AA3+AA5;
机构买比:=机买/总买*0.1,LINETHICK0;
机构卖比:=机卖/总卖*0.1,LINETHICK0;
均价:SUM(C*V,240)/SUM(V,240),COLORYELLOW,LINETHICK1;
TT:=BARSCOUNT(C);
前高:=REF(HHV(H,TT),1);
突破:=CROSS(C,REF(HHV(H,TT),1)){ AND HHVBARS(VOL,TT)=0} AND C/均价<1.09 AND TT>1 AND TT<240;
DRAWTEXT(CROSS(C,REF(HHV(H,TT),1)) AND {HHVBARS(VOL,TT)=0 AND} C/均价<1.09 AND TT>=1 AND TT<240 ,前高, '←突'),COLORRED;
主力扫盘:=COUNT(突破,13)>=3 AND CROSS(C,REF(HHV(H,TT),1)){ AND HHVBARS(VOL,TT)=0};
DRAWTEXT(主力扫盘,前高, '←扫盘'),COLORYELLOW;
{已主力扫盘:=BARSLAST(主力扫盘)<13;
DRAWTEXT(BARSLAST(主力扫盘)<8,(DYNAINFO(3))*9.5/10 , '↖已扫'),COLORGREEN;}
全仓买进:=CROSS(C,REF(HHV(H,TT),1)) AND HHVBARS(VOL,TT)=0 AND C/均价<1.09 AND TT>1 AND TT<240 AND BARSLAST(主力扫盘)>=21;
DRAWTEXT(全仓买进 ,前高, '←全仓'),COLORCYAN;
VAR1:=EMA(EMA(C,13),13);
控盘:=(VAR1-REF(VAR1,1))/REF(VAR1,1)*1000;
JJ:=DYNAINFO(11);
P:=55;
S:=8;
M1:=3;
能量:=(EMA(C,S)-EMA(C,P))*10;
空头:=EMA(能量,M1);
BTJ11:=(C-JJ)/JJ<-0.03;
BTJ2:=控盘>REF(控盘,1) AND 控盘<-0.2;
BTJ3:=CROSS(能量,空头) AND 能量<-0.3;
BTJ811:=FILTER(BTJ11 AND BTJ2 AND BTJ3,13);
有庄:=BTJ811;
DRAWTEXT(BTJ811,C*0.999,'←有庄'),COLORRED;
H1:=MAX(DYNAINFO(3),DYNAINFO(5));
L1:=MIN(DYNAINFO(3),DYNAINFO(6));
P1:=H1-L1;
阻力:L1+P1*7/8,COLORGREEN,LINETHICK1;
支撑:L1+P1*0.5/8,COLORYELLOW,LINETHICK1;
{DRAWICON(LONGCROSS(支撑,C,2),C,25);
DRAWICON(LONGCROSS(C,阻力,2),C,27);}
{资金流入:=SUM(IF(C>REF(C,1),C*V,0),FROMOPEN);
资金流出:=-SUM(IF(C<REF(C,1),C*V,0),FROMOPEN);
净资金:=(资金流入+资金流出)/10000;
{DRAWTEXT_FIX(1,0.700,1-0.15,0,STRCAT(STRCAT('【净买】',CON2STR(净资金,1)),'万')),COLORRED;}
KP:=DYNAINFO(4);
ZX:=DYNAINFO(7);
{分时量}
{分时K}
ZS:=DYNAINFO(3);
ZG:=DYNAINFO(5);
ZD:=DYNAINFO(6);
OP:=500-(KP/ZS-1)*1200;
CL:=500-(ZX/ZS-1)*1200;
HI:=500-(ZG/ZS-1)*1200;
LO:=500-(ZD/ZS-1)*1200;
{N1:=IF(TIME2<125959,750,260);{360,860}
N1:=IF(FROMOPEN>=120,250,750);
Z1:=IF(ZX>=KP,255,0);
Z2:=IF(ZX>=KP,0,255);
Z3:=IF(ZX>=KP,0,255);
XA_1:=MAX(DYNAINFO(3),DYNAINFO(5));
XA_2:=MIN(DYNAINFO(3),DYNAINFO(6));
XA_3:=XA_1-XA_2;
XA_4:=XA_2+XA_3*7/8;
XA_5:=XA_2+XA_3*0.5/8;
DRAWTEXT(LONGCROSS(XA_5,CLOSE,2),CLOSE,'★买入'),COLORMAGENTA;
DRAWICON(LONGCROSS(XA_5,CLOSE,2),CLOSE,25);
DRAWTEXT(LONGCROSS(CLOSE,XA_4,2),CLOSE,'★卖出'),COLORFFCC00;
DRAWICON(LONGCROSS(CLOSE,XA_4,2),CLOSE,24);
XA_6:=DYNAINFO(4);
XA_7:=DYNAINFO(5);
XA_8:=DYNAINFO(6);
XA_9:=DYNAINFO(11);
XA_10:=CLOSE;
XA_11:=BARSCOUNT(XA_10);
XA_12:=SUM(VOL*CLOSE,0)/SUM(VOL,0);
XA_13:=MA(XA_10,XA_11);
XA_14:=XA_13+2*STD(XA_10,3);
XA_15:=XA_13-2*STD(XA_10,3);
DRAWICON(CROSS(XA_12,XA_13),XA_12,38);
XA_16:=TIME>93000;
XA_17:=XA_10/REF(CLOSE,1)>1.02;
XA_18:=XA_10/REF(CLOSE,1)<0.98;
XA_19:=(HHV(XA_10,XA_11)-LLV(XA_10,XA_11))/XA_10<0.05;
XA_20:=SMA(VOL,30,1);
XA_21:=(XA_20-LLV(LLV(XA_20,1),30))/(HHV(HHV(XA_20,1),30)-LLV(LLV(XA_20,1),30))>0.95;
XA_22:=XA_17 OR XA_18;
XA_23:=XA_22=0 AND XA_19 AND XA_21 AND CROSS(XA_12,XA_13);
DRAWTEXT(FILTER(XA_23,10),XA_12,506),COLORYELLOW;
XA_24:=XA_22=0 AND XA_19 AND XA_21 AND CROSS(CLOSE,XA_12) AND CROSS(CLOSE,XA_13);
DRAWTEXT(FILTER(XA_24,10),XA_12*0.99,507),COLORRED;
MA5:MA.MA1#DAY(5,10,20),NODRAW;
DRAWTEXT_FIX(1,0.880,1-0.20,0,STRCAT(STRCAT('MA5:??',CON2STR(MA5,2)),'')),COLORWHITE;
MA10:MA.MA2#DAY(5,10,20),NODRAW;
DRAWTEXT_FIX(1,0.880,1-0.15,0,STRCAT(STRCAT('MA10:',CON2STR(MA10,2)),'')),COLORYELLOW;
MA20:MA.MA3#DAY(5,10,20),NODRAW;
DRAWTEXT_FIX(1,0.880,1-0.10,0,STRCAT(STRCAT('MA20:',CON2STR(MA20,2)),'')),COLORMAGENTA;
MA60:MA.MA4#DAY(5,10,20),NODRAW;
DRAWTEXT_FIX(1,0.880,1-0.05,0,STRCAT(STRCAT('MA60:',CON2STR(MA60,2)),'')),COLORGREEN;
攻击量:=((HSL*0.50+REF(HSL,1)*0.33)+(REF(HSL,2)*0.17))*SUM(C,FROMOPEN)/FROMOPEN;
攻击量A:=SUM(IF(C>REF(C,1),攻击量*V,0),FROMOPEN),COLOR0000FF,LINETHICK0;
攻击量B:=-SUM(IF(C<REF(C,1),攻击量*V,0),FROMOPEN),COLOR00FF00,LINETHICK0;
攻击流量:=攻击量A+攻击量B,COLORSTICK;
攻击比:=攻击流量/SUM(V,FROMOPEN)*100,COLORRED,LINETHICK1;
资金攻击度:=IF(攻击比>=0,(攻击比+50),100-ABS((攻击比-50)));
资金流入:=SUM(IF(C>REF(C,1),V,0),FROMOPEN),STICK,COLORRED;
资金流出:=-SUM(IF(C<REF(C,1),V,0),FROMOPEN),STICK,COLOR00FF00;
资金出入:=资金流入+资金流出,COLORSTICK;
资金比:=资金出入/SUM(V,FROMOPEN)*100,COLOR00FFFF,LINETHICK1;
资金流量比:=IF(资金比>=0,(资金比+100)/2,100-ABS((资金比-100)/2));
DRAWTEXT_FIX(1,0.200,0.87,0,STRCAT(STRCAT('资金流量比',CON2STR(资金流量比,2)),'％买')),COLORCYAN;
DRAWTEXT_FIX(1,0.000,0.87,0,STRCAT(STRCAT('资金攻击度',CON2STR(资金攻击度,2)),' ％买')),COLORCYAN;
A1:=SUM(IF(CLOSE>REF(CLOSE,1),VOL/CAPITAL*100,IF(CLOSE<REF(CLOSE,1),-VOL/CAPITAL*100,0)),0);
成交额:=V*C/100,NODRAW;
A2:=SUM((IF(((成交额/8>20) AND (CLOSE>(REF(CLOSE,1)))),成交额,0)),0);
A3:=SUM((IF(((成交额/8>20) AND (CLOSE<(REF(CLOSE,1)))),成交额,0)),0);
A4:=SUM((IF(((成交额/8<20) AND (CLOSE>(REF(CLOSE,1)))),成交额,0)),0);
A5:=SUM((IF(((成交额/8<20) AND (CLOSE<(REF(CLOSE,1)))),成交额,0)),0);
A6:=((A2+A3)+A4)+A5;
A7:=IF((ISLASTBAR),((100*A2)/A6),0);
A8:=IF((ISLASTBAR),((100*A3)/A6),0);
A9:=IF((ISLASTBAR),((100*A4)/A6),0);
A10:=IF((ISLASTBAR),((100*A5)/A6),0);
DD1:=1;
AAA1:=STRCAT(STRCAT('机构买入',CON2STR((100*A2)/A6,0)),'%');
AAA2:=STRCAT(STRCAT('机构卖出',CON2STR((100*A3)/A6,0)),'%');
AAA0:=STRCAT(STRCAT('机构总买入',CON2STR((100*(A2-A3))/A6,0)),'%');
AAA3:=STRCAT(STRCAT('散户买入',CON2STR((100*A4)/A6,0)),'%');
AAA4:=STRCAT(STRCAT('散户卖出',CON2STR((100*A5)/A6,0)),'%');
AAA5:=STRCAT(STRCAT('散户总买入',CON2STR((100*(A4-A5))/A6,0)),'%');
DRAWTEXT_FIX(DD1=1,0.000,1.00,0,AAA1),COLORRED;
DRAWTEXT_FIX(DD1=1,0.150,1.00,0,AAA2),COLORGREEN;
DRAWTEXT_FIX(DD1=1,0.300,1.00,0,AAA3),COLORRED;
DRAWTEXT_FIX(DD1=1,0.450,1.00,0,AAA4),COLORGREEN;
DRAWTEXT_FIX(DD1=1,0.600,1.00,0,AAA0),LINETHICK5,COLORYELLOW;
DRAWTEXT_FIX(DD1=1,0.750,1.00,0,AAA5),LINETHICK5,COLORCYAN;
```

## 倚天屠龙指标

```bash
动力线:MA(C,5), COLORFFFFFF;
牛熊线:MA(C,13),COLORYELLOW;
生命线:MA(C,34),COLORFFFFFF;
MA05:=MA(C,5);
MA10:=MA(C,10);
MA20:=MA(C,20);
MA30:=MA(C,30);
五日乖离率:=(C-MA05)/MA05*100;
BB05:=ATAN((MA05/REF(MA05,1)-1)*100)*180/3.1416;
速度5:=SMA(EMA((MA05-REF(MA05,1))/REF(MA05,1),3)*100,3,1);
加速度5:=EMA((速度5-REF(速度5,1)),3),NODRAW;
IF(BB05>30 AND MA05>REF(MA05,1), MA05,DRAWNULL),COLORRED;
BB10:=ATAN((MA10/REF(MA10,1)-1)*100)*180/3.1416;
IF(BB05<0 AND MA05<REF(MA05,1), MA05,DRAWNULL),COLORGREEN;
三拾日乖离率:=(C-MA30)/MA30*100,NODRAW;
VAR1:=(MA20-MA30)>REF((MA20-MA30),1) AND MA20>REF(MA20,1) AND MA30>REF(MA30,1);
VAR2:=(MA30-MA20)<REF((MA30-MA20),1) AND MA20<REF(MA20,1) AND MA30<REF(MA30,1);
BB30:=ATAN((MA30/REF(MA30,1)-1)*100)*180/3.1416;
强势狙击:=FILTER(BB30>30 AND BB10>45 AND CROSS(BB05,60),10);
加仓:=FILTER(COUNT(CROSS(BB05,30),5)>=1 AND MA05>REF(MA05,1) AND 三拾日乖离率>REF(三拾日乖离率,1) AND MA10>REF(MA10,1)
AND 加速度5>REF(加速度5,1) AND 速度5>REF(速度5,1) ,10) ;
清仓:=FILTER(COUNT(CROSS(30,BB05),5)>=1 AND (C>MA30 OR O>MA30) AND MA05<REF(MA05,1) AND 三拾日乖离率<REF(三拾日乖离率,1) AND MA10<REF(MA10,1),10);
DRAWTEXT(加仓 ,LOW*0.98,'加二'),COLORYELLOW;
JC:=CROSS(0,五日乖离率) AND 三拾日乖离率<REF(三拾日乖离率,1) AND MA10>REF(MA10,1) ;
减仓:=FILTER(JC,10);
MR:=COUNT(CROSS(五日乖离率,0),3)>=1 AND 三拾日乖离率>REF(三拾日乖离率,1) AND MA05>REF(MA05,1) AND (C/REF(C,1)-1)*100>5 AND REF(C,1)<MA30;
买入:=FILTER(MR,10);
DRAWTEXT(减仓,HIGH*1.02,'◆屠 龙'),COLORCYAN;
DRAWTEXT(买入,LOW*0.96,'◆倚 天'),COLORRED;
DRAWTEXT(清仓 ,HIGH*1.00,'★清仓'),COLORGREEN;
VAR21:=MAX(ABS(HIGH-AMOUNT/VOL/100),ABS(AMOUNT/VOL/100-LOW));
VAR3:=ABS((OPEN+CLOSE)/2-AMOUNT/VOL/100);
MV:=(VAR21+VAR3)/AMOUNT*VOL*100*50;
压力:MA(REF(HHV(C,30),1),2),COLORBLACK;
支撑:MA(REF(LLV(C,30),1),2),COLORBLACK;
TYX3:=MA(REF(HHV((C+L+O+H)/4,30),1),3);
TYX4:=MA((C+L+O+H)/4,13);
TYX5:=EMA((C+L+O+H)/4,21);
STICKLINE(C<TYX5 AND C>O,H,L,0,0),COLORRED;
STICKLINE(C<TYX5 AND C>O,C,O,3,1),COLORRED;
STICKLINE(C<TYX5 AND C<O,H,L,0,0),COLOR007700;
STICKLINE(C<TYX5 AND C<O,C,O,3,0),COLOR005500;
STICKLINE(C<TYX5 AND C<O,C,O,2,0),COLOR006600;
STICKLINE(C<TYX5 AND C<O,C,O,1,0),COLOR007700;
STICKLINE(C>TYX5 AND C<O,H,L,0,0),COLORFFDD44;
STICKLINE(C>TYX5 AND C<O,C,O,3,0 ),COLORFF7700;
STICKLINE(C>TYX5 AND C<O,C,O,2,0 ),COLORFFAA22;
STICKLINE(C>TYX5 AND C<O,C,O,1 ,0 ),COLORFFDD44;
STICKLINE(C>TYX5 AND C>O,H,L,0,0 ),COLOR00EEFF;
STICKLINE(C>TYX5 AND C>O,C,O,3,0 ),COLOR00AAFF;
STICKLINE(C>TYX5 AND C>O,C,O,2,0 ),COLOR00CCFF;
STICKLINE(C>TYX5 AND C>O,C,O,1,0 ),COLOR00EEFF;
STICKLINE(C>TYX4 AND C>O,H,L,0,0),COLORFF66AA;
STICKLINE(C>TYX4 AND C>O,C,O,3,0 ),COLORFF11FF;
STICKLINE(C>TYX4 AND C>O,C,O,2,0 ),COLORFF44FF;
STICKLINE(C>TYX4 AND C>O,C,O,1,0 ),COLORFF66FF;
STICKLINE(C>TYX4 AND C<O,H,L,0,0),COLOR999999;
STICKLINE(C>TYX4 AND C<O,C,O,3,0),COLOR555555;
STICKLINE(C>TYX4 AND C<O,C,O,2,0),COLOR777777;
STICKLINE(C>TYX4 AND C<O,C,O,1,0),COLOR999999;
STICKLINE(C>TYX3 AND C>O,H,L,0,0),COLOR0000DD;
STICKLINE(C>TYX3 AND C>O,C,O,3,0),COLOR000099;
STICKLINE(C>TYX3 AND C>O,C,O,2,0),COLOR0000BB;
STICKLINE(C>TYX3 AND C>O,C,O,1,0),COLOR0000DD;
STICKLINE(HIGH=LOW AND CLOSE=OPEN AND (CLOSE/REF(CLOSE,1))>1.048,HIGH,LOW,3,0) ,COLORRED;
STICKLINE(HIGH=LOW AND CLOSE=OPEN AND (REF(CLOSE,1)/CLOSE)>1.048,HIGH,LOW,3,0) ,COLOR00FF00;
STICKLINE(REF(COUNT(C<TYX3,5)=5,1) AND C>TYX3 AND C>O,C,O,1,0),COLOR00CCFF;
MA18:=MA(CLOSE,18);
MTM:=C-REF(C,1);
DX:=100*EMA(EMA(MTM,6),6)/EMA(EMA(ABS(MTM),6),6);
买:=LLV(DX,2)=LLV(DX,7) AND COUNT(DX<0,2) AND CROSS(DX,MA(DX,2));
DRAWTEXT(FILTER(买=1,5),LOW,' '),COLORRED;
加1:=MA18>=REF(MA18,3) AND CROSS(CLOSE,MA18);
DRAWTEXT(加1,LOW*0.99,'加一'),COLORCC66FF;
卖一:=HHV(DX,2)=HHV(DX,7) AND COUNT(DX>50,2) AND CROSS(MA(DX,2),DX);
DRAWTEXT(FILTER(卖一=1,1),HIGH*1.01,' 减仓 '),COLORGREEN;
AA1:=AMOUNT/V;
BB1:=L<AA1*0.9;
CC1:=(C-REF(C,1))/REF(C,1)*100>1.2;
DD1:=L<MA(C,5)*0.921;
EE1:=V<MA(V,5)*1.5;
FF1:=BB1 AND CC1 AND DD1 AND EE1;
DRAWTEXT(FF1,LOW*0.99,''),COLOR4080FF;
XXS:=MA(LOW,5)*(1-5/100);
XXS1:=MA(HIGH,5)*(1+5/100);
均线:=C,COLORGREEN;
AAAA:=CLOSE/REF(CLOSE,3)<=0.85 AND CROSS(C,XXS) AND C>REF(C,1),LINETHICK0 ;
DRAWTEXT(AAAA,L*0.95,'下影买'),COLORRED;
BBAA:=CROSS(XXS1,C);
DRAWTEXT(CROSS(XXS1,C),H,' '),COLORWHITE;
DDDD:=CROSS(C,XXS1);
DRAWTEXT(DDDD,H,' '),COLORYELLOW;
AAA:=MA(LOW,5)*(1-5/100);
BBB:=(HHV(AAA,5)+LLV(AAA,5))/2;
DRAWTEXT(CROSS(BBB,L) AND BBB>REF(BBB,1),L*0.98,'回马枪'),COLORWHITE;
DIF:=EMA(CLOSE,12)-EMA(CLOSE,26);
DEA:=EMA(DIF,9);
DRAWTEXT(REF(CROSS(DEA,DIF),1) AND CROSS(DIF,DEA),L*0.97,' '),COLORMAGENTA;
VSR2:=(CLOSE-LLV(LOW,20))/(HHV(HIGH,20)-LLV(LOW,20))*100;
VSR3:=SMA(VSR2,4,1);
VSR4:=SMA(VSR3,2,1);
DRAWTEXT(VSR4>82 AND VSR3>89,HHV(C,30)*1.02,' '),COLORGREEN;
```

## RSI 相对强弱指标

```bash
获利%:WINNER(CLOSE)*100,NODRAW,COLORRED;
LC:=REF(CLOSE,1);
RSI1:SMA(MAX(CLOSE-LC,0),N1,1)/SMA(ABS(CLOSE-LC),N1,1)*100,LINETHICK2,COLORCYAN;
RSI2:SMA(MAX(CLOSE-LC,0),N2,1)/SMA(ABS(CLOSE-LC),N2,1)*100;
RSI3:SMA(MAX(CLOSE-LC,0),N3,1)/SMA(ABS(CLOSE-LC),N3,1)*100;
20,COLORFF9900,LINETHICK2;
80,COLORFF9900,LINETHICK2;
换手率:VOL/CAPITAL*100,NODRAW,COLORYELLOW;
周换手率:SUM (VOL/CAPITAL,5)*100,NODRAW,COLORWHITE;
月换手率:SUM (VOL/CAPITAL,20)*100,NODRAW,COLORGREEN;
半年换手率:SUM (VOL/CAPITAL,120)*100,NODRAW,COLORMAGENTA;
R6:(SMA(MAX(CLOSE-LC,0),6,1)/SMA(ABS(CLOSE-LC),6,1)*100),COLORRED,LINETHICK2;
IF( R6>75 AND R6<100,R6,DRAWNULL),COLORYELLOW,LINETHICK3;
IF( R6>0 AND R6<20,R6,DRAWNULL),COLORYELLOW,LINETHICK3;
```

## 七重擒龙功

```bash
DIF:=EMA(C,8)-EMA(C,13);
DEA:=EMA(DIF,5);
CEO1:=DIF>DEA;
RSV:=(C-LLV(LOW,8))/(HHV(H,8)-LLV(LOW,8))*100;
K:=SMA(RSV,3,1);
D:=SMA(K,3,1);
CEO2:=K>D;
RSI1:=(SMA(MAX(C-REF(C,1),0),13,1))/(SMA(ABS(C-REF(C,1)),13,1))*100;
CEO3:=RSV>RSI1;
WR1:=-(HHV(H,13)-C)/(HHV(H,13)-LLV(LOW,13))*100;
KWR1:=SMA(WR1,3,1);
DWR1:=SMA(KWR1,3,1);
CEO4:=KWR1>DWR1;
BBI:=(MA(C,3)+MA(C,6)+MA(C,12)+MA(C,24))/4;
CEO5:=C>BBI;
VAR1:=C-REF(C,1);
VAR2:=100*EMA(EMA(VAR1,5),3)/EMA(EMA(ABS(VAR1),5),3);
VAR3:=100*EMA(EMA(VAR1,13),8)/EMA(EMA(ABS(VAR1),13),8);
CEO6:=VAR2>VAR3;
VB1:=(C*2+H+L)/4;
VB2:=EMA(VB1,13)-EMA(VB1,34);
VB3:=EMA(VB2,5);
VB4:=(-2*(VB2-VB3))*3.8;
VB5:=(2*(VB2-VB3))*3.8;
VCR1:=(2*C+H+LOW)/4;
VCR2:=LLV(LOW,34);
VCR3:=HHV(H,34);
VCR4:=EMA((VCR1-VCR2)/(VCR3-VCR2)*100,13);
VCR5:=EMA(0.667*REF(VCR4,1)+0.333*VCR4,2);
CEO7:=VB5>VB4 AND VCR4>VCR5;
ZF:=C/REF(C,1)<1.06;
HSL:=V/CAPITAL*100>=10;
CEOA:=CEO1 AND CEO2 AND CEO3 AND CEO4  AND CEO5 AND CEO6 AND CEO7 AND ZF AND HSL;
CEOB:=HHV(C,20)/REF(LLV(L,20),1)<=1.2;
CEOC:=BARSLASTCOUNT(CEOA)=1 AND CEOB;
CEO:=FILTER(CEOC,10);
STICKLINE(CEO,1,2,5,0),COLORRED;
STICKLINE(CEO,2,3,2,0),COLORYELLOW;
DRAWTEXT(CEO,2,' ★擒龙'),COLORFF00FF;
```
