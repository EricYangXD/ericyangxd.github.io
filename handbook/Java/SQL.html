<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL | 木易的OT</title>
    <meta name="generator" content="VuePress 1.9.10">
    <script>
        (function() {
          if (location.href.indexOf('github.io') > -1 || location.href.indexOf('gitee.io') > -1) {
             location.href = 'https://ericyangxd.top'
           }
        })();
        </script><script type='application/ld+json'>
          {
            "@context": "https://schema.org",
            "@type": "Article",
            "headline": "MySQL",
            "url": "https://ericyangxd.top/handbook/Java/SQL.html",
            "image": [
              "https://ericyangxd.top/logo.png"
              ],
            "datePublished": "2022-12-12T00:00:00.000Z",
            "dateModified": "2023-07-18T00:00:00.000Z",
            "author": [{
                "@type": "Person",
                "name": "EricYangXD",
                "url": "https://github.com/EricYangXD/ericyangxd.github.io"
            }]
          }
      </script>
    <meta name="description" content="前端面试,React,Vue,JavaScript,CSS,HTML,HTTP,HTTPS,websocket,UDP,TCP,Webpack,算法,数据结构,LeetCode,小程序,油猴,计算机网络,NodeJs,Vite,Antdesign,EricYangXD,Eric,Chrome,Android,V8,Mac,git,网络安全,开发技巧,路由,router,诗歌,金句,源码,面试,Docker,Shell,clash,Windows">
    <meta name="keywords" content="MySQL">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
    <link rel="preload" href="/assets/css/0.styles.82c89da6.css" as="style"><link rel="preload" href="/assets/js/app.a7850cbf.js" as="script"><link rel="preload" href="/assets/js/4.e4331d91.js" as="script"><link rel="preload" href="/assets/js/3.561be8e5.js" as="script"><link rel="preload" href="/assets/js/2.b25d4684.js" as="script"><link rel="preload" href="/assets/js/1.c7cb60d4.js" as="script"><link rel="preload" href="/assets/js/63.e0236199.js" as="script"><link rel="prefetch" href="/assets/js/10.26f8cbb6.js"><link rel="prefetch" href="/assets/js/100.40a25ce4.js"><link rel="prefetch" href="/assets/js/101.0232c0a3.js"><link rel="prefetch" href="/assets/js/102.e2249fe9.js"><link rel="prefetch" href="/assets/js/103.cdcddc52.js"><link rel="prefetch" href="/assets/js/104.96289098.js"><link rel="prefetch" href="/assets/js/105.0769561d.js"><link rel="prefetch" href="/assets/js/106.553d3650.js"><link rel="prefetch" href="/assets/js/107.ec103268.js"><link rel="prefetch" href="/assets/js/108.de4e863e.js"><link rel="prefetch" href="/assets/js/109.71f09044.js"><link rel="prefetch" href="/assets/js/11.ec88ce3f.js"><link rel="prefetch" href="/assets/js/110.efe683b8.js"><link rel="prefetch" href="/assets/js/111.5901eb1d.js"><link rel="prefetch" href="/assets/js/112.b7a75c6a.js"><link rel="prefetch" href="/assets/js/113.997d3905.js"><link rel="prefetch" href="/assets/js/114.698e900b.js"><link rel="prefetch" href="/assets/js/115.2f2dd01d.js"><link rel="prefetch" href="/assets/js/116.f670923e.js"><link rel="prefetch" href="/assets/js/117.19090005.js"><link rel="prefetch" href="/assets/js/118.f1a2f9c1.js"><link rel="prefetch" href="/assets/js/119.2dc8cee9.js"><link rel="prefetch" href="/assets/js/120.a08cd117.js"><link rel="prefetch" href="/assets/js/121.587d95a3.js"><link rel="prefetch" href="/assets/js/122.675327d5.js"><link rel="prefetch" href="/assets/js/123.10a33a10.js"><link rel="prefetch" href="/assets/js/124.347593f8.js"><link rel="prefetch" href="/assets/js/125.77e55acf.js"><link rel="prefetch" href="/assets/js/126.a71cae68.js"><link rel="prefetch" href="/assets/js/127.0f16a3b6.js"><link rel="prefetch" href="/assets/js/128.94f0760f.js"><link rel="prefetch" href="/assets/js/129.45c5b7f6.js"><link rel="prefetch" href="/assets/js/130.122ef202.js"><link rel="prefetch" href="/assets/js/131.80b7f984.js"><link rel="prefetch" href="/assets/js/132.9e8acf7e.js"><link rel="prefetch" href="/assets/js/133.916c88c1.js"><link rel="prefetch" href="/assets/js/134.374b67a6.js"><link rel="prefetch" href="/assets/js/135.4a7370dd.js"><link rel="prefetch" href="/assets/js/136.98439f0b.js"><link rel="prefetch" href="/assets/js/137.c101b8ca.js"><link rel="prefetch" href="/assets/js/138.786b1940.js"><link rel="prefetch" href="/assets/js/14.1eaccd79.js"><link rel="prefetch" href="/assets/js/15.b8e5af0a.js"><link rel="prefetch" href="/assets/js/16.ed296b89.js"><link rel="prefetch" href="/assets/js/17.d9e3ba74.js"><link rel="prefetch" href="/assets/js/18.8ddab221.js"><link rel="prefetch" href="/assets/js/19.57a74dfb.js"><link rel="prefetch" href="/assets/js/20.e3da0919.js"><link rel="prefetch" href="/assets/js/21.546b406c.js"><link rel="prefetch" href="/assets/js/22.9450f156.js"><link rel="prefetch" href="/assets/js/23.c854b682.js"><link rel="prefetch" href="/assets/js/24.877c6c49.js"><link rel="prefetch" href="/assets/js/25.1110b637.js"><link rel="prefetch" href="/assets/js/26.3f26d858.js"><link rel="prefetch" href="/assets/js/27.533548d8.js"><link rel="prefetch" href="/assets/js/28.98a340e2.js"><link rel="prefetch" href="/assets/js/29.edf59bdf.js"><link rel="prefetch" href="/assets/js/30.b7cf2b52.js"><link rel="prefetch" href="/assets/js/31.1fe66269.js"><link rel="prefetch" href="/assets/js/32.e46a6d14.js"><link rel="prefetch" href="/assets/js/33.db6ae149.js"><link rel="prefetch" href="/assets/js/34.66c83798.js"><link rel="prefetch" href="/assets/js/35.1f8028c0.js"><link rel="prefetch" href="/assets/js/36.86d9fc47.js"><link rel="prefetch" href="/assets/js/37.c2037205.js"><link rel="prefetch" href="/assets/js/38.334016b8.js"><link rel="prefetch" href="/assets/js/39.a4f75b3a.js"><link rel="prefetch" href="/assets/js/40.89908c21.js"><link rel="prefetch" href="/assets/js/41.ce035ba3.js"><link rel="prefetch" href="/assets/js/42.58e624dd.js"><link rel="prefetch" href="/assets/js/43.e8ab1b54.js"><link rel="prefetch" href="/assets/js/44.cec8de12.js"><link rel="prefetch" href="/assets/js/45.7a018898.js"><link rel="prefetch" href="/assets/js/46.49efbfee.js"><link rel="prefetch" href="/assets/js/47.667b3ec5.js"><link rel="prefetch" href="/assets/js/48.97f60782.js"><link rel="prefetch" href="/assets/js/49.9a481669.js"><link rel="prefetch" href="/assets/js/5.41516153.js"><link rel="prefetch" href="/assets/js/50.fae5f1f4.js"><link rel="prefetch" href="/assets/js/51.94b8c696.js"><link rel="prefetch" href="/assets/js/52.db0b001f.js"><link rel="prefetch" href="/assets/js/53.541aebdd.js"><link rel="prefetch" href="/assets/js/54.effc1fca.js"><link rel="prefetch" href="/assets/js/55.9e304a54.js"><link rel="prefetch" href="/assets/js/56.9302d3b0.js"><link rel="prefetch" href="/assets/js/57.01928775.js"><link rel="prefetch" href="/assets/js/58.7e0e7784.js"><link rel="prefetch" href="/assets/js/59.19840d12.js"><link rel="prefetch" href="/assets/js/6.dca3a5c8.js"><link rel="prefetch" href="/assets/js/60.2e24673d.js"><link rel="prefetch" href="/assets/js/61.2c476e7e.js"><link rel="prefetch" href="/assets/js/62.a341c013.js"><link rel="prefetch" href="/assets/js/64.ce3df64d.js"><link rel="prefetch" href="/assets/js/65.b132110b.js"><link rel="prefetch" href="/assets/js/66.78bfc66a.js"><link rel="prefetch" href="/assets/js/67.4fa00716.js"><link rel="prefetch" href="/assets/js/68.f154d735.js"><link rel="prefetch" href="/assets/js/69.96b22915.js"><link rel="prefetch" href="/assets/js/7.8f6e299c.js"><link rel="prefetch" href="/assets/js/70.22777af1.js"><link rel="prefetch" href="/assets/js/71.ab90c4ef.js"><link rel="prefetch" href="/assets/js/72.c9b9ff1d.js"><link rel="prefetch" href="/assets/js/73.2a639633.js"><link rel="prefetch" href="/assets/js/74.cb9f2349.js"><link rel="prefetch" href="/assets/js/75.54f58dbd.js"><link rel="prefetch" href="/assets/js/76.fb5e3abd.js"><link rel="prefetch" href="/assets/js/77.d89d244d.js"><link rel="prefetch" href="/assets/js/78.3de85c6b.js"><link rel="prefetch" href="/assets/js/79.0a46cb18.js"><link rel="prefetch" href="/assets/js/8.41d4a20d.js"><link rel="prefetch" href="/assets/js/80.4ce368d7.js"><link rel="prefetch" href="/assets/js/81.dedde27d.js"><link rel="prefetch" href="/assets/js/82.f886b29f.js"><link rel="prefetch" href="/assets/js/83.7d8007c6.js"><link rel="prefetch" href="/assets/js/84.13c236ab.js"><link rel="prefetch" href="/assets/js/85.11f57122.js"><link rel="prefetch" href="/assets/js/86.69015e58.js"><link rel="prefetch" href="/assets/js/87.c42ab44a.js"><link rel="prefetch" href="/assets/js/88.4fdbaee9.js"><link rel="prefetch" href="/assets/js/89.721f2a12.js"><link rel="prefetch" href="/assets/js/9.492c22f0.js"><link rel="prefetch" href="/assets/js/90.c7a8cb7c.js"><link rel="prefetch" href="/assets/js/91.67fe3352.js"><link rel="prefetch" href="/assets/js/92.eb27e96b.js"><link rel="prefetch" href="/assets/js/93.7d127785.js"><link rel="prefetch" href="/assets/js/94.da70a9db.js"><link rel="prefetch" href="/assets/js/95.2096bc57.js"><link rel="prefetch" href="/assets/js/96.f47a8eeb.js"><link rel="prefetch" href="/assets/js/97.b7bfbef6.js"><link rel="prefetch" href="/assets/js/98.041ba4da.js"><link rel="prefetch" href="/assets/js/99.d058f81a.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.bd007aa5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.82c89da6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-130b300a><div data-v-130b300a><div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-130b300a data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>木易的OT</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>前端面试,React,Vue,JavaScript,CSS,HTML,HTTP,HTTPS,websocket,UDP,TCP,Webpack,算法,数据结构,LeetCode,小程序,油猴,计算机网络,NodeJs,Vite,Antdesign,EricYangXD,Eric,Chrome,Android,V8,Mac,git,网络安全,开发技巧,路由,router,诗歌,金句,源码,面试,Docker,Shell,clash,Windows</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>EricYangXD</span>
            
          <!---->
          2024
        </a></span></div></div> <div class="hide" data-v-130b300a><header class="navbar" data-v-130b300a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">木易的OT</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      木易的OT
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/EricYangXD" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/2295436007445021" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-130b300a></div> <aside class="sidebar" data-v-130b300a><div class="personal-info-wrapper" data-v-39576ba9 data-v-130b300a><!----> <h3 class="name" data-v-39576ba9>
    EricYangXD
  </h3> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>100</h3> <h6 data-v-39576ba9>文章</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>0</h3> <h6 data-v-39576ba9>标签</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      木易的OT
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/EricYangXD" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/2295436007445021" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/" class="sidebar-heading clickable router-link-active"><span>About</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Android</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>LeetCode</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>AntDesign</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>小程序</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>开发技巧</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Angular</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Backend（Java Based）</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/handbook/Java/Learn.html" class="sidebar-link">Learn Java</a></li><li><a href="/handbook/Java/Work.html" class="sidebar-link">Java Work</a></li><li><a href="/handbook/Java/Maven.html" class="sidebar-link">Maven</a></li><li><a href="/handbook/Java/Spring.html" class="sidebar-link">Spring</a></li><li><a href="/handbook/Java/SQL.html" aria-current="page" class="active sidebar-link">MySQL笔记</a></li><li><a href="/handbook/Java/Groovy.html" class="sidebar-link">Groovy笔记</a></li><li><a href="/handbook/Java/Scala.html" class="sidebar-link">Scala笔记</a></li><li><a href="/handbook/Java/Library.html" class="sidebar-link">第三方库</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>油猴</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Nodejs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vite</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Web安全</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Google Chrome V8</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Mac使用记录</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>文章诗句</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Office软件</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>股海浮沉</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>打工人须知</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>MySQL</h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>EricYangXD</span>
            
          <!---->
          2024
        </a></span></div></div> <div data-v-130b300a><main class="page"><section><div class="page-title"><h1 class="title">MySQL</h1> <div data-v-f875f3fc><i class="iconfont reco-account" data-v-f875f3fc><span data-v-f875f3fc>EricYangXD</span></i> <i class="iconfont reco-date" data-v-f875f3fc><span data-v-f875f3fc>2022/12/12</span></i> <i class="iconfont reco-eye" data-v-f875f3fc><span id="/handbook/Java/SQL.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-f875f3fc><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <!----></div></div> <div class="theme-reco-content content__default"><h2 id="mysql"><a href="#mysql" class="header-anchor">#</a> MySQL</h2> <h3 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h3> <h4 id="centos7"><a href="#centos7" class="header-anchor">#</a> Centos7</h4> <p>在 CentOS 中默认安装有 MariaDB，这个是 MySQL 的分支，但为了需要，还是要在系统中安装 MySQL，而且安装完成之后可以直接覆盖掉 MariaDB。</p> <ol><li><p>下载并安装 MySQL 官方的 Yum Repository</p> <ul><li><code>wget -i -c http://dev.mysql.com/get/mysql57-community-release-el7-10.noarch.rpm</code></li> <li>直接 yum 安装: <code>yum -y install mysql57-community-release-el7-10.noarch.rpm</code></li> <li>安装 MySQL 服务器: <code>yum -y install mysql-community-server</code></li> <li>如果报错，可能是因为安装包签名问题，运行:<code>rpm --import https://repo.mysql.com/RPM-GPG-KEY-mysql-2022</code></li></ul></li> <li><p>MySQL 数据库设置</p> <ul><li>启动 MySQL: <code>systemctl start mysqld.service</code></li> <li>查看 MySQL 运行状态: <code>systemctl status mysqld.service</code></li> <li>要想进入 MySQL 还得先找出此时 root 用户的密码: <code>grep &quot;password&quot; /var/log/mysqld.log</code></li> <li>进入数据库: <code>mysql -uroot -p</code></li> <li>输入初始密码,MySQL 默认必须修改密码之后才能操作数据库: <code>ALTER USER 'root'@'localhost' IDENTIFIED BY 'new password';</code>,密码设置必须要大小写字母数字和特殊符号（<code>,/';:</code>等）,不然不能配置成功.</li></ul></li> <li><p>开启 MySQL 的远程访问</p> <ul><li>开启远程访问限制（注意：下面命令开启的 IP 是 192.168.0.1，如要开启所有的，用%代替 IP）:<code>grant all privileges on *.* to 'root'@'192.168.0.1' identified by 'password' with grant option;</code></li> <li>再输入下面两行命令:<code>flush privileges;</code>,<code>exit</code></li></ul></li> <li><p>为 firewalld 添加开放端口</p> <ul><li>添加 mysql 端口 3306 和 Tomcat 端口 8080:<code>firewall-cmd --zone=public --add-port=3306/tcp --permanent</code></li> <li>添加 mysql 端口 3306 和 Tomcat 端口 8080:<code>firewall-cmd --zone=public --add-port=8080/tcp --permanent</code></li> <li>重新载入:<code>firewall-cmd --reload</code></li></ul></li> <li><p>更改 mysql 的语言</p> <ul><li>首先重新登录 mysql，然后输入<code>status</code>:可以看到，&quot;Server/Db characterset&quot;不是 utf-8，先退出 mysql，然后再到、etc 目录下的 my.cnf 文件下修改一下文件内容: <code>vi /etc/my.cnf</code>，新增四行代码：</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>  <span class="token punctuation">[</span>client<span class="token punctuation">]</span>
  default-character-set<span class="token operator">=</span>utf8
  character-set-server<span class="token operator">=</span>utf8
  collation-server<span class="token operator">=</span>utf8_general_cli
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>保存更改后的 my.cnf 文件后，重启下 mysql，然后输入 status 再次查看，&quot;Server/Db characterset&quot;已经是 utf-8。</li></ul></li> <li><p>命令行启动：<code>mysql -h 192.168.0.124 -P 3306 -u root -p</code>，输入密码即可登录。</p></li></ol> <h3 id="demos"><a href="#demos" class="header-anchor">#</a> Demos</h3> <p><a href="../../../demos/mysql/mysql.sql">示例</a></p> <h3 id="基础"><a href="#基础" class="header-anchor">#</a> 基础</h3> <blockquote><p>MySQL 的数据都是保存在磁盘的，那具体是保存在哪个文件呢？MySQL 存储的行为是由存储引擎实现的，MySQL 支持多种存储引擎，不同的存储引擎保存的文件自然也不同。InnoDB 是我们常用的存储引擎，也是 MySQL 默认的存储引擎。</p></blockquote> <p>比如，有一个名为 my_test 的 database，该 database 里有一张名为 t_order 数据库表。进入 <code>/var/lib/mysql/my_test</code>(我的是<code>/usr/local/mysql-8.0.29-macos12-x86_64/lib</code>) 目录，看看里面有什么文件？<code>ls /var/lib/mysql/my_test</code>，可以看到，共有三个文件，这三个文件分别代表着：</p> <ul><li>db.opt，用来存储当前数据库的默认字符集和字符校验规则。</li> <li>t_order.frm，t_order 的表结构会保存在这个文件。在 MySQL 中建立一张表都会生成一个.frm 文件，该文件是用来保存每个表的元数据信息的，主要包含表结构定义。</li> <li>t_order.ibd，t_order 的表数据会保存在这个文件。表数据既可以存在共享表空间文件（文件名：ibdata1）里，也可以存放在独占表空间文件（文件名：表名字.ibd，也称为独占表空间文件）。这个行为是由参数 innodb_file_per_table 控制的，若设置了参数 innodb_file_per_table 为 1，则会将存储的数据、索引等信息单独存储在一个独占表空间，从 MySQL 5.6.6 版本开始，它的默认值就是 1 了，因此从这个版本之后， MySQL 中每一张表的数据都存放在一个独立的 .idb 文件。</li></ul> <blockquote><p>表空间文件的结构：</p></blockquote> <p>表空间由段（segment）、区（extent）、页（page）、行（row）组成</p> <ul><li><p>行（row）:数据库表中的记录都是按行（row）进行存放的，每行记录根据不同的行格式，有不同的存储结构。</p></li> <li><p>页（page）:记录是按照行来存储的，但是数据库的读取并不以「行」为单位，否则一次读取（也就是一次 I/O 操作）只能处理一行数据，效率会非常低。因此，InnoDB 的数据是按「页」为单位来读写的，也就是说，当需要读一条记录的时候，并不是将这个行记录从磁盘读出来，而是以页为单位，将其整体读入内存。默认每个页的大小为 16KB，也就是最多能保证 16KB 的连续存储空间。页是 InnoDB 存储引擎磁盘管理的最小单元，意味着数据库每次读写都是以 16KB 为单位的，一次最少从磁盘中读取 16K 的内容到内存中，一次最少把内存中的 16K 内容刷新到磁盘中。页的类型有很多，常见的有数据页、undo 日志页、溢出页等等。数据表中的行记录是用「数据页」来管理的，即表中的记录存储在「数据页」里面。</p></li> <li><p>区（extent）: InnoDB 存储引擎是用 B+ 树来组织数据的。B+ 树中每一层都是通过双向链表连接起来的，如果是以页为单位来分配存储空间，那么链表中相邻的两个页之间的物理位置并不是连续的，可能离得非常远，那么磁盘查询时就会有大量的随机 I/O，随机 I/O 是非常慢的。解决这个问题也很简单，就是让链表中相邻的页的物理位置也相邻，这样就可以使用顺序 I/O 了，那么在范围查询（扫描叶子节点）的时候性能就会很高。具体怎么解决:在表中数据量大的时候，为某个索引分配空间的时候就不再按照页为单位分配了，而是按照区（extent）为单位分配。每个区的大小为 1MB，对于 16KB 的页来说，连续的 64 个页会被划为一个区，这样就使得链表中相邻的页的物理位置也相邻，就能使用顺序 I/O 了。</p></li> <li><p>段（segment）:表空间是由各个段（segment）组成的，段是由多个区（extent）组成的。段一般分为数据段、索引段和回滚段等。</p> <ol><li>索引段：存放 B + 树的非叶子节点的区的集合；</li> <li>数据段：存放 B + 树的叶子节点的区的集合；</li> <li>回滚段：存放的是回滚数据的区的集合，之前讲事务隔离的时候就介绍到了 MVCC 利用了回滚段实现了多版本查询数据。</li></ol></li></ul> <blockquote><p>InnoDB 行格式有哪些？</p></blockquote> <ul><li>Redundant：Redundant 是很古老的行格式了， MySQL 5.0 版本之前用的行格式，现在基本没人用了。不是一种紧凑的行格式。</li> <li>Compact：Compact 是一种紧凑的行格式，设计的初衷就是为了让一个数据页中可以存放更多的行记录，从 MySQL 5.1 版本之后，行格式默认设置成 Compact。</li> <li>Dynamic/Compressed：Dynamic 和 Compressed 两个都是紧凑的行格式，它们的行格式都和 Compact 差不多，因为都是基于 Compact 改进一点东西。从 MySQL5.7 版本之后，默认使用 Dynamic 行格式。</li></ul> <blockquote><p>COMPACT 行格式长什么样？</p></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/0f97ab9af2370bcf50758a29c59fb682.png" alt="Compact 行格式"></p> <p>可以看到，一条完整的记录分为「记录的额外信息」和「记录的真实数据」两个部分。</p> <ul><li>记录的额外信息包含 3 个部分：变长字段长度列表、NULL 值列表、记录头信息。</li></ul> <ol><li>变长字段长度列表</li></ol> <ul><li><code>varchar(n)</code> 和 <code>char(n)</code> 的区别是: char 是定长的，varchar 是变长的，变长字段实际存储的数据的长度（大小）不固定的。所以，在存储数据的时候要把这些数据占用的字节数也存起来，存到「变长字段长度列表」里面，读取数据的时候才能根据这个「变长字段长度列表」去读取对应长度的数据。其他 TEXT、BLOB 等变长字段也是这么实现的。</li> <li>变长字段的长度值会按照列的顺序<strong>逆序存放</strong>。</li> <li><strong>NULL 是不会存放在行格式中记录的真实数据部分里的</strong>，所以「变长字段长度列表」里不需要保存值为 NULL 的变长字段的长度。</li></ul> <blockquote><p>为什么「变长字段长度列表」的信息要按照逆序存放</p></blockquote> <p>主要是因为「记录头信息」中指向下一个记录的指针，指向的是下一条记录的「记录头信息」和「真实数据」之间的位置，这样的好处是向左读就是记录头信息，向右读就是真实数据，比较方便。</p> <p>「变长字段长度列表」中的信息之所以要逆序存放，是因为这样可以使得位置靠前的记录的真实数据和数据对应的字段长度信息可以同时在一个 CPU Cache Line 中，这样就可以<strong>提高 CPU Cache 的命中率</strong>。</p> <p>同样的道理， NULL 值列表的信息也需要逆序存放。</p> <blockquote><p>每个数据库表的行格式都有「变长字段字节数列表」吗？</p></blockquote> <p>当数据表没有变长字段的时候，比如全部都是 int 类型的字段，这时候表里的行格式就不会有「变长字段长度列表」了，因为没必要，不如去掉以节省空间。</p> <p>所以「变长字段长度列表」只出现在数据表有变长字段的时候。</p> <ol start="2"><li>NULL 值列表:</li></ol> <p>表中的某些列可能会存储 NULL 值，如果把这些 NULL 值都放到记录的真实数据中会比较浪费空间，所以 Compact 行格式把这些值为 NULL 的列存储到 NULL 值列表中。</p> <p>如果存在允许 NULL 值的列，则每个列对应一个二进制位（bit），二进制位按照列的顺序逆序排列。</p> <ul><li>二进制位的值为 1 时，代表该列的值为 NULL。</li> <li>二进制位的值为 0 时，代表该列的值不为 NULL。</li></ul> <p>另外，NULL 值列表必须用整数个字节的位表示（1 字节 8 位），如果使用的二进制位个数不足整数个字节，则在字节的高位补 0。NULL 值列表也不是必须的。</p> <p>当数据表的字段都定义成 NOT NULL 的时候，这时候表里的行格式就不会有 NULL 值列表了。所以在设计数据库表的时候，通常都是建议将字段设置为 NOT NULL，这样可以节省 1 字节的空间（NULL 值列表占用 1 字节空间）。</p> <ol start="3"><li>记录头信息</li></ol> <p>记录头信息中包含的内容很多，这里说几个比较重要的：</p> <ul><li>delete_mask ：标识此条数据是否被删除。从这里可以知道，我们执行 detele 删除记录的时候，并不会真正的删除记录，只是将这个记录的 delete_mask 标记为 1。</li> <li>next_record：下一条记录的位置。从这里可以知道，记录与记录之间是通过链表组织的。在前面我也提到了，指向的是下一条记录的「记录头信息」和「真实数据」之间的位置，这样的好处是向左读就是记录头信息，向右读就是真实数据，比较方便。</li> <li>record_type：表示当前记录的类型，0 表示普通记录，1 表示 B+树非叶子节点记录，2 表示最小记录，3 表示最大记录</li></ul> <blockquote><p>记录的真实数据</p></blockquote> <p>记录真实数据部分除了我们定义的字段，还有三个隐藏字段，分别为：row_id、trx_id、roll_pointer。</p> <ul><li>row_id</li></ul> <p>如果我们建表的时候指定了主键或者唯一约束列，那么就没有 row_id 隐藏字段了。如果既没有指定主键，又没有唯一约束，那么 InnoDB 就会为记录添加 row_id 隐藏字段。row_id 不是必需的，占用 6 个字节。</p> <ul><li>trx_id</li></ul> <p>事务 id，表示这个数据是由哪个事务生成的。trx_id 是必需的，占用 6 个字节。</p> <ul><li>roll_pointer</li></ul> <p>这条记录上一个版本的指针。roll_pointer 是必需的，占用 7 个字</p> <p>我们存储字段类型为 varchar(n) 的数据时，其实分成了三个部分来存储：</p> <ul><li>真实数据</li> <li>真实数据占用的字节数</li> <li>NULL 标识，如果不允许为 NULL，这部分不需要</li></ul> <p>如果有多个字段的话，要保证所有字段的长度 + 变长字段字节数列表所占用的字节数 + NULL 值列表所占用的字节数 &lt;= 65535。</p> <h3 id="面试题记录"><a href="#面试题记录" class="header-anchor">#</a> 面试题记录</h3> <h4 id="mysql-的-null-值是怎么存放的"><a href="#mysql-的-null-值是怎么存放的" class="header-anchor">#</a> MySQL 的 NULL 值是怎么存放的？</h4> <p>MySQL 的 Compact 行格式中会用「NULL 值列表」来标记值为 NULL 的列，NULL 值并不会存储在行格式中的真实数据部分。</p> <p>NULL 值列表会占用 1 字节空间，当表中所有字段都定义成 NOT NULL，行格式中就不会有 NULL 值列表，这样可节省 1 字节的空间。</p> <h4 id="mysql-怎么知道-varchar-n-实际占用数据的大小"><a href="#mysql-怎么知道-varchar-n-实际占用数据的大小" class="header-anchor">#</a> MySQL 怎么知道 varchar(n) 实际占用数据的大小？</h4> <p>MySQL 的 Compact 行格式中会用「变长字段长度列表」存储变长字段实际占用的数据大小。</p> <h4 id="varchar-n-中-n-最大取值为多少"><a href="#varchar-n-中-n-最大取值为多少" class="header-anchor">#</a> varchar(n) 中 n 最大取值为多少？</h4> <p>varchar(n) 字段类型的 n 代表的是最多存储的字符数量，那 n 最大能设置多少要考虑两个因素：</p> <ul><li>行格式中「变长字段长度列表」最大能表示多少字节？知道了这个才能知道，一行数据最大能存储多少字节的数据。</li> <li>数据库表的字符集，确定了这个，才能知道 1 个字符占用多少字节。</li></ul> <p>一行记录最大能存储 65535 字节的数据，但是这个是包含「变长字段字节数列表所占用的字节数」和「NULL 值列表所占用的字节数」。</p> <p>如果一张表只有一个 varchar(n) 字段，且允许为 NULL，字符集为 ascii。varchar(n) 中 n 最大取值为 65532。</p> <ul><li>「变长字段长度列表」占用的字节数最大不会超过 2 字节。行格式中「变长字段长度列表」有时候是占用 1 字节，有时候是占用 2 字节。</li></ul> <p>计算公式：65535 - 变长字段字节数列表所占用的字节数 - NULL 值列表所占用的字节数 = 65535 - 2 - 1 = 65532</p> <h4 id="行溢出后-mysql-是怎么处理的"><a href="#行溢出后-mysql-是怎么处理的" class="header-anchor">#</a> 行溢出后，MySQL 是怎么处理的？</h4> <p>如果一个数据页存不了一条记录，InnoDB 存储引擎会自动将溢出的数据存放到「溢出页」中。</p> <p>Compact 行格式针对行溢出的处理是这样的：当发生行溢出时，在记录的真实数据处只会保存该列的一部分数据，而把剩余的数据放在「溢出页」中，然后真实数据处用 20 字节存储指向溢出页的地址，从而可以找到剩余数据所在的页。</p> <p>Compressed 和 Dynamic 这两种格式采用完全的行溢出方式，记录的真实数据处不会存储该列的一部分数据，只存储 20 个字节的指针来指向溢出页。而实际的数据都存储在溢出页中。</p> <h4 id="mvcc-机制"><a href="#mvcc-机制" class="header-anchor">#</a> MVCC 机制</h4> <h2 id="入门知识"><a href="#入门知识" class="header-anchor">#</a> 入门知识</h2> <h3 id="服务管理"><a href="#服务管理" class="header-anchor">#</a> 服务管理</h3> <ol><li>查看 mysql 服务进程：<code>ps -ef | grep mysql</code></li> <li>service 服务管理：<code>cp -a mysql.server /etc/rc.d/init.d/mysql</code></li> <li>启动命令：<code>service mysql start</code></li> <li>关闭命令：<code>service mysql stop</code></li> <li>重新启动命令：<code>service mysql restart</code></li> <li>查看状态命令：<code>service mysql status</code></li> <li>登录管理： <code>ln -s /usr/local/mysql/bin/* /bin</code></li> <li>登录命令：<code>mysql -uroot -p</code></li> <li>默认端口号：<code>3306</code></li> <li>配置文件：<code>/etc/my.cnf</code></li> <li>登录命令：<code>mysql -u用户 -p密码</code></li> <li>退出命令：<code>exit; quit;</code></li></ol> <h3 id="库表深入解析"><a href="#库表深入解析" class="header-anchor">#</a> 库表深入解析</h3> <ol><li>什么是库？顾名思义就是数据仓库的意思，存储着一定数据结构的数据，一个数据库中可能包含着若干个表，我们可以
通过数据库提供的多种方法来管理数据库里边的数据。本质上 mysql 数据库是一个关系型数据服务管理系统</li> <li>什么是表？我们所说的表就是数据表，每一张表是由行和列组成，每记录一条数据，数据表就增加一行。列是由字段名
与字段数据属性组成，我们称之列为字段，每一个字段有着多个属性。例如是否允许为空、长度、类型等等</li> <li>数据库：database</li> <li>数据表：table</li> <li>字段（列）：column</li> <li>行：row</li></ol> <h2 id="sql-各类语句精讲"><a href="#sql-各类语句精讲" class="header-anchor">#</a> sql 各类语句精讲</h2> <p>操作语句分为四类：</p> <ol><li>DDL 数据定义语言 (Data Definition Language)用来定义数据库对象 例如：建库，建表</li> <li>DML 数据操纵语言(Data Manipulation Language) 例如：对表中的数据进行增删改操作</li> <li>DQL 数据查询语言(Data Query Language) 例如：对数据进行查询</li> <li>DCL 数据控制语言(Data Control Language) 例如：创建数据库用户，对用户的权限进行设置</li></ol> <h3 id="ddl-数据定义语言"><a href="#ddl-数据定义语言" class="header-anchor">#</a> DDL 数据定义语言</h3> <h4 id="创建、查看以及使用-切换"><a href="#创建、查看以及使用-切换" class="header-anchor">#</a> 创建、查看以及使用/切换</h4> <ol><li>直接创建数据库 db1: <code>create database db1;</code></li> <li>查看当前在哪个库里边: <code>select database();</code></li> <li>进入库的操作: <code>use 库名;</code></li> <li>判断是否存在，如果不存在则创建数据库 db2: <code>create database if not exists db2;</code></li> <li>创建数据库并指定字符集为 gbk: <code>create database db3 default character set gbk;</code></li> <li>查看某个库是什么字符集: <code>show create database XD;</code></li> <li>查看当前 mysql 使用的字符集: <code>show variables like 'character%';</code></li></ol> <h4 id="常用数据类型"><a href="#常用数据类型" class="header-anchor">#</a> 常用数据类型</h4> <ol><li>数据类型是指列、存储过程参数、表达式和局部变量的数据特征，它决定了数据的存储格式，代表了不同的信息类型。有一些数据是要存储为数字的，数字当中有些是要存储为整数、小数、日期型等...</li> <li>mysql 常见数据类型:</li></ol> <div class="language-text line-numbers-mode"><pre class="language-text"><code>&amp;lt;1&gt;整数型
     类型      大小      范围（有符号）               范围（无符号unsigned）    用途
     TINYINT   1 字节    (-128，127)                (0，255)                 小整数值
     SMALLINT  2 字节    (-32768，32767)            (0，65535)               大整数值
     MEDIUMINT 3 字节    (-8388608，8388607)        (0，16777215)            大整数值
     INT       4 字节    (-2147483648，2147483647)  (0，4294967295)          大整数值
     BIGINT    8 字节     （）                       (0，2的64次方减1)        极大整数值
​
&amp;lt;2&gt;浮点型
 FLOAT(m,d）  4 字节    单精度浮点型  备注：m代表总个数，d代表小数位个数
 DOUBLE(m,d） 8 字节    双精度浮点型  备注：m代表总个数，d代表小数位个数

 &amp;lt;3&gt;定点型
 DECIMAL(m,d）    依赖于M和D的值    备注：m代表总个数，d代表小数位个数

 &amp;lt;4&gt;字符串类型
 类型          大小              用途
 CHAR          0-255字节         定长字符串
 VARCHAR       0-65535字节       变长字符串
 TINYTEXT      0-255字节         短文本字符串
 TEXT          0-65535字节       长文本数据
 MEDIUMTEXT    0-16777215字节    中等长度文本数据
 LONGTEXT      0-4294967295字节  极大文本数据

 char的优缺点：存取速度比varchar更快，但是比varchar更占用空间
 varchar的优缺点：比char省空间。但是存取速度没有char快

 &amp;lt;5&gt;时间型
 数据类型    字节数            格式                    备注
 date        3                yyyy-MM-dd              存储日期值
 time        3                HH:mm:ss                存储时分秒
 year        1                yyyy                    存储年
 datetime    8                yyyy-MM-dd HH:mm:ss     存储日期+时间
 timestamp   4                yyyy-MM-dd HH:mm:ss     存储日期+时间，可作时间戳

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><ol start="3"><li>eg.</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> test_time <span class="token punctuation">(</span>
            date_value <span class="token keyword">date</span><span class="token punctuation">,</span>
            time_value <span class="token keyword">time</span><span class="token punctuation">,</span>
            year_value <span class="token keyword">year</span><span class="token punctuation">,</span>
            datetime_value <span class="token keyword">datetime</span><span class="token punctuation">,</span>
            timestamp_value <span class="token keyword">timestamp</span>
         <span class="token punctuation">)</span> <span class="token keyword">engine</span> <span class="token operator">=</span> <span class="token keyword">innodb</span> <span class="token keyword">charset</span> <span class="token operator">=</span> utf8<span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> test_time <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="创建表"><a href="#创建表" class="header-anchor">#</a> 创建表</h4> <ol><li>语法：</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> 表名 <span class="token punctuation">(</span>
                  字段名<span class="token number">1</span> 字段类型<span class="token number">1</span> 约束条件<span class="token number">1</span> 说明<span class="token number">1</span><span class="token punctuation">,</span>
                  字段名<span class="token number">2</span> 字段类型<span class="token number">2</span> 约束条件<span class="token number">2</span> 说明<span class="token number">2</span><span class="token punctuation">,</span>
                  字段名<span class="token number">3</span> 字段类型<span class="token number">3</span> 约束条件<span class="token number">3</span> 说明<span class="token number">3</span>
                  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> 新表名 <span class="token keyword">as</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 旧表名 <span class="token keyword">where</span> <span class="token number">1</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span><span class="token punctuation">(</span>注意：建议这种创建表的方式用于日常测试，因为可能索引什么的会复制不过来<span class="token punctuation">)</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> 新表名 <span class="token operator">like</span> 旧表名<span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ol start="2"><li>约束条件：</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">comment</span>         <span class="token comment">----说明解释</span>
<span class="token operator">not</span> <span class="token boolean">null</span>        <span class="token comment">----不为空</span>
<span class="token keyword">default</span>         <span class="token comment">----默认值</span>
<span class="token keyword">unsigned</span>        <span class="token comment">----无符号（即正数）</span>
<span class="token keyword">auto_increment</span>  <span class="token comment">----自增</span>
zerofill        <span class="token comment">----自动填充</span>
<span class="token keyword">unique</span> <span class="token keyword">key</span>      <span class="token comment">----唯一值</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="3"><li>创建 sql</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> student <span class="token punctuation">(</span>
                    id <span class="token keyword">tinyint</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> zerofill <span class="token keyword">auto_increment</span>  <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'学生学号'</span><span class="token punctuation">,</span>
                    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'学生姓名'</span><span class="token punctuation">,</span>
                    age  <span class="token keyword">tinyint</span>  <span class="token keyword">default</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'学生年龄'</span><span class="token punctuation">,</span>
                    class <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'学生班级'</span><span class="token punctuation">,</span>
                    sex <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'学生性别'</span><span class="token punctuation">,</span>
                    <span class="token keyword">unique</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span>
                    <span class="token punctuation">)</span><span class="token keyword">engine</span><span class="token operator">=</span><span class="token keyword">innodb</span> <span class="token keyword">charset</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span><span class="token punctuation">;</span>
​
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> student <span class="token punctuation">(</span>
                    id <span class="token keyword">tinyint</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>  <span class="token keyword">auto_increment</span>  <span class="token keyword">default</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'学生学号'</span><span class="token punctuation">,</span>
                    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'学生姓名'</span><span class="token punctuation">,</span>
                    age  <span class="token keyword">tinyint</span>  <span class="token keyword">default</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'学生年龄'</span><span class="token punctuation">,</span>
                    class <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'学生班级'</span><span class="token punctuation">,</span>
                    sex <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'学生性别'</span><span class="token punctuation">,</span>
                    <span class="token keyword">unique</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span>
                    <span class="token punctuation">)</span><span class="token keyword">engine</span><span class="token operator">=</span><span class="token keyword">innodb</span> <span class="token keyword">charset</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h4 id="查看"><a href="#查看" class="header-anchor">#</a> 查看</h4> <ul><li>查看数据库中的所有表：<code>show tables;</code></li> <li>查看表结构：<code>desc 表名;</code></li> <li>查看创建表的 sql 语句：<code>show create table 表名;</code></li> <li><code>\G</code> ：有结束 sql 语句的作用，还有把显示的数据纵向旋转 90 度</li> <li><code>\g</code> ：有结束 sql 语句的作用</li> <li>修改表名</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">--  rename table 旧表名 to 新表名;</span>
 <span class="token keyword">rename</span> <span class="token keyword">table</span> student <span class="token keyword">to</span> <span class="token keyword">user</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>添加列</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 给表添加一列：alter table 表名 add 列名 类型;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> <span class="token keyword">user</span> <span class="token keyword">add</span> addr <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
​
<span class="token keyword">alter</span> <span class="token keyword">table</span> <span class="token keyword">add</span> 列名 类型 <span class="token keyword">comment</span> <span class="token string">'说明'</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> <span class="token keyword">user</span> <span class="token keyword">add</span> famliy <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'学生父母'</span><span class="token punctuation">;</span>
​
<span class="token comment">-- 给表最前面添加一列：alter table 表名 add 列名 类型 first;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> <span class="token keyword">user</span> <span class="token keyword">add</span> job <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">first</span><span class="token punctuation">;</span>
​
<span class="token comment">-- 给表某个字段后添加一列：alter table 表名 add 列名 类型 after 字段名;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> <span class="token keyword">user</span> <span class="token keyword">add</span> servnumber <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>  <span class="token keyword">after</span> id<span class="token punctuation">;</span>
​
<span class="token comment">-- 注意：没有给表某个字段前添加一列的说法。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li>修改列类型</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- alter table 表名 modify 列名 新类型;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> <span class="token keyword">user</span> <span class="token keyword">modify</span> servnumber <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>修改列名</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- alter table 表名 change 旧列名 新列名 类型;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> <span class="token keyword">user</span> change servnumber telephone <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>删除列</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- alter table 表名 drop 列名;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> <span class="token keyword">user</span> <span class="token keyword">drop</span> famliy<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>修改字符集</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- alter table 表名 character set 字符集;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> <span class="token keyword">user</span> <span class="token keyword">character</span>  <span class="token keyword">set</span> GBK<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>mysql 表的删除</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- drop table 表名;</span>
<span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">user</span><span class="token punctuation">;</span>

<span class="token comment">-- 看表是否存在，若存在则删除表：</span>
<span class="token comment">-- drop table if exists 表名;</span>
<span class="token keyword">drop</span> <span class="token keyword">table</span>  <span class="token keyword">if</span> <span class="token keyword">exists</span> teacher<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="dml-数据操纵语言"><a href="#dml-数据操纵语言" class="header-anchor">#</a> DML 数据操纵语言</h3> <h4 id="表数据新增"><a href="#表数据新增" class="header-anchor">#</a> 表数据新增</h4> <ul><li>普通的插入表数据</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- insert into 表名（字段名） values（字段对应值）;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> employee <span class="token punctuation">(</span>empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>job<span class="token punctuation">,</span>mgr<span class="token punctuation">,</span>hiredate<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>deptnu<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'1000'</span><span class="token punctuation">,</span><span class="token string">'小明'</span><span class="token punctuation">,</span><span class="token string">'经理'</span><span class="token punctuation">,</span><span class="token string">'10001'</span><span class="token punctuation">,</span><span class="token string">'2019-03-03'</span><span class="token punctuation">,</span><span class="token string">'12345.23'</span><span class="token punctuation">,</span><span class="token string">'10'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
​
<span class="token comment">-- insert into 表名 values（所有字段对应值）;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> employee  <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'1001'</span><span class="token punctuation">,</span><span class="token string">'小明'</span><span class="token punctuation">,</span><span class="token string">'经理'</span><span class="token punctuation">,</span><span class="token string">'10001'</span><span class="token punctuation">,</span><span class="token string">'2019-03-03'</span><span class="token punctuation">,</span><span class="token string">'12345.23'</span><span class="token punctuation">,</span><span class="token string">'10'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>蠕虫复制（将一张表的数据复制到另一张表中）</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- insert into 表名1 select * from 表名2;</span>
<span class="token comment">-- insert into 表名1（字段名1，字段名2） select 字段名1，字段名2 from 表名2;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> emp <span class="token punctuation">(</span>empno<span class="token punctuation">,</span>ename<span class="token punctuation">)</span> <span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename <span class="token keyword">from</span> employee<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>建表复制</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- create table 表名1 as select 字段名1，字段名2 from 表名2;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> emp <span class="token keyword">as</span> <span class="token keyword">select</span> empno <span class="token punctuation">,</span>ename <span class="token keyword">from</span> employee<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>一次性插入多个数据</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> 表名  <span class="token punctuation">(</span>字段名<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span>对应值<span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>对应值<span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>对应值<span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>创建 sql：</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>某个公司的员工表
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> employee<span class="token punctuation">(</span>
    empno       <span class="token keyword">INT</span>  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">comment</span> <span class="token string">'雇员编号'</span><span class="token punctuation">,</span>
    ename       <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'雇员姓名'</span><span class="token punctuation">,</span>
    job         <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'雇员职位'</span><span class="token punctuation">,</span>
    mgr         <span class="token keyword">INT</span> <span class="token keyword">comment</span> <span class="token string">'雇员上级编号'</span><span class="token punctuation">,</span>
    hiredate    <span class="token keyword">DATE</span> <span class="token keyword">comment</span> <span class="token string">'雇佣日期'</span><span class="token punctuation">,</span>
    sal         <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'薪资'</span><span class="token punctuation">,</span>
    deptnu      <span class="token keyword">INT</span> <span class="token keyword">comment</span> <span class="token string">'部门编号'</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="表数据的修改以及删除"><a href="#表数据的修改以及删除" class="header-anchor">#</a> 表数据的修改以及删除</h4> <ul><li>修改（更新）：</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">update</span> 表名 <span class="token keyword">set</span> 字段名<span class="token number">1</span><span class="token operator">=</span>值<span class="token number">1</span> <span class="token keyword">where</span> 字段名<span class="token operator">=</span>值<span class="token punctuation">;</span>
<span class="token keyword">update</span> 表名 <span class="token keyword">set</span> 字段名<span class="token number">1</span><span class="token operator">=</span>值<span class="token number">1</span><span class="token punctuation">,</span>字段名<span class="token number">2</span><span class="token operator">=</span>值<span class="token number">2</span> <span class="token keyword">where</span> 字段名<span class="token operator">=</span>值<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>删除：</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">delete</span> <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> 字段名<span class="token operator">=</span>值<span class="token punctuation">;</span>
<span class="token keyword">truncate</span> <span class="token keyword">table</span> 表名<span class="token punctuation">;</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> 表名<span class="token punctuation">;</span>
<span class="token keyword">drop</span> <span class="token keyword">table</span> 表名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><p>注意事项：
面试时：面试官问在删改数据之前，你会怎么做？
答案：会对数据进行备份操作，以防万一，可以进行数据回退
​
面试时：面试官会问，delete 与 truncate 与 drop 这三种删除数据的共同点都是删除数据，他们的不同点是什么?
delele 会把删除的操作记录给记录起来，以便数据回退，不会释放空间，而且不会删除定义。
truncate 不会记录删除操作，会把表占用的空间恢复到最初，不会删除定义
drop 会删除整张表，释放表占用的空间。</p></li> <li><p>删除速度：</p></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token operator">&gt;</span> <span class="token keyword">truncate</span> <span class="token operator">&gt;</span> <span class="token keyword">delete</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="中文乱码问题"><a href="#中文乱码问题" class="header-anchor">#</a> 中文乱码问题</h4> <ul><li>查看当前 mysql 使用的字符集：<code>show variables like 'character%';</code> <ul><li>character_set_client：客户端请求数据的字符集</li> <li>character_set_connection：客户端与服务器连接的字符集</li> <li>character_set_database：数据库服务器中某个库使用的字符集设定，如果建库时没有指明，将默认使用配置上的字符集</li> <li>character_set_results：返回给客户端的字符集(从数据库读取到的数据是什么编码的)</li> <li>character_set_server：为服务器安装时指定的默认字符集设定。</li> <li>character_set_system：系统字符集(修改不了的，就是 utf8)</li> <li>character_sets_dir：mysql 字符集文件的保存路径</li></ul></li> <li>临时：<code>set names gbk;</code></li> <li>永久：修改配置文件 my.cnf 里边的</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token punctuation">[</span>client<span class="token punctuation">]</span>
<span class="token keyword">default</span><span class="token operator">-</span><span class="token keyword">character</span><span class="token operator">-</span><span class="token keyword">set</span><span class="token operator">=</span>gbk
作用于外部的显示
​
<span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>
character_set_server<span class="token operator">=</span>gbk
作用于内部，会作用于创建库表时默认字符集
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>修改库的字符集编码: <code>alter database xiaoxiao default character set gbk;</code></li> <li>修改表的字符集编码: <code>alter table employee default character set utf8;</code></li></ul> <h3 id="dql-数据查询语言"><a href="#dql-数据查询语言" class="header-anchor">#</a> DQL 数据查询语言</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">/*创建部门表*/</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> dept<span class="token punctuation">(</span>
    deptnu      <span class="token keyword">INT</span>  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">comment</span> <span class="token string">'部门编号'</span><span class="token punctuation">,</span>
    dname       <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'部门名称'</span><span class="token punctuation">,</span>
    addr        <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'部门地址'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
​
某个公司的员工表
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> employee<span class="token punctuation">(</span>
    empno       <span class="token keyword">INT</span>  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">comment</span> <span class="token string">'雇员编号'</span><span class="token punctuation">,</span>
    ename       <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'雇员姓名'</span><span class="token punctuation">,</span>
    job         <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'雇员职位'</span><span class="token punctuation">,</span>
    mgr         <span class="token keyword">INT</span> <span class="token keyword">comment</span> <span class="token string">'雇员上级编号'</span><span class="token punctuation">,</span>
    hiredate    <span class="token keyword">DATE</span> <span class="token keyword">comment</span> <span class="token string">'雇佣日期'</span><span class="token punctuation">,</span>
    sal         <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'薪资'</span><span class="token punctuation">,</span>
    deptnu      <span class="token keyword">INT</span> <span class="token keyword">comment</span> <span class="token string">'部门编号'</span>
<span class="token punctuation">)</span><span class="token keyword">ENGINE</span><span class="token operator">=</span>MyISAM <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span>
​
<span class="token comment">/*创建工资等级表*/</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> salgrade<span class="token punctuation">(</span>
    grade       <span class="token keyword">INT</span>  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">comment</span> <span class="token string">'等级'</span><span class="token punctuation">,</span>
    lowsal      <span class="token keyword">INT</span> <span class="token keyword">comment</span> <span class="token string">'最低薪资'</span><span class="token punctuation">,</span>
    higsal      <span class="token keyword">INT</span> <span class="token keyword">comment</span> <span class="token string">'最高薪资'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
​
<span class="token comment">/*插入dept表数据*/</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> dept <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'研发部'</span><span class="token punctuation">,</span> <span class="token string">'北京'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> dept <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">'工程部'</span><span class="token punctuation">,</span> <span class="token string">'上海'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> dept <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token string">'销售部'</span><span class="token punctuation">,</span> <span class="token string">'广州'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> dept <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token string">'财务部'</span><span class="token punctuation">,</span> <span class="token string">'深圳'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
​
<span class="token comment">/*插入emp表数据*/</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> employee <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1009</span><span class="token punctuation">,</span> <span class="token string">'唐僧'</span><span class="token punctuation">,</span> <span class="token string">'董事长'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">'2010-11-17'</span><span class="token punctuation">,</span> <span class="token number">50000</span><span class="token punctuation">,</span>  <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> employee <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1004</span><span class="token punctuation">,</span> <span class="token string">'猪八戒'</span><span class="token punctuation">,</span> <span class="token string">'经理'</span><span class="token punctuation">,</span> <span class="token number">1009</span><span class="token punctuation">,</span> <span class="token string">'2001-04-02'</span><span class="token punctuation">,</span> <span class="token number">29750</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> employee <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1006</span><span class="token punctuation">,</span> <span class="token string">'猴子'</span><span class="token punctuation">,</span> <span class="token string">'经理'</span><span class="token punctuation">,</span> <span class="token number">1009</span><span class="token punctuation">,</span> <span class="token string">'2011-05-01'</span><span class="token punctuation">,</span> <span class="token number">28500</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> employee <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1007</span><span class="token punctuation">,</span> <span class="token string">'张飞'</span><span class="token punctuation">,</span> <span class="token string">'经理'</span><span class="token punctuation">,</span> <span class="token number">1009</span><span class="token punctuation">,</span> <span class="token string">'2011-09-01'</span><span class="token punctuation">,</span> <span class="token number">24500</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> employee <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1008</span><span class="token punctuation">,</span> <span class="token string">'诸葛亮'</span><span class="token punctuation">,</span> <span class="token string">'分析师'</span><span class="token punctuation">,</span> <span class="token number">1004</span><span class="token punctuation">,</span> <span class="token string">'2017-04-19'</span><span class="token punctuation">,</span> <span class="token number">30000</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> employee <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1013</span><span class="token punctuation">,</span> <span class="token string">'林俊杰'</span><span class="token punctuation">,</span> <span class="token string">'分析师'</span><span class="token punctuation">,</span> <span class="token number">1004</span><span class="token punctuation">,</span> <span class="token string">'2011-12-03'</span><span class="token punctuation">,</span> <span class="token number">30000</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> employee <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1002</span><span class="token punctuation">,</span> <span class="token string">'牛魔王'</span><span class="token punctuation">,</span> <span class="token string">'销售员'</span><span class="token punctuation">,</span> <span class="token number">1006</span><span class="token punctuation">,</span> <span class="token string">'2018-02-20'</span><span class="token punctuation">,</span> <span class="token number">16000</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> employee <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1003</span><span class="token punctuation">,</span> <span class="token string">'程咬金'</span><span class="token punctuation">,</span> <span class="token string">'销售员'</span><span class="token punctuation">,</span> <span class="token number">1006</span><span class="token punctuation">,</span> <span class="token string">'2017-02-22'</span><span class="token punctuation">,</span> <span class="token number">12500</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> employee <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1005</span><span class="token punctuation">,</span> <span class="token string">'后裔'</span><span class="token punctuation">,</span> <span class="token string">'销售员'</span><span class="token punctuation">,</span> <span class="token number">1006</span><span class="token punctuation">,</span> <span class="token string">'2011-09-28'</span><span class="token punctuation">,</span> <span class="token number">12500</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> employee <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1010</span><span class="token punctuation">,</span> <span class="token string">'韩信'</span><span class="token punctuation">,</span> <span class="token string">'销售员'</span><span class="token punctuation">,</span> <span class="token number">1006</span><span class="token punctuation">,</span> <span class="token string">'2018-09-08'</span><span class="token punctuation">,</span> <span class="token number">15000</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> employee <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1012</span><span class="token punctuation">,</span> <span class="token string">'安琪拉'</span><span class="token punctuation">,</span> <span class="token string">'文员'</span><span class="token punctuation">,</span> <span class="token number">1006</span><span class="token punctuation">,</span> <span class="token string">'2011-12-03'</span><span class="token punctuation">,</span> <span class="token number">9500</span><span class="token punctuation">,</span>  <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> employee <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1014</span><span class="token punctuation">,</span> <span class="token string">'甄姬'</span><span class="token punctuation">,</span> <span class="token string">'文员'</span><span class="token punctuation">,</span> <span class="token number">1007</span><span class="token punctuation">,</span> <span class="token string">'2019-01-23'</span><span class="token punctuation">,</span> <span class="token number">7500</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> employee <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1011</span><span class="token punctuation">,</span> <span class="token string">'妲己'</span><span class="token punctuation">,</span> <span class="token string">'文员'</span><span class="token punctuation">,</span> <span class="token number">1008</span><span class="token punctuation">,</span> <span class="token string">'2018-05-23'</span><span class="token punctuation">,</span> <span class="token number">11000</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> employee <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1001</span><span class="token punctuation">,</span> <span class="token string">'小乔'</span><span class="token punctuation">,</span> <span class="token string">'文员'</span><span class="token punctuation">,</span> <span class="token number">1013</span><span class="token punctuation">,</span> <span class="token string">'2018-12-17'</span><span class="token punctuation">,</span> <span class="token number">8000</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
​
<span class="token comment">/*插入salgrade表数据*/</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> salgrade <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">7000</span><span class="token punctuation">,</span> <span class="token number">12000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> salgrade <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">12010</span><span class="token punctuation">,</span> <span class="token number">14000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> salgrade <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">14010</span><span class="token punctuation">,</span> <span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> salgrade <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">20010</span><span class="token punctuation">,</span> <span class="token number">30000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> salgrade <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">30010</span><span class="token punctuation">,</span> <span class="token number">99990</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><h4 id="where-条件查询"><a href="#where-条件查询" class="header-anchor">#</a> where 条件查询</h4> <ul><li>简单查询</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employee<span class="token punctuation">;</span>
<span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>job <span class="token keyword">as</span> ename_job <span class="token keyword">from</span> employee<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>精确条件查询</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employee <span class="token keyword">where</span> ename<span class="token operator">=</span><span class="token string">'后裔'</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employee <span class="token keyword">where</span> sal <span class="token operator">!=</span> <span class="token number">50000</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employee <span class="token keyword">where</span> sal <span class="token operator">&lt;&gt;</span> <span class="token number">50000</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employee <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token number">10000</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>模糊条件查询</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'%aracter%'</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employee  <span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">'林%'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>范围查询</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employee <span class="token keyword">where</span> sal <span class="token operator">between</span> <span class="token number">10000</span> <span class="token operator">and</span> <span class="token number">30000</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employee <span class="token keyword">where</span> hiredate <span class="token operator">between</span> <span class="token string">'2011-01-01'</span> <span class="token operator">and</span> <span class="token string">'2017-12-1'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>离散查询</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employee <span class="token keyword">where</span> ename <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token string">'猴子'</span><span class="token punctuation">,</span><span class="token string">'林俊杰'</span><span class="token punctuation">,</span><span class="token string">'小红'</span><span class="token punctuation">,</span><span class="token string">'小胡'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>清除重复值</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token keyword">distinct</span><span class="token punctuation">(</span>job<span class="token punctuation">)</span> <span class="token keyword">from</span> employee<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>统计查询（聚合函数）:</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- count(code)或者count(*)</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> employee<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span>ename<span class="token punctuation">)</span> <span class="token keyword">from</span> employee<span class="token punctuation">;</span>

<span class="token comment">-- sum()  计算总和</span>
<span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> employee<span class="token punctuation">;</span>

<span class="token comment">-- max()    计算最大值</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employee <span class="token keyword">where</span> sal<span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span>  <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> employee<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- avg()   计算平均值</span>
<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> employee<span class="token punctuation">;</span>

<span class="token comment">-- min()   计算最低值</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employee <span class="token keyword">where</span> sal<span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span>  <span class="token function">min</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> employee<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- concat函数： 起到连接作用</span>
<span class="token keyword">select</span> concat<span class="token punctuation">(</span>ename<span class="token punctuation">,</span><span class="token string">' 是 '</span><span class="token punctuation">,</span>job<span class="token punctuation">)</span> <span class="token keyword">as</span> aaaa <span class="token keyword">from</span> employee<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="group-by分组查询-分组"><a href="#group-by分组查询-分组" class="header-anchor">#</a> <code>group by</code>分组查询（分组）</h4> <ul><li>作用：把行 按 字段 分组</li> <li>语法：group by 列 1，列 2....列 N</li> <li>适用场合：常用于统计场合，一般和聚合函数连用</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- eg:</span>
<span class="token keyword">select</span> deptnu<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> employee <span class="token keyword">group</span> <span class="token keyword">by</span> deptnu<span class="token punctuation">;</span>
<span class="token keyword">select</span> deptnu<span class="token punctuation">,</span>job<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> employee <span class="token keyword">group</span> <span class="token keyword">by</span> deptnu<span class="token punctuation">,</span>job<span class="token punctuation">;</span>
<span class="token keyword">select</span> job<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> employee <span class="token keyword">group</span> <span class="token keyword">by</span> job<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="having-条件查询-筛选"><a href="#having-条件查询-筛选" class="header-anchor">#</a> having 条件查询（筛选）</h4> <ul><li>作用：对查询的结果进行筛选操作</li> <li>语法：having 条件 或者 having 聚合函数 条件</li> <li>适用场合：一般跟在 group by 之后</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- eg:</span>
<span class="token keyword">select</span> job<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> employee <span class="token keyword">group</span> <span class="token keyword">by</span> job <span class="token keyword">having</span> job <span class="token operator">=</span><span class="token string">'文员'</span><span class="token punctuation">;</span>
<span class="token keyword">select</span>  deptnu<span class="token punctuation">,</span>job<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> employee <span class="token keyword">group</span> <span class="token keyword">by</span> deptnu<span class="token punctuation">,</span>job <span class="token keyword">having</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&gt;=</span><span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">select</span>  deptnu<span class="token punctuation">,</span>job<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">as</span> 总数 <span class="token keyword">from</span> employee <span class="token keyword">group</span> <span class="token keyword">by</span> deptnu<span class="token punctuation">,</span>job <span class="token keyword">having</span> 总数<span class="token operator">&gt;=</span><span class="token number">2</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="order-by排序查询-排序"><a href="#order-by排序查询-排序" class="header-anchor">#</a> <code>order by</code>排序查询（排序）</h4> <ul><li>作用：对查询的结果进行排序操作</li> <li>语法：order by 字段 1,字段 2 .....</li> <li>适用场合：一般用在查询结果的排序</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- eg:</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employee <span class="token keyword">order</span> <span class="token keyword">by</span> sal<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employee <span class="token keyword">order</span> <span class="token keyword">by</span> hiredate<span class="token punctuation">;</span>
<span class="token keyword">select</span>  deptnu<span class="token punctuation">,</span>job<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">as</span> 总数 <span class="token keyword">from</span> employee <span class="token keyword">group</span> <span class="token keyword">by</span> deptnu<span class="token punctuation">,</span>job <span class="token keyword">having</span> 总数<span class="token operator">&gt;=</span><span class="token number">2</span> <span class="token keyword">order</span> <span class="token keyword">by</span> deptnu <span class="token keyword">desc</span><span class="token punctuation">;</span>
<span class="token keyword">select</span>  deptnu<span class="token punctuation">,</span>job<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">as</span> 总数 <span class="token keyword">from</span> employee <span class="token keyword">group</span> <span class="token keyword">by</span> deptnu<span class="token punctuation">,</span>job <span class="token keyword">having</span> 总数<span class="token operator">&gt;=</span><span class="token number">2</span> <span class="token keyword">order</span> <span class="token keyword">by</span> deptnu <span class="token keyword">asc</span><span class="token punctuation">;</span>
<span class="token keyword">select</span>  deptnu<span class="token punctuation">,</span>job<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">as</span> 总数 <span class="token keyword">from</span> employee <span class="token keyword">group</span> <span class="token keyword">by</span> deptnu<span class="token punctuation">,</span>job <span class="token keyword">having</span> 总数<span class="token operator">&gt;=</span><span class="token number">2</span> <span class="token keyword">order</span> <span class="token keyword">by</span> deptnu<span class="token punctuation">;</span>
​
<span class="token comment">-- 顺序：where ---- group by ----- having ------ order by</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="limit-限制查询-限制"><a href="#limit-限制查询-限制" class="header-anchor">#</a> limit 限制查询（限制）</h4> <ul><li>作用：对查询结果起到限制条数的作用</li> <li>语法：limit n，m n:代表起始条数值，不写默认为 0；m 代表：取出的条数</li> <li>适用场合：数据量过多时，可以起到限制作用</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- eg:</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> XD<span class="token punctuation">.</span>employee <span class="token keyword">limit</span> <span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="exists-型子查询"><a href="#exists-型子查询" class="header-anchor">#</a> exists 型子查询</h4> <ul><li>exists 型子查询后面是一个受限的 select 查询语句</li> <li>exists 子查询，如果 exists 后的内层查询能查出数据，则返回 TRUE 表示存在；为空则返回 FLASE 则不存在。</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 分为2种：exists跟 not exists</span>
​
<span class="token keyword">select</span> <span class="token number">1</span> <span class="token keyword">from</span> employee <span class="token keyword">where</span> <span class="token number">1</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表名 a <span class="token keyword">where</span> <span class="token keyword">exists</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token number">1</span> <span class="token keyword">from</span> 表名<span class="token number">2</span> <span class="token keyword">where</span> 条件<span class="token punctuation">)</span><span class="token punctuation">;</span>
​
<span class="token comment">-- eg:查询出公司有员工的部门的详细信息</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dept a <span class="token keyword">where</span> <span class="token keyword">exists</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token number">1</span> <span class="token keyword">from</span> employee b <span class="token keyword">where</span> a<span class="token punctuation">.</span>deptnu<span class="token operator">=</span>b<span class="token punctuation">.</span>deptnu<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dept a <span class="token keyword">where</span> <span class="token operator">not</span> <span class="token keyword">exists</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token number">1</span> <span class="token keyword">from</span> employee b <span class="token keyword">where</span> a<span class="token punctuation">.</span>deptnu<span class="token operator">=</span>b<span class="token punctuation">.</span>deptnu<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="左连接查询与右连接查询"><a href="#左连接查询与右连接查询" class="header-anchor">#</a> 左连接查询与右连接查询</h4> <ul><li>左连接称之为左外连接 右连接称之为右外连接 这俩个连接都是属于外连接</li> <li>左连接关键字：<code>left join 表名 on 条件</code> / <code>left outer 表名 join on 条件</code> 右连接关键字：<code>right join 表名 on 条件</code>/ <code>right outer 表名 join on 条件</code></li> <li>左连接说明： <code>left join</code> 是<code>left outer join</code>的简写，左(外)连接，左表(a_table)的记录将会全部表示出来， 而右表(b_table)只会显示符合搜索条件的记录。右表记录不足的地方均为 NULL。</li> <li>右连接说明：<code>right join</code>是<code>right outer join</code>的简写，与左(外)连接相反，右(外)连接，左表(a_table)只会显示符合搜索条件的记录，而右表(b_table)的记录将会全部表示出来。左表记录不足的地方均为 NULL。</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- eg:列出部门名称和这些部门的员工信息，同时列出那些没有的员工的部门</span>
<span class="token comment">--   dept，employee</span>
<span class="token keyword">select</span> a<span class="token punctuation">.</span>dname<span class="token punctuation">,</span>b<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> dept a  <span class="token keyword">left</span> <span class="token keyword">join</span> employee b <span class="token keyword">on</span> a<span class="token punctuation">.</span>deptnu<span class="token operator">=</span>b<span class="token punctuation">.</span>deptnu<span class="token punctuation">;</span>
<span class="token keyword">select</span> b<span class="token punctuation">.</span>dname<span class="token punctuation">,</span>a<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> employee a  <span class="token keyword">right</span> <span class="token keyword">join</span>  dept b <span class="token keyword">on</span> b<span class="token punctuation">.</span>deptnu<span class="token operator">=</span>a<span class="token punctuation">.</span>deptnu<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="内连接查询与联合查询"><a href="#内连接查询与联合查询" class="header-anchor">#</a> 内连接查询与联合查询</h4> <ul><li>内连接：获取两个表中字段匹配关系的记录</li> <li>主要语法：<code>INNER JOIN 表名 ON 条件;</code></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- eg:想查出员工张飞的所在部门的地址</span>
<span class="token keyword">select</span> a<span class="token punctuation">.</span>addr <span class="token keyword">from</span> dept a <span class="token keyword">inner</span> <span class="token keyword">join</span> employee b <span class="token keyword">on</span> a<span class="token punctuation">.</span>deptnu<span class="token operator">=</span>b<span class="token punctuation">.</span>deptnu <span class="token operator">and</span> b<span class="token punctuation">.</span>ename<span class="token operator">=</span><span class="token string">'张飞'</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> a<span class="token punctuation">.</span>addr <span class="token keyword">from</span> dept a<span class="token punctuation">,</span>employee b <span class="token keyword">where</span> a<span class="token punctuation">.</span>deptnu<span class="token operator">=</span>b<span class="token punctuation">.</span>deptnu <span class="token operator">and</span> b<span class="token punctuation">.</span>ename<span class="token operator">=</span><span class="token string">'张飞'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>联合查询：就是把多个查询语句的查询结果结合在一起，主要语法 1：<code>... UNION ... （去除重复） 主要语法2：... UNION ALL ...（不去重复）</code></li> <li>union 查询的注意事项：</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- (1)两个select语句的查询结果的“字段数”必须一致；</span>
<span class="token comment">-- (2)通常，也应该让两个查询语句的字段类型具有一致性；</span>
<span class="token comment">-- (3)也可以联合更多的查询结果；</span>
<span class="token comment">-- (4)用到order by排序时，需要加上limit（加上最大条数就行），需要对子句用括号括起来</span>
<span class="token comment">-- eg:对销售员的工资从低到高排序，而文员的工资从高到低排序</span>
<span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employee a <span class="token keyword">where</span> a<span class="token punctuation">.</span>job <span class="token operator">=</span> <span class="token string">'销售员'</span>  <span class="token keyword">order</span> <span class="token keyword">by</span> a<span class="token punctuation">.</span>sal <span class="token keyword">limit</span> <span class="token number">999999</span> <span class="token punctuation">)</span> <span class="token keyword">union</span>  <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employee b <span class="token keyword">where</span> b<span class="token punctuation">.</span>job <span class="token operator">=</span> <span class="token string">'文员'</span> <span class="token keyword">order</span> <span class="token keyword">by</span> b<span class="token punctuation">.</span>sal <span class="token keyword">desc</span> <span class="token keyword">limit</span> <span class="token number">999999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="项目高级查询实战-一"><a href="#项目高级查询实战-一" class="header-anchor">#</a> 项目高级查询实战(一)</h4> <ul><li>查出至少有一个员工的部门。显示部门编号、部门名称、部门位置、部门人数。</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>涉及表： employee dept
语句：<span class="token keyword">select</span> deptnu<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> employee <span class="token keyword">group</span> <span class="token keyword">by</span> deptnu
语句：<span class="token keyword">select</span> a<span class="token punctuation">.</span>deptnu<span class="token punctuation">,</span>a<span class="token punctuation">.</span>dname<span class="token punctuation">,</span>a<span class="token punctuation">.</span>addr<span class="token punctuation">,</span> b<span class="token punctuation">.</span>zongshu <span class="token keyword">from</span> dept a<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">select</span> deptnu<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">as</span> zongshu <span class="token keyword">from</span> employee <span class="token keyword">group</span> <span class="token keyword">by</span> deptnu<span class="token punctuation">)</span> b <span class="token keyword">where</span> a<span class="token punctuation">.</span>deptnu<span class="token operator">=</span>b<span class="token punctuation">.</span>deptnu<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>列出薪金比安琪拉高的所有员工。</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>涉及表：employee
语句：<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span>  employee <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">select</span> sal <span class="token keyword">from</span> employee <span class="token keyword">where</span> ename<span class="token operator">=</span><span class="token string">'安琪拉'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>列出所有员工的姓名及其直接上级的姓名。</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>涉及表：employee
语句：<span class="token keyword">select</span> a<span class="token punctuation">.</span>ename<span class="token punctuation">,</span>ifnull<span class="token punctuation">(</span>b<span class="token punctuation">.</span>ename<span class="token punctuation">,</span><span class="token string">'BOSS'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> leader <span class="token keyword">from</span> employee a <span class="token keyword">left</span> <span class="token keyword">join</span> employee b <span class="token keyword">on</span> a<span class="token punctuation">.</span>mgr<span class="token operator">=</span>b<span class="token punctuation">.</span>empno<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>列出受雇日期早于直接上级的所有员工的编号、姓名、部门名称。</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>涉及表：employee dept
条件：a<span class="token punctuation">.</span>hiredate <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>hiredate
语句：<span class="token keyword">select</span> a<span class="token punctuation">.</span>empno<span class="token punctuation">,</span>a<span class="token punctuation">.</span>ename<span class="token punctuation">,</span>c<span class="token punctuation">.</span>dname <span class="token keyword">from</span> employee a <span class="token keyword">left</span> <span class="token keyword">join</span> employee b <span class="token keyword">on</span> a<span class="token punctuation">.</span>mgr<span class="token operator">=</span>b<span class="token punctuation">.</span>empno <span class="token keyword">left</span> <span class="token keyword">join</span> dept c <span class="token keyword">on</span> a<span class="token punctuation">.</span>deptnu<span class="token operator">=</span>c<span class="token punctuation">.</span>deptnu <span class="token keyword">where</span> a<span class="token punctuation">.</span>hiredate <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>hiredate<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>列出部门名称和这些部门的员工信息，同时列出那些没有员工的部门。</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>涉及表：dept employee
语句：<span class="token keyword">select</span> a<span class="token punctuation">.</span>dname<span class="token punctuation">,</span>b<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> dept a <span class="token keyword">left</span> <span class="token keyword">join</span> employee b <span class="token keyword">on</span> a<span class="token punctuation">.</span>deptnu<span class="token operator">=</span>b<span class="token punctuation">.</span>deptnu<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>列出所有文员的姓名及其部门名称，所在部门的总人数。</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>涉及表：employee dept
条件：job<span class="token operator">=</span><span class="token string">'文员'</span>
语句：<span class="token keyword">select</span> deptnu<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">as</span> zongshu <span class="token keyword">from</span> employee <span class="token keyword">group</span> <span class="token keyword">by</span> deptnu<span class="token punctuation">;</span>
语句：<span class="token keyword">select</span> b<span class="token punctuation">.</span>ename<span class="token punctuation">,</span>a<span class="token punctuation">.</span>dname<span class="token punctuation">,</span>b<span class="token punctuation">.</span>job<span class="token punctuation">,</span>c<span class="token punctuation">.</span>zongshu <span class="token keyword">from</span> dept a <span class="token punctuation">,</span>employee b <span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">select</span> deptnu<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">as</span> zongshu <span class="token keyword">from</span> employee <span class="token keyword">group</span> <span class="token keyword">by</span> deptnu<span class="token punctuation">)</span> c <span class="token keyword">where</span> a<span class="token punctuation">.</span>deptnu<span class="token operator">=</span>b<span class="token punctuation">.</span>deptnu <span class="token operator">and</span> b<span class="token punctuation">.</span>job<span class="token operator">=</span><span class="token string">'文员'</span> <span class="token operator">and</span> b<span class="token punctuation">.</span>deptnu<span class="token operator">=</span>c<span class="token punctuation">.</span>deptnu<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="项目高级查询实战-二"><a href="#项目高级查询实战-二" class="header-anchor">#</a> 项目高级查询实战(二)</h4> <ul><li>列出最低薪金大于 15000 的各种工作及从事此工作的员工人数。</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>涉及表：employee
条件：<span class="token function">min</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">15000</span>
语句：<span class="token keyword">select</span> job<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> employee <span class="token keyword">group</span> <span class="token keyword">by</span> job <span class="token keyword">having</span> <span class="token function">min</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">15000</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>列出在销售部工作的员工的姓名，假定不知道销售部的部门编号。</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>涉及表：employee dept
<span class="token keyword">select</span>  ename  <span class="token keyword">from</span> employee <span class="token keyword">where</span> deptnu<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">select</span> deptnu <span class="token keyword">from</span> dept <span class="token keyword">where</span> dname<span class="token operator">=</span><span class="token string">'销售部'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>列出与诸葛亮从事相同工作的所有员工及部门名称。</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>涉及表：employee dept
语句：<span class="token keyword">select</span> a<span class="token punctuation">.</span>ename<span class="token punctuation">,</span>b<span class="token punctuation">.</span>dname <span class="token keyword">from</span> employee a<span class="token punctuation">,</span>dept b <span class="token keyword">where</span> a<span class="token punctuation">.</span>deptnu<span class="token operator">=</span>b<span class="token punctuation">.</span>deptnu <span class="token operator">and</span> a<span class="token punctuation">.</span>job<span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> job <span class="token keyword">from</span> employee <span class="token keyword">where</span> ename<span class="token operator">=</span><span class="token string">'诸葛亮'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
语句：<span class="token keyword">select</span> a<span class="token punctuation">.</span>ename<span class="token punctuation">,</span>b<span class="token punctuation">.</span>dname <span class="token keyword">from</span> employee a <span class="token keyword">left</span> <span class="token keyword">join</span> dept b <span class="token keyword">on</span> a<span class="token punctuation">.</span>deptnu<span class="token operator">=</span>b<span class="token punctuation">.</span>deptnu <span class="token keyword">where</span> a<span class="token punctuation">.</span>job<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">select</span> job <span class="token keyword">from</span> employee <span class="token keyword">where</span> ename<span class="token operator">=</span><span class="token string">'诸葛亮'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>列出薪金比 在部门 30 工作的员工的薪金 还高的员工姓名和薪金、部门名称。</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>涉及表：employee dept
语句：<span class="token keyword">select</span> a<span class="token punctuation">.</span>ename<span class="token punctuation">,</span>a<span class="token punctuation">.</span>sal<span class="token punctuation">,</span>b<span class="token punctuation">.</span>dname <span class="token keyword">from</span> employee a <span class="token punctuation">,</span>dept b <span class="token keyword">where</span> a<span class="token punctuation">.</span>deptnu<span class="token operator">=</span>b<span class="token punctuation">.</span>deptnu <span class="token operator">and</span> sal <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> employee <span class="token keyword">where</span> deptnu<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>列出每个部门的员工数量、平均工资。</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>涉及表：employee
语句：<span class="token keyword">select</span> deptnu <span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token punctuation">,</span><span class="token function">avg</span> <span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> employee <span class="token keyword">group</span> <span class="token keyword">by</span> deptnu<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>列出薪金高于公司平均薪金的所有员工信息，所在部门名称，上级领导，工资等级。</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>涉及表：employee dept salgrade
条件：<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> employee
语句：elect a<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>c<span class="token punctuation">.</span>dname<span class="token punctuation">,</span>b<span class="token punctuation">.</span>ename<span class="token punctuation">,</span>d<span class="token punctuation">.</span>grade <span class="token keyword">from</span> employee a<span class="token punctuation">,</span>employee b<span class="token punctuation">,</span>dept c <span class="token punctuation">,</span>salgrade d <span class="token keyword">where</span> a<span class="token punctuation">.</span>mgr<span class="token operator">=</span>b<span class="token punctuation">.</span>empno <span class="token operator">and</span> a<span class="token punctuation">.</span>deptnu <span class="token operator">=</span>c<span class="token punctuation">.</span>deptnu <span class="token operator">and</span> a<span class="token punctuation">.</span>sal <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> employee<span class="token punctuation">)</span> <span class="token operator">and</span> a<span class="token punctuation">.</span>sal  <span class="token operator">between</span> d<span class="token punctuation">.</span>lowsal <span class="token operator">and</span> d<span class="token punctuation">.</span>higsal<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="dcl-数据控制语言-对用户权限的设置"><a href="#dcl-数据控制语言-对用户权限的设置" class="header-anchor">#</a> DCL 数据控制语言（对用户权限的设置）</h3> <ul><li>什么是 DCL 数据控制语言？</li></ul> <p>数据控制语言（DCL：Data Control Language）是用来设置或者更改数据库用户或角色权限的语句，这些语句包括 GRANT、DENY、REVOKE 等语句。</p> <h4 id="限制-root-用户指定-ip-登录"><a href="#限制-root-用户指定-ip-登录" class="header-anchor">#</a> 限制 root 用户指定 ip 登录</h4> <p>如何从安全角度出发限制 root 用户指定 ip 登录</p> <ul><li>查看 root 用户可以在哪台机器登录</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token keyword">user</span><span class="token punctuation">,</span>host <span class="token keyword">from</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span> <span class="token keyword">where</span> <span class="token keyword">user</span><span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>修改 mysql 库里边的 user 表</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">update</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span> <span class="token keyword">set</span> host<span class="token operator">=</span><span class="token string">'localhost'</span> <span class="token keyword">where</span> <span class="token keyword">user</span><span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>刷新权限</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>flush <span class="token keyword">privileges</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="用户密码"><a href="#用户密码" class="header-anchor">#</a> 用户密码</h4> <p>修改用户密码分三种方法：</p> <ul><li>第一种：set password for 用户@ip = password('密码');</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">set</span> password <span class="token keyword">for</span> root<span class="token variable">@localhost</span> <span class="token operator">=</span> password<span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>第二种：mysqladmin -u 用户 -p 旧密码 password 新密码;</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysqladmin <span class="token operator">-</span>urootmysqladmin <span class="token operator">-</span>uroot <span class="token operator">-</span>proot password<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>第三种：update mysql.user set authentication_string=password('密码') where user='用户' and host='ip';</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">update</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span> <span class="token keyword">set</span> authentication_string<span class="token operator">=</span>password<span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span> <span class="token keyword">where</span> <span class="token keyword">user</span><span class="token operator">=</span><span class="token string">'root'</span> <span class="token operator">and</span> host<span class="token operator">=</span><span class="token string">'localhost'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>忘记密码:</p> <ul><li>第一步：修改配置文件 my.cnf (默认在/etc/my.cnf)，在[mysqld]下面加上 skip-grant-tables （跳过权限的意思）</li> <li>第二步：重启 mysql 服务</li> <li>第三步：mysql -uroot -p 无需密码登录进入</li> <li>第四步：修改密码</li></ul> <h4 id="创建新用户并限制-ip-网段登录"><a href="#创建新用户并限制-ip-网段登录" class="header-anchor">#</a> 创建新用户并限制 ip 网段登录</h4> <ul><li>创建用户的语法：create user 'username'@'host' identified by 'password';</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>username：你将创建的用户名
host：指定该用户在哪个主机上可以登陆，如果是本地用户可用localhost，如果想让该用户可以从任意远程主机    登陆，可以使用通配符<span class="token operator">%</span>
password：该用户的登陆密码，密码可以为空，如果为空则该用户可以不需要密码登陆服务器
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>创建用户语法：创建一个 pig 用户，并指定登录密码：123456，可以在任何一台远程主机都可以登录</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">user</span> <span class="token string">'pig'</span><span class="token variable">@'%'</span> identified <span class="token keyword">by</span> <span class="token string">'123456'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>创建一个 pig 用户，并指定登录密码：为空，指定在 120 网段的机器登录</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">user</span> <span class="token string">'pig'</span><span class="token variable">@'120.%.%.%'</span> identified <span class="token keyword">by</span> <span class="token string">''</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>查看权限：</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span> <span class="token keyword">where</span> <span class="token keyword">user</span><span class="token operator">=</span><span class="token string">'pig'</span>\G
mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> grants <span class="token keyword">for</span> <span class="token string">'pig'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">---------------------------------+</span>
<span class="token operator">|</span> Grants <span class="token keyword">for</span> pig@<span class="token operator">%</span>                <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------------------------+</span>
<span class="token operator">|</span> <span class="token keyword">GRANT</span> <span class="token keyword">USAGE</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'pig'</span><span class="token variable">@'%'</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------------------------+</span>
<span class="token keyword">USAGE</span>：无权限的意思
mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> grants <span class="token keyword">for</span> <span class="token string">'root'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">---------------------------------------------------------------------+</span>
<span class="token operator">|</span> Grants <span class="token keyword">for</span> root<span class="token variable">@localhost</span>                                           <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------------------------------------------------------------+</span>
<span class="token operator">|</span> <span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'root'</span><span class="token variable">@'localhost'</span> <span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------------------------------------------------------------+</span>
<span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span>:表示这个用户拥有<span class="token keyword">grant</span>权限，即可以对其他用户授权
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li>删除用户语法：drop user 'username'@'host';</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">user</span> <span class="token string">'pig'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span> <span class="token keyword">where</span> <span class="token keyword">user</span><span class="token operator">=</span><span class="token string">'pig'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="库表权限授权与回收"><a href="#库表权限授权与回收" class="header-anchor">#</a> 库表权限授权与回收</h4> <ul><li>授权语法：grant 权限 1,权限 2..... on 数据库对象 to '用户'</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">grant</span> 权限<span class="token number">1</span><span class="token punctuation">,</span>权限<span class="token number">2.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">on</span> 数据库对象 <span class="token keyword">to</span> <span class="token string">'用户'</span><span class="token variable">@'host'</span> identified <span class="token keyword">by</span> <span class="token string">'password'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>all privileges:代表所有权限</li> <li>. :代表所有库所有表</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>对现有用户进行授权：对现有用户pig授予所有库所有表所有权限。
<span class="token keyword">grant</span> <span class="token keyword">all</span> <span class="token keyword">privileges</span> <span class="token keyword">on</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span>  <span class="token keyword">to</span> <span class="token string">'pig'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code>对没有的用户进行授权：创建一个新用户dog授予XD库的所有权限，登录密码<span class="token number">123456</span>，任何一台主机登录
<span class="token keyword">grant</span> <span class="token keyword">all</span> <span class="token keyword">privileges</span> <span class="token keyword">on</span> XD<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">to</span> <span class="token string">'dog'</span><span class="token variable">@'%'</span> identified <span class="token keyword">by</span> <span class="token string">'123456'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code>对没有的用户进行授权：创建一个新用户cat授予XD库的employee表 查与修改权限，登录密码<span class="token number">123456</span>，任何一台主机登录
<span class="token keyword">grant</span> <span class="token keyword">select</span><span class="token punctuation">,</span><span class="token keyword">update</span> <span class="token keyword">on</span> XD<span class="token punctuation">.</span>employee <span class="token keyword">to</span> <span class="token string">'cat'</span><span class="token variable">@'%'</span> identified <span class="token keyword">by</span> <span class="token string">'123456'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code>对没有的用户进行授权：对用户cat授予XD库的employee表<span class="token keyword">insert</span> 权限，登录密码<span class="token number">123456</span>，任何一台主机登录
<span class="token keyword">grant</span> <span class="token keyword">insert</span> <span class="token keyword">on</span> XD<span class="token punctuation">.</span>employee <span class="token keyword">to</span> <span class="token string">'cat'</span><span class="token variable">@'%'</span> identified <span class="token keyword">by</span> <span class="token string">'123456'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>回收语法：revoke 权限 1,权限 2..... on 数据库对象 from '用户'@'host';</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>回收pig用户的所有权限（注意：并没有回收它的登录权限）
<span class="token keyword">revoke</span> <span class="token keyword">all</span> <span class="token keyword">privileges</span> <span class="token keyword">on</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span>  <span class="token keyword">from</span> <span class="token string">'pig'</span> @ <span class="token string">'%'</span><span class="token punctuation">;</span>
flush <span class="token keyword">privileges</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code>回收pig用户的所有权限（并回收它的登录权限）
<span class="token keyword">delete</span> <span class="token keyword">from</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span> <span class="token keyword">where</span> <span class="token keyword">user</span><span class="token operator">=</span><span class="token string">'pig'</span><span class="token punctuation">;</span>
flush <span class="token keyword">privileges</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code>回收cat用户对XD库的employee的查与修改权限
<span class="token keyword">revoke</span> <span class="token keyword">select</span><span class="token punctuation">,</span><span class="token keyword">update</span> <span class="token keyword">on</span> XD<span class="token punctuation">.</span>employee <span class="token keyword">from</span> <span class="token string">'cat'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span>
flush <span class="token keyword">privileges</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="事务实战-视图-触发器-以及存储过程"><a href="#事务实战-视图-触发器-以及存储过程" class="header-anchor">#</a> 事务实战，视图，触发器，以及存储过程</h3> <h4 id="事务的详细解析"><a href="#事务的详细解析" class="header-anchor">#</a> 事务的详细解析</h4> <ul><li>什么是事务?</li> <li>答：数据库事务通常指对数据库进行读或写的一个操作过程。有两个目的，第一个是为数据库操作提供了一个从失败中恢复到正常状态的方法，同时提供了数据库即使在异常状态下仍能保持一致性的方法；第二个是当多个应用程序在并发访问数据库时，可以在这些应用程序之间提供一个隔离方法，以防止彼此的操作互相干扰。</li> <li>事务的特性（ACID）：
<ul><li>原子性(Atomicity)：事务必须是原子工作单元，一个事务中的所有语句，应该做到：要么全做，要么一个都不做；</li> <li>一致性(Consistency):让数据保持逻辑上的“合理性”，比如：小明给小红打 10000 块钱，既要让小明的账户减少 10000，又要让小红的账户上增加 10000 块钱；</li> <li>隔离性(Isolation)：如果多个事务同时并发执行，但每个事务就像各自独立执行一样。</li> <li>持久性(Durability)：一个事务执行成功，则对数据来说应该是一个明确的硬盘数据更改（而不仅仅是内存中的变化）。</li></ul></li> <li><strong>要使用事务的话，表的引擎要为 innodb 引擎</strong></li></ul> <h4 id="事务实战"><a href="#事务实战" class="header-anchor">#</a> 事务实战</h4> <ul><li>事务的开启与提交：
<ul><li>事务的开启：begin; start transaction;</li> <li>事务的提交：commit;</li> <li>事务的回滚：rollback;</li></ul></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>创建一个账户表模拟转账
<span class="token keyword">create</span> <span class="token keyword">table</span> account <span class="token punctuation">(</span>
                         id <span class="token keyword">tinyint</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> zerofill <span class="token keyword">auto_increment</span>  <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'id编号'</span><span class="token punctuation">,</span>
                         name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'客户姓名'</span><span class="token punctuation">,</span>
                         money <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'账户金额'</span><span class="token punctuation">,</span>
                         <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span>
                         <span class="token punctuation">)</span><span class="token keyword">engine</span><span class="token operator">=</span><span class="token keyword">innodb</span> <span class="token keyword">charset</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>开启 autocommit（临时生效）：</li></ul> <p>OFF（0）：表示关闭 ON （1）：表示开启</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">set</span> autocommit<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'autocommit'</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">---------------+-------+</span>
<span class="token operator">|</span> Variable_name <span class="token operator">|</span> <span class="token keyword">Value</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------+-------+</span>
<span class="token operator">|</span> autocommit    <span class="token operator">|</span> <span class="token keyword">OFF</span>   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------+-------+</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">set</span> autocommit<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
mysql<span class="token operator">&gt;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'autocommit'</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">---------------+-------+</span>
<span class="token operator">|</span> Variable_name <span class="token operator">|</span> <span class="token keyword">Value</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------+-------+</span>
<span class="token operator">|</span> autocommit    <span class="token operator">|</span> <span class="token keyword">ON</span>    <span class="token operator">|</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><ul><li>开启 autocommit（永久生效）：</li></ul> <p>修改配置文件：vi /etc/my.cnf 在[mysqld]下面加上：autocommit=1 记得重启服务才会生效</p> <h4 id="视图的应用"><a href="#视图的应用" class="header-anchor">#</a> 视图的应用</h4> <ul><li>什么是视图？视图的作用是什么？</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>视图（<span class="token keyword">view</span>）是一种虚拟存在的表，是一个逻辑表，它本身是不包含数据的。作为一个<span class="token keyword">select</span>语句保存在数据字典中的。
通过视图，可以展现基表（用来创建视图的表叫做基表base <span class="token keyword">table</span>）的部分数据，说白了视图的数据就是来自于基表
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>视图的优点是：</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token number">1</span>）简单：使用视图的用户完全不需要关心后面对应的表的结构、关联条件和筛选条件，对用户来说已经是过滤好的复合条件的结果集。
​
<span class="token number">2</span>）安全：使用视图的用户只能访问他们被允许查询的结果集，对表的权限管理并不能限制到某个行某个列，但是通过视图就可以简单的实现。
​
<span class="token number">3</span>）数据独立：一旦视图的结构确定了，可以屏蔽表结构变化对用户的影响，源表增加列对视图没有影响<span class="token punctuation">;</span>源表修改列名，则可以通过修改视图来解决，不会造成对访问者的影响。
　　
<span class="token number">4</span>）不占用空间：视图是逻辑上的表，不占用内存空间
​
总而言之，使用视图的大部分情况是为了保障数据安全性，提高查询效率。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>视图的创建以及修改</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>创建的基本语法是：
<span class="token keyword">create</span> <span class="token keyword">view</span> <span class="token operator">&lt;</span>视图名称<span class="token operator">&gt;</span> <span class="token keyword">as</span> <span class="token keyword">select</span> 语句<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">view</span> <span class="token operator">&lt;</span>视图名称<span class="token operator">&gt;</span> <span class="token punctuation">(</span>字段<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token keyword">select</span> 语句<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token operator">or</span> <span class="token keyword">replace</span> <span class="token keyword">view</span> <span class="token operator">&lt;</span>视图名称<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code>修改的语法是：
<span class="token keyword">alter</span> <span class="token keyword">view</span> <span class="token operator">&lt;</span>视图名称<span class="token operator">&gt;</span> <span class="token keyword">as</span> <span class="token keyword">select</span> 语句<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code>视图删除语法：
<span class="token keyword">drop</span> <span class="token keyword">view</span> <span class="token operator">&lt;</span>视图名称<span class="token operator">&gt;</span> <span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>视图的缺点</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code> <span class="token number">1</span><span class="token punctuation">)</span>性能差：<span class="token keyword">sql</span> server必须把视图查询转化成对基本表的查询，如果这个视图是由一个复杂的多表查询所定义，那么，即使是视图的一个简单查询，<span class="token keyword">sql</span> server也要把它变成一个复杂的结合体，需要花费一定的时间。

 <span class="token number">2</span><span class="token punctuation">)</span>修改限制：当用户试图修改试图的某些信息时，数据库必须把它转化为对基本表的某些信息的修改，对于简单的试图来说，这是很方便的，但是，对于比较复杂的试图，可能是不可修改的。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="触发器介绍"><a href="#触发器介绍" class="header-anchor">#</a> 触发器介绍</h4> <ul><li><p>什么是触发器？</p></li> <li><p>触发器就是监视某种情况，并触发某种操作</p></li> <li><p>创建触发器的语法:</p></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">trigger</span> 触发器名称  <span class="token keyword">after</span><span class="token operator">/</span>before   <span class="token keyword">insert</span><span class="token operator">/</span><span class="token keyword">update</span><span class="token operator">/</span><span class="token keyword">delete</span> <span class="token keyword">on</span> 表名
   <span class="token keyword">for each row</span>
   <span class="token keyword">begin</span>
   <span class="token keyword">sql</span>语句<span class="token punctuation">;</span>
   <span class="token keyword">end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">after</span><span class="token operator">/</span>before:可以设置为事件发生前或后
<span class="token keyword">insert</span><span class="token operator">/</span><span class="token keyword">update</span><span class="token operator">/</span><span class="token keyword">delete</span>:它们可以在执行<span class="token keyword">insert</span>、<span class="token keyword">update</span>或<span class="token keyword">delete</span>的过程中触发
<span class="token keyword">for each row</span>:每隔一行执行一次动作
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>删除触发器的语法:</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">trigger</span> 触发器名称<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>演示：</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>创建一个员工迟到表：
<span class="token keyword">create</span> <span class="token keyword">table</span> work_time_delay<span class="token punctuation">(</span>
   empno <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'雇员编号'</span><span class="token punctuation">,</span>
   ename <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'雇员姓名'</span><span class="token punctuation">,</span>
   <span class="token keyword">status</span> <span class="token keyword">int</span> <span class="token keyword">comment</span> <span class="token string">'状态'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">delimiter</span> <span class="token comment">// 自定义语句的结束符号</span>
​
mysql<span class="token operator">&gt;</span> <span class="token keyword">delimiter</span> <span class="token comment">//</span>
mysql<span class="token operator">&gt;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">trigger</span> trig_work <span class="token keyword">after</span> <span class="token keyword">insert</span> <span class="token keyword">on</span> work_time_delay
<span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">for each row</span>
<span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">begin</span>
<span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">update</span> employee <span class="token keyword">set</span> sal<span class="token operator">=</span>sal<span class="token operator">-</span><span class="token number">100</span> <span class="token keyword">where</span> empno<span class="token operator">=</span>new<span class="token punctuation">.</span>empno<span class="token punctuation">;</span>
<span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">end</span>
<span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token comment">// Query OK, 0 rows affected (0.01 sec)</span>
​
new：指的是事件发生before或者<span class="token keyword">after</span>保存的新数据
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="存储过程介绍"><a href="#存储过程介绍" class="header-anchor">#</a> 存储过程介绍</h4> <ul><li>什么是存储过程？</li> <li>存储过程就是把复杂的一系列操作，封装成一个过程。类似于 shell，python 脚本等。</li> <li>存储过程的优缺点</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>优点是：
   <span class="token number">1</span><span class="token punctuation">)</span>复杂操作，调用简单
   <span class="token number">2</span><span class="token punctuation">)</span>速度快

缺点是：
   <span class="token number">1</span>）封装复杂
   <span class="token number">2</span><span class="token punctuation">)</span> 没有灵活性
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>创建存储过程语法：</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">procedure</span> 名称 <span class="token punctuation">(</span>参数<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
         <span class="token keyword">begin</span>
         过程体<span class="token punctuation">;</span>
         过程体<span class="token punctuation">;</span>
         <span class="token keyword">end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code>参数：
<span class="token operator">in</span><span class="token operator">|</span><span class="token keyword">out</span><span class="token operator">|</span><span class="token keyword">inout</span> 参数名称 类型（长度）
<span class="token operator">in</span>：表示调用者向过程传入值（传入值可以是字面量或变量）
<span class="token keyword">out</span>：表示过程向调用者传出值<span class="token punctuation">(</span>可以返回多个值<span class="token punctuation">)</span>（传出值只能是变量）
<span class="token keyword">inout</span>：既表示调用者向过程传入值，又表示过程向调用者传出值（值只能是变量）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>声明变量：declare 变量名 类型(长度) default 默认值;</li> <li>给变量赋值：set @变量名=值;</li> <li>调用存储命令：call 名称(@变量名);</li> <li>删除存储过程命令：drop procedure 名称;</li> <li>查看创建的存储过程命令：</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">procedure</span> 名称\G<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code>创建一个简单的存储过程：
mysql<span class="token operator">&gt;</span> <span class="token keyword">delimiter</span> <span class="token comment">//</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">procedure</span>  name<span class="token punctuation">(</span><span class="token operator">in</span> n <span class="token keyword">int</span><span class="token punctuation">)</span>
<span class="token operator">-</span><span class="token operator">&gt;</span>     <span class="token keyword">begin</span>
<span class="token operator">-</span><span class="token operator">&gt;</span>     <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employee <span class="token keyword">limit</span> n<span class="token punctuation">;</span>
<span class="token operator">-</span><span class="token operator">&gt;</span>     <span class="token keyword">end</span>
<span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token comment">//  Query OK, 0 rows affected (0.00 sec)</span>
​
mysql<span class="token operator">&gt;</span> <span class="token keyword">set</span> <span class="token variable">@n</span><span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">;</span>
<span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token comment">// Query OK, 0 rows affected (0.00 sec)</span>
​
mysql<span class="token operator">&gt;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">call</span> name<span class="token punctuation">(</span><span class="token variable">@n</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">procedure</span>  name<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">-</span><span class="token operator">&gt;</span>     <span class="token keyword">begin</span>
<span class="token operator">-</span><span class="token operator">&gt;</span>     <span class="token keyword">declare</span> n <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">6</span><span class="token punctuation">;</span>
<span class="token operator">-</span><span class="token operator">&gt;</span>     <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employee <span class="token keyword">limit</span> n<span class="token punctuation">;</span>
<span class="token operator">-</span><span class="token operator">&gt;</span>     <span class="token keyword">end</span>
<span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token comment">//  Query OK, 0 rows affected (0.00 sec)</span>
​
mysql<span class="token operator">&gt;</span> <span class="token keyword">call</span> name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_8-索引与存储引擎的介绍"><a href="#_8-索引与存储引擎的介绍" class="header-anchor">#</a> 8 索引与存储引擎的介绍</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">index</span> 索引名称 <span class="token keyword">on</span> 表名<span class="token punctuation">(</span>字段名<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id=""><a href="#" class="header-anchor">#</a></h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="-2"><a href="#-2" class="header-anchor">#</a></h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">7/18/2023</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/handbook/Java/Spring.html" class="prev">
            Spring
          </a></span> <span class="next"><a href="/handbook/Java/Groovy.html">
            Groovy笔记
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-2" data-v-cb1513f6><a href="/handbook/Java/SQL.html#mysql" class="sidebar-link reco-side-mysql" data-v-cb1513f6>MySQL</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/SQL.html#安装" class="sidebar-link reco-side-安装" data-v-cb1513f6>安装</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/SQL.html#demos" class="sidebar-link reco-side-demos" data-v-cb1513f6>Demos</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/SQL.html#基础" class="sidebar-link reco-side-基础" data-v-cb1513f6>基础</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/SQL.html#面试题记录" class="sidebar-link reco-side-面试题记录" data-v-cb1513f6>面试题记录</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/Java/SQL.html#入门知识" class="sidebar-link reco-side-入门知识" data-v-cb1513f6>入门知识</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/SQL.html#服务管理" class="sidebar-link reco-side-服务管理" data-v-cb1513f6>服务管理</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/SQL.html#库表深入解析" class="sidebar-link reco-side-库表深入解析" data-v-cb1513f6>库表深入解析</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/Java/SQL.html#sql-各类语句精讲" class="sidebar-link reco-side-sql-各类语句精讲" data-v-cb1513f6>sql 各类语句精讲</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/SQL.html#ddl-数据定义语言" class="sidebar-link reco-side-ddl-数据定义语言" data-v-cb1513f6>DDL 数据定义语言</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/SQL.html#dml-数据操纵语言" class="sidebar-link reco-side-dml-数据操纵语言" data-v-cb1513f6>DML 数据操纵语言</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/SQL.html#dql-数据查询语言" class="sidebar-link reco-side-dql-数据查询语言" data-v-cb1513f6>DQL 数据查询语言</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/SQL.html#dcl-数据控制语言-对用户权限的设置" class="sidebar-link reco-side-dcl-数据控制语言-对用户权限的设置" data-v-cb1513f6>DCL 数据控制语言（对用户权限的设置）</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/SQL.html#事务实战-视图-触发器-以及存储过程" class="sidebar-link reco-side-事务实战-视图-触发器-以及存储过程" data-v-cb1513f6>事务实战，视图，触发器，以及存储过程</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/SQL.html#_8-索引与存储引擎的介绍" class="sidebar-link reco-side-_8-索引与存储引擎的介绍" data-v-cb1513f6>8 索引与存储引擎的介绍</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div></div></div></div>
    <script src="/assets/js/app.a7850cbf.js" defer></script><script src="/assets/js/4.e4331d91.js" defer></script><script src="/assets/js/3.561be8e5.js" defer></script><script src="/assets/js/2.b25d4684.js" defer></script><script src="/assets/js/1.c7cb60d4.js" defer></script><script src="/assets/js/63.e0236199.js" defer></script>
  </body>
</html>
