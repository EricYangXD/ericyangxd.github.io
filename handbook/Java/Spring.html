<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Spring | 木易的OT</title>
    <meta name="generator" content="VuePress 1.9.10">
    <script>
        (function() {
          if (location.href.indexOf('github.io') > -1 || location.href.indexOf('gitee.io') > -1) {
             location.href = 'https://ericyangxd.top'
           }
        })();
        </script><script type='application/ld+json'>
          {
            "@context": "https://schema.org",
            "@type": "Article",
            "headline": "Spring",
            "url": "https://ericyangxd.top/handbook/Java/Spring.html",
            "image": [
              "https://ericyangxd.top/logo.png"
              ],
            "datePublished": "2022-10-14T00:00:00.000Z",
            "dateModified": "2025-01-12T00:00:00.000Z",
            "author": [{
                "@type": "Person",
                "name": "EricYangXD",
                "url": "https://github.com/EricYangXD/ericyangxd.github.io"
            }]
          }
      </script>
    <meta name="description" content="前端面试,React,Vue,JavaScript,CSS,HTML,HTTP,HTTPS,websocket,UDP,TCP,Webpack,算法,数据结构,LeetCode,小程序,油猴,计算机网络,NodeJs,Vite,Antdesign,EricYangXD,Eric,Chrome,Android,V8,Mac,git,网络安全,开发技巧,路由,router,诗歌,金句,源码,面试,Docker,Shell,clash,Windows">
    <meta name="keywords" content="Spring">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
    <link rel="preload" href="/assets/css/0.styles.82c89da6.css" as="style"><link rel="preload" href="/assets/js/app.eb0be052.js" as="script"><link rel="preload" href="/assets/js/4.e4a90c70.js" as="script"><link rel="preload" href="/assets/js/3.ad1ccd56.js" as="script"><link rel="preload" href="/assets/js/2.0240bc78.js" as="script"><link rel="preload" href="/assets/js/1.b94e320b.js" as="script"><link rel="preload" href="/assets/js/66.6f5c3310.js" as="script"><link rel="prefetch" href="/assets/js/10.d09001be.js"><link rel="prefetch" href="/assets/js/100.962093c7.js"><link rel="prefetch" href="/assets/js/101.2b9377b8.js"><link rel="prefetch" href="/assets/js/102.006ad327.js"><link rel="prefetch" href="/assets/js/103.49d96ff2.js"><link rel="prefetch" href="/assets/js/104.cf978ffc.js"><link rel="prefetch" href="/assets/js/105.90988401.js"><link rel="prefetch" href="/assets/js/106.068db439.js"><link rel="prefetch" href="/assets/js/107.d19e7ffd.js"><link rel="prefetch" href="/assets/js/108.1e1e2f04.js"><link rel="prefetch" href="/assets/js/109.4a781627.js"><link rel="prefetch" href="/assets/js/11.74c854af.js"><link rel="prefetch" href="/assets/js/110.6048f5b8.js"><link rel="prefetch" href="/assets/js/111.145303b3.js"><link rel="prefetch" href="/assets/js/112.079a7f61.js"><link rel="prefetch" href="/assets/js/113.259d5c8c.js"><link rel="prefetch" href="/assets/js/114.00617866.js"><link rel="prefetch" href="/assets/js/115.d6b361c3.js"><link rel="prefetch" href="/assets/js/116.4dbdd4fa.js"><link rel="prefetch" href="/assets/js/117.7107f5f0.js"><link rel="prefetch" href="/assets/js/118.1d681954.js"><link rel="prefetch" href="/assets/js/119.83ec99c4.js"><link rel="prefetch" href="/assets/js/120.dd49f33b.js"><link rel="prefetch" href="/assets/js/121.e7108376.js"><link rel="prefetch" href="/assets/js/122.f7752b3c.js"><link rel="prefetch" href="/assets/js/123.4563449b.js"><link rel="prefetch" href="/assets/js/124.0a88e571.js"><link rel="prefetch" href="/assets/js/125.35efff18.js"><link rel="prefetch" href="/assets/js/126.3ebd096f.js"><link rel="prefetch" href="/assets/js/127.b997ff29.js"><link rel="prefetch" href="/assets/js/128.a7663c2c.js"><link rel="prefetch" href="/assets/js/129.66e22c94.js"><link rel="prefetch" href="/assets/js/130.2045d0ef.js"><link rel="prefetch" href="/assets/js/131.6bd718d1.js"><link rel="prefetch" href="/assets/js/132.d4dc8310.js"><link rel="prefetch" href="/assets/js/133.6c2a628b.js"><link rel="prefetch" href="/assets/js/134.79312a91.js"><link rel="prefetch" href="/assets/js/135.50eef191.js"><link rel="prefetch" href="/assets/js/136.854e3c8a.js"><link rel="prefetch" href="/assets/js/137.bf0233a1.js"><link rel="prefetch" href="/assets/js/138.a0fdab36.js"><link rel="prefetch" href="/assets/js/139.62b4a724.js"><link rel="prefetch" href="/assets/js/14.6852c925.js"><link rel="prefetch" href="/assets/js/140.65e744fb.js"><link rel="prefetch" href="/assets/js/141.14621388.js"><link rel="prefetch" href="/assets/js/142.4d728882.js"><link rel="prefetch" href="/assets/js/143.1b0b7c35.js"><link rel="prefetch" href="/assets/js/144.8c9f0d17.js"><link rel="prefetch" href="/assets/js/145.86d9c5e0.js"><link rel="prefetch" href="/assets/js/146.877f2339.js"><link rel="prefetch" href="/assets/js/15.13cca212.js"><link rel="prefetch" href="/assets/js/16.4899876e.js"><link rel="prefetch" href="/assets/js/17.13bc3b8f.js"><link rel="prefetch" href="/assets/js/18.76e876d7.js"><link rel="prefetch" href="/assets/js/19.b5d33ae1.js"><link rel="prefetch" href="/assets/js/20.29dbec92.js"><link rel="prefetch" href="/assets/js/21.96fceba8.js"><link rel="prefetch" href="/assets/js/22.d2b3e267.js"><link rel="prefetch" href="/assets/js/23.64c64b94.js"><link rel="prefetch" href="/assets/js/24.b558a260.js"><link rel="prefetch" href="/assets/js/25.bb57ebb2.js"><link rel="prefetch" href="/assets/js/26.47cd7229.js"><link rel="prefetch" href="/assets/js/27.8d7938d4.js"><link rel="prefetch" href="/assets/js/28.f894eb36.js"><link rel="prefetch" href="/assets/js/29.525cb35a.js"><link rel="prefetch" href="/assets/js/30.cbeef5b7.js"><link rel="prefetch" href="/assets/js/31.51f58f47.js"><link rel="prefetch" href="/assets/js/32.3f80a1ce.js"><link rel="prefetch" href="/assets/js/33.418aa3e9.js"><link rel="prefetch" href="/assets/js/34.ce30b292.js"><link rel="prefetch" href="/assets/js/35.097a405e.js"><link rel="prefetch" href="/assets/js/36.2bca446e.js"><link rel="prefetch" href="/assets/js/37.03c8c74a.js"><link rel="prefetch" href="/assets/js/38.06c1896e.js"><link rel="prefetch" href="/assets/js/39.631eea29.js"><link rel="prefetch" href="/assets/js/40.f203c8fe.js"><link rel="prefetch" href="/assets/js/41.ef449e99.js"><link rel="prefetch" href="/assets/js/42.835371e5.js"><link rel="prefetch" href="/assets/js/43.a5f1c40c.js"><link rel="prefetch" href="/assets/js/44.788162ac.js"><link rel="prefetch" href="/assets/js/45.120950cc.js"><link rel="prefetch" href="/assets/js/46.1c3faa0c.js"><link rel="prefetch" href="/assets/js/47.d484bee0.js"><link rel="prefetch" href="/assets/js/48.72f5dac3.js"><link rel="prefetch" href="/assets/js/49.b521da58.js"><link rel="prefetch" href="/assets/js/5.73d03319.js"><link rel="prefetch" href="/assets/js/50.ac3ee5ec.js"><link rel="prefetch" href="/assets/js/51.9f4c51c5.js"><link rel="prefetch" href="/assets/js/52.2d014a7e.js"><link rel="prefetch" href="/assets/js/53.c666929c.js"><link rel="prefetch" href="/assets/js/54.526915f2.js"><link rel="prefetch" href="/assets/js/55.d5e7f44a.js"><link rel="prefetch" href="/assets/js/56.a389c0df.js"><link rel="prefetch" href="/assets/js/57.49529e3f.js"><link rel="prefetch" href="/assets/js/58.9c84fe43.js"><link rel="prefetch" href="/assets/js/59.1b0b4a7c.js"><link rel="prefetch" href="/assets/js/6.ef81b8ef.js"><link rel="prefetch" href="/assets/js/60.6e21d755.js"><link rel="prefetch" href="/assets/js/61.f1763db0.js"><link rel="prefetch" href="/assets/js/62.40e2c412.js"><link rel="prefetch" href="/assets/js/63.0ff31674.js"><link rel="prefetch" href="/assets/js/64.ab050f4d.js"><link rel="prefetch" href="/assets/js/65.515d0a95.js"><link rel="prefetch" href="/assets/js/67.bb2f04e1.js"><link rel="prefetch" href="/assets/js/68.0cb6d42f.js"><link rel="prefetch" href="/assets/js/69.4afa792f.js"><link rel="prefetch" href="/assets/js/7.126283bf.js"><link rel="prefetch" href="/assets/js/70.b55af5c9.js"><link rel="prefetch" href="/assets/js/71.a44fc302.js"><link rel="prefetch" href="/assets/js/72.bfbcffc9.js"><link rel="prefetch" href="/assets/js/73.5d76cedd.js"><link rel="prefetch" href="/assets/js/74.31634e6b.js"><link rel="prefetch" href="/assets/js/75.e2d20161.js"><link rel="prefetch" href="/assets/js/76.0edf675a.js"><link rel="prefetch" href="/assets/js/77.df40efe1.js"><link rel="prefetch" href="/assets/js/78.4e77c1ce.js"><link rel="prefetch" href="/assets/js/79.c8d20d33.js"><link rel="prefetch" href="/assets/js/8.4a5e8a86.js"><link rel="prefetch" href="/assets/js/80.e6c89196.js"><link rel="prefetch" href="/assets/js/81.96ab8bfd.js"><link rel="prefetch" href="/assets/js/82.0ae1589a.js"><link rel="prefetch" href="/assets/js/83.2bc98330.js"><link rel="prefetch" href="/assets/js/84.5a9ac805.js"><link rel="prefetch" href="/assets/js/85.b0ef5af2.js"><link rel="prefetch" href="/assets/js/86.09333db3.js"><link rel="prefetch" href="/assets/js/87.56826db3.js"><link rel="prefetch" href="/assets/js/88.3fb5c0b9.js"><link rel="prefetch" href="/assets/js/89.6f8eb56a.js"><link rel="prefetch" href="/assets/js/9.ed44c863.js"><link rel="prefetch" href="/assets/js/90.95b92a0d.js"><link rel="prefetch" href="/assets/js/91.8917e92e.js"><link rel="prefetch" href="/assets/js/92.d5a766e0.js"><link rel="prefetch" href="/assets/js/93.cd8fafda.js"><link rel="prefetch" href="/assets/js/94.55eaaee1.js"><link rel="prefetch" href="/assets/js/95.1397ea3b.js"><link rel="prefetch" href="/assets/js/96.ce567d8e.js"><link rel="prefetch" href="/assets/js/97.d5f4c02e.js"><link rel="prefetch" href="/assets/js/98.ae6fb807.js"><link rel="prefetch" href="/assets/js/99.b56807d1.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.52b9ad0c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.82c89da6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-130b300a><div data-v-130b300a><div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-130b300a data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>木易的OT</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>前端面试,React,Vue,JavaScript,CSS,HTML,HTTP,HTTPS,websocket,UDP,TCP,Webpack,算法,数据结构,LeetCode,小程序,油猴,计算机网络,NodeJs,Vite,Antdesign,EricYangXD,Eric,Chrome,Android,V8,Mac,git,网络安全,开发技巧,路由,router,诗歌,金句,源码,面试,Docker,Shell,clash,Windows</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>EricYangXD</span>
            
          <!---->
          2025
        </a></span></div></div> <div class="hide" data-v-130b300a><header class="navbar" data-v-130b300a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">木易的OT</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      木易的OT
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/EricYangXD" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/2295436007445021" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-130b300a></div> <aside class="sidebar" data-v-130b300a><div class="personal-info-wrapper" data-v-39576ba9 data-v-130b300a><!----> <h3 class="name" data-v-39576ba9>
    EricYangXD
  </h3> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>108</h3> <h6 data-v-39576ba9>文章</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>0</h3> <h6 data-v-39576ba9>标签</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      木易的OT
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/EricYangXD" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/2295436007445021" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/" class="sidebar-heading clickable router-link-active"><span>About</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Android</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>LeetCode</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>AntDesign</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>小程序</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>开发技巧</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Angular</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Backend（Java Based）</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/handbook/Java/Learn.html" class="sidebar-link">Learn Java</a></li><li><a href="/handbook/Java/Work.html" class="sidebar-link">Java Work</a></li><li><a href="/handbook/Java/Maven.html" class="sidebar-link">Maven</a></li><li><a href="/handbook/Java/Spring.html" aria-current="page" class="active sidebar-link">Spring</a></li><li><a href="/handbook/Java/SQL.html" class="sidebar-link">MySQL笔记</a></li><li><a href="/handbook/Java/Redis.html" class="sidebar-link">Redis</a></li><li><a href="/handbook/Java/Groovy.html" class="sidebar-link">Groovy笔记</a></li><li><a href="/handbook/Java/Scala.html" class="sidebar-link">Scala笔记</a></li><li><a href="/handbook/Java/Library.html" class="sidebar-link">第三方库</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>油猴</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Nodejs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vite</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Web安全</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Google Chrome V8</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Mac使用记录</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>文章诗句</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Office软件</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>股海浮沉</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>打工人须知</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>Spring</h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>EricYangXD</span>
            
          <!---->
          2025
        </a></span></div></div> <div data-v-130b300a><main class="page"><section><div class="page-title"><h1 class="title">Spring</h1> <div data-v-f875f3fc><i class="iconfont reco-account" data-v-f875f3fc><span data-v-f875f3fc>EricYangXD</span></i> <i class="iconfont reco-date" data-v-f875f3fc><span data-v-f875f3fc>2022/10/14</span></i> <i class="iconfont reco-eye" data-v-f875f3fc><span id="/handbook/Java/Spring.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-f875f3fc><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <!----></div></div> <div class="theme-reco-content content__default"><h2 id="spring"><a href="#spring" class="header-anchor">#</a> Spring</h2> <ol><li>简化开发：Spring 是分层的 JavaSE/EE 应用 full-stack 轻量级开源框架，以 IoC：Inverse of Control（反转控制）和 AOP（Aspect Oriented Programming）面向切面编程为内核。以及由此演化出来的事务处理。</li> <li>框架整合：MyBatis，Struts，Hibernate 等等</li> <li>全家桶：Spring Framework、Spring Boot、Spring Cloud 等等</li></ol> <h3 id="spring-boot-注解类型"><a href="#spring-boot-注解类型" class="header-anchor">#</a> Spring-Boot 注解类型</h3> <ol><li>@SpringBootApplication：来标注一个主程序类，说明这是一个 Spring Boot 应用；</li> <li>@SpringBootConfiguration：Spring Boot 的配置类，标注在某个类上，表示这是一个 Spring Boot 的配置类；</li> <li>@Configuration 配置类上来标注这个注解，创建一个 class 配置文件；配置类 - 配置文件；配置类也是容器中的一个组件；</li> <li>@Component 表示一个类是由 Spring 管理的组件，通用型注解；@Component(&quot;idxxx&quot;)可以指定 id；</li> <li>@EnableAutoConfiguration 开启自动配置功能；以前我们需要配置的东西，Spring Boot 帮我们自动配置；告诉 Spring Boot 开启自动配置功能；这样自动配置才能生效；</li> <li>@Controller：表示一个类是 Spring MVC 控制器；</li> <li>@Autowired：用于 bean 的自动依赖注入；</li> <li>@Service：表示一个类是一个 Spring 服务；</li> <li>@Repository：用来表示一个类是 Spring 的存储库；被标注在 DAO 层；</li> <li>@RequestMapping：用于将 URL 请求映射到控制器方法；</li> <li>@PathVariable：用于从 URL 路径中提取一个变量；</li> <li>@RequestParam：用于从查询字符串或表单数据中提取一个变量；</li> <li>@ResponseBody：用来表示一个方法应该直接返回响应体；</li> <li>@ExceptionHandler：用于处理由控制器方法抛出的异常；</li> <li>@Transactional：用来表示一个方法应该在一个事务中被执行；</li> <li>@Bean：用于表示一个方法产生一个由 Spring 管理的 Bean；</li> <li>@Value：用于从属性文件或环境变量中注入值；</li> <li>@Profile：用来激活一个特定的 Spring 配置文件；</li> <li>@ComponentScan：开启包扫描，不用再在每个 Bean 上加注解，Bean 即 data class 上需要加@Component 注解；</li></ol> <h3 id="项目结构"><a href="#项目结构" class="header-anchor">#</a> 项目结构</h3> <p>这 4 个部分是指 Java Spring MVC 项目的典型结构，它是一种用于构建 Web 应用的架构模式。</p> <ul><li>controller：这个 package 包含处理传入的 HTTP 请求的类，并将它们路由到适当的服务方法。</li> <li>model/bean/dto：这个 package 包含定义应用程序的数据模型的类。这包括实体、数据传输对象（DTO）和其他特定领域的对象。</li> <li>dao/repository(jpa/jdbc)/mapper(mybatis)：这个 package 包含处理应用程序中数据持久性的类。这包括数据库访问、查询和其他与数据相关的操作。
<ul><li>dao 的实现一般放在 impl 包下，即 dao 一般是些 interface，而具体的 sql 语句则写在 impl 类中，比如基于 myBatis 实现 DAO。</li></ul></li> <li>service：这个 package 包含实现应用程序的业务逻辑的类。这包括处理数据、应用规则和其他特定于应用程序领域的操作。</li> <li>eg.</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>/src/main/java：放置项目Java源代码
<span class="token punctuation">..</span>.
<span class="token operator">|</span>_annotation：放置项目自定义注解
<span class="token operator">|</span>_aspect：放置切面代码
<span class="token operator">|</span>_config：放置配置类
<span class="token operator">|</span>_constant：放置常量、枚举等定义
   <span class="token operator">|</span>__consist：存放常量定义
   <span class="token operator">|</span>__enums：存放枚举定义
<span class="token operator">|</span>_controller：放置控制器代码
<span class="token operator">|</span>_filter：放置一些过滤、拦截相关的代码
<span class="token operator">|</span>_mapper：放置数据访问层代码接口
<span class="token operator">|</span>_model：放置数据模型代码
   <span class="token operator">|</span>__entity：放置数据库实体对象定义
   <span class="token operator">|</span>__dto：存放数据传输对象定义
   <span class="token operator">|</span>__vo：存放显示层对象定义
<span class="token operator">|</span>_service：放置具体的业务逻辑代码（*接口*和*实现*分离）
   <span class="token operator">|</span>__intf：存放业务逻辑接口定义
   <span class="token operator">|</span>__impl：存放业务逻辑实际实现
<span class="token operator">|</span>_utils：放置工具类和辅助代码
<span class="token punctuation">..</span>.

/src/main/resources：放置项目静态资源和配置文件
<span class="token punctuation">..</span>.
<span class="token operator">|</span>_mapper：存放mybatis的XML映射文件（如果是mybatis项目）
<span class="token operator">|</span>_static：存放网页静态资源，比如下面的js/css/img
   <span class="token operator">|</span>__js：
   <span class="token operator">|</span>__css：
   <span class="token operator">|</span>__img：
   <span class="token operator">|</span>__font：
   <span class="token operator">|</span>__等等
<span class="token operator">|</span>_template：存放网页模板，比如thymeleaf/freemarker模板等
   <span class="token operator">|</span>__header
   <span class="token operator">|</span>__sidebar
   <span class="token operator">|</span>__bottom
   <span class="token operator">|</span>__XXX.html等等
<span class="token operator">|</span>_application.yml       基本配置文件
<span class="token operator">|</span>_application-dev.yml   开发环境配置文件
<span class="token operator">|</span>_application-test.yml  测试环境配置文件
<span class="token operator">|</span>_application-prod.yml  生产环境配置文件
<span class="token punctuation">..</span>.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h3 id="ioc-控制反转"><a href="#ioc-控制反转" class="header-anchor">#</a> IoC 控制反转</h3> <p>使用对象时，由主动 new 产生对象转换为由外部提供对象，此过程中对象创建控制权由程序转移到外部，此思想称为控制反转。Spring 技术对 IoC 思想进行了实现：</p> <ul><li>Spring 提供了一个容器，称为 IoC 容器，用来充当 IoC 思想中的「外部」</li> <li>IoC 容器负责对象的创建、初始化等一系列工作，被创建或被管理的对象在 IoC 容器中统称为 Bean</li> <li>依赖注入 DI：在容器中建立 bean 与 bean 之间的依赖关系的整个过程，称为依赖注入</li></ul> <h3 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h3> <ol><li><p>在项目<code>resources -&gt; applicationContext.xml</code>中配置。</p></li> <li><p>导入 Spring 的坐标 spring-context。</p></li> <li><p>配置 bean：</p> <ol><li>bean 标签表示配置 bean</li> <li>id 属性表示给 bean 起名字</li> <li>class 属性表示给 bean 定义类型</li></ol></li> <li><p>获取 IoC 容器：<code>ApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);</code></p></li> <li><p>获取 bean：<code>BookDao bookDao = (BookDao) ctx.getBean(&quot;bookDao&quot;);// id</code></p></li> <li><p>即可调用<code>bookDao.save();</code></p></li> <li><p>配置 Dao，业务代码中解耦 new 关键字，可以写一个 setter 方法</p></li> <li><p>在<code>applicationContext.xml</code>中的 bean 标签中配置 server 与 dao 的关系</p> <ol><li>property 标签表示配置当前 bean 的属性</li> <li>name 属性表示配置哪个具体的属性</li> <li>ref 属性表示参照哪一个 bean</li></ol></li></ol> <h3 id="bean-基础配置"><a href="#bean-基础配置" class="header-anchor">#</a> bean 基础配置</h3> <ol><li>name 属性：可以定义多个 bean 的别名用逗号分号空格分隔</li> <li>scope 属性：Spring 默认创建的实例是单例模式，即 scope 属性是 singleton！非单例模式创建方法：设置 scope 为 prototype</li> <li>实例化：bean 本质是对象，创建 bean 使用构造方法完成，调用的是无参构造方法，可以通过反射访问私有构造方法
<ol><li>构造方法</li> <li>静态工厂方法：用得少，bean 中增加<code>factory-method</code>属性告诉 Spring 调哪个方法获得实例，当然也要自己先实现工厂类</li> <li>实例工厂方法：先添加 bean 使用实例工厂实例化 bean，然后再在原来的 bean 中移除 class，增加<code>factory-method</code>属性设置为新增 bean 的 id，并修改<code>factory-method</code>属性为 class 中的实际方法。</li> <li>3 的改进型：不需要增加一个 bean。先在工厂方法类中实现<code>FactoryBean&lt;要返回的实例的类&gt;</code>接口，重写两个 get 方法，<code>getObjectType()-&gt;UserDao.class</code>类似这样。</li> <li>Bean 的别名，生成的是同一个 Bean 实例。</li></ol></li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131014585.png" alt="实例化Bean的几种方法示例"></li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131019310.png" alt="实例化Bean的几种方法的测试示例"></li> <li>报错从最后几行往前看</li> <li>生命周期：
<ol><li>初始化容器：创建对象（内存分配），执行构造方法，执行属性注入（set 操作），执行 bean 初始化方法。init-method、destroy-method 等。</li> <li>使用 bean：执行业务操作</li> <li>关闭/销毁容器：执行 bean 销毁方法</li></ol></li> <li>关闭容器的方式：
<ol><li>手动关闭：ConfigurableApplicationContext 接口 close()操作</li> <li>注册关闭钩子，在虚拟机退出前先关闭容器，再退出虚拟机：ConfigurableApplicationContext 接口 registerShutdownHook()操作</li></ol></li></ol> <h3 id="依赖注入"><a href="#依赖注入" class="header-anchor">#</a> 依赖注入</h3> <p>往类中传递数据的方式有几种？普通方法（set 方法）、构造方法。</p> <ol><li>setter 注入：
<ol><li>简单类型：先在 bean 中定义引用类型属性并提供可供访问的 set 方法，然后在 <code>bean</code> -&gt; <code>property</code> 中设置 value 进行传递</li> <li>引用类型：同上</li></ol></li> <li>构造器注入：
<ol><li>简单类型：先在 bean 中定义构造方法，然后在 <code>bean</code> -&gt; <code>constructor-arg</code> 中设置 name 和 ref/value 进行传递</li> <li>引用类型：同上</li></ol></li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131037749.png" alt="示例"></li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131039986.png" alt="简化方法示例"></li> <li>自己开发的模块用 setter 注入</li> <li>依赖自动装配：
<ol><li>bean 中添加 <code>autowire=&quot;byType/byName&quot;</code> 字段，配合 setter</li> <li>只用于引用类型，不能对简单类型操作</li> <li>使用按类型装配时必须保障容器中相同类型的 bean 唯一，推荐使用</li> <li>使用按名称装配时必须保障容器中具有指定名称的 bean，因变量名与配置耦合，不推荐</li> <li>自动装配优先级低于 setter 注入与构造器注入，同时出现时自动装配失效</li></ol></li> <li>集合类型注入：
<ol><li>array/list/set/map 等：在 ApplicationContext.xml 中，新建一个 bean，然后通过 property 标签配合 name 属性通过 value 或者 ref 来配置</li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131041519.png" alt="集合注入示例"></li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131047492.png" alt="List和Set"></li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131048499.png" alt="Map和Property"></li></ol></li> <li>注入 null：<img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131043420.png" alt="注入null示例"></li> <li>注入的时候创建内部 Bean：<img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131046711.png" alt="示例"></li></ol> <h3 id="bean-的作用域"><a href="#bean-的作用域" class="header-anchor">#</a> Bean 的作用域</h3> <h4 id="singleton-作用域"><a href="#singleton-作用域" class="header-anchor">#</a> Singleton 作用域</h4> <p>在一个 ApplicationContext 上下文环境中，只创建一个 Bean 实例，<code>&lt;bean id=&quot;xx&quot; ... scope=&quot;singleton&quot; &gt;&lt;/bean&gt;</code>。</p> <h4 id="prototype-作用域"><a href="#prototype-作用域" class="header-anchor">#</a> prototype 作用域</h4> <p>创建多个 Bean 实例，<code>&lt;bean id=&quot;xx&quot; ... scope=&quot;prototype&quot; &gt;&lt;/bean&gt;</code>。</p> <p><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131347903.png" alt="示例"></p> <p>有如下场景：
<img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131355020.png" alt="方法注入"></p> <p>此时需要通过方法注入的方式实现：</p> <ol><li>在 Bean1 中增加抽象方法 createBean2()用于生成 Bean2 的实例，<img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131359648.png" alt="示例"></li> <li>在 spring.xml 中：通过<code>&lt;lookup-method name=&quot;createBean2&quot; bean=&quot;bean2&quot;&gt;&lt;/lookup-method&gt;</code>来实现</li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131358771.png" alt="示例"></li></ol> <h4 id="web-环境作用域"><a href="#web-环境作用域" class="header-anchor">#</a> Web 环境作用域</h4> <ol><li>request 作用域</li> <li>session 作用域</li> <li>application 作用域</li> <li>websocket 作用域</li></ol> <p><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131406410.png" alt=""></p> <h4 id="自定义作用域"><a href="#自定义作用域" class="header-anchor">#</a> 自定义作用域</h4> <p>SimpleThreadScope 作用域</p> <ol><li>自定义作用域<img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131518679.png" alt="自定义作用域"></li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131519393.png" alt="注册自定义scope"></li> <li>SimpleThreadScope<img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131520184.png" alt="SimpleThreadScope"></li></ol> <h3 id="bean-的懒加载"><a href="#bean-的懒加载" class="header-anchor">#</a> Bean 的懒加载</h3> <p>默认的情况下，Singleton 作用域下，Bean 会在 Context 之前就被创建完成。即 Spring 容器会在创建容器时提前初始化 Singleton 作用域下的 Bean。如果想要在使用时才创建 Bean，可以使用懒加载。但是如果 Bean 被标注了<code>lazy-init=&quot;true&quot;</code>，则该 Bean 只有在其被需要时才会被初始化</p> <ol><li>如果把<code>&lt;beans ... default-lazy-init=&quot;true&quot;&gt;&lt;/beans&gt;</code>，则该标签下的 Bean 都开启懒加载</li> <li>节省资源，但可能会增加某些资源的的响应时间</li></ol> <h3 id="bean-初始化及销毁逻辑处理"><a href="#bean-初始化及销毁逻辑处理" class="header-anchor">#</a> Bean 初始化及销毁逻辑处理</h3> <ol><li>初始化：
<ol><li><code>&lt;bean ... init-method=&quot;onInit&quot;&gt;&lt;/bean&gt;</code></li> <li>实现 InitializingBean 接口，重写 afterPropertiesSet()方法</li></ol></li> <li>销毁：
<ol><li><code>&lt;bean ... destroy-method=&quot;onDestroy&quot;&gt;&lt;/bean&gt;</code></li> <li>实现 DisposableBean 接口，重写 destroy()方法</li></ol></li> <li>为所有的 Bean 设定默认的初始化方法和销毁方法：<code>&lt;beans ... default-init-method=&quot;onInit&quot; default-destroy-method=&quot;onDestroy&quot;&gt;&lt;/beans&gt;</code></li></ol> <h3 id="bean-属性继承"><a href="#bean-属性继承" class="header-anchor">#</a> Bean 属性继承</h3> <p>场景一：Child 类继承了 Parent 类：</p> <ol><li>使用<code>&lt;bean id=&quot;parent&quot; class=&quot;com.example.Parent&quot; abstract=&quot;true&quot;&gt;&lt;property name=&quot;attr1&quot; value=&quot;val1&quot;/&gt;&lt;/bean&gt;</code>定义一个抽象的父类，通过<code>abstract=&quot;true&quot;</code>告诉 Spring 这个 Bean 不需要实例化。</li> <li>使用<code>&lt;bean id=&quot;child1&quot; class=&quot;com.example.Child1&quot; parent=&quot;parent&quot;&gt;&lt;property name=&quot;attrC1&quot; value=&quot;valC1&quot;/&gt;&lt;/bean&gt;</code>定义一个子类，继承父类</li> <li>使用<code>&lt;bean id=&quot;childN&quot; class=&quot;com.example.ChildN&quot; parent=&quot;parent&quot;&gt;&lt;property name=&quot;attrCN&quot; value=&quot;valCN&quot;/&gt;&lt;/bean&gt;</code>定义一个子类，继承父类</li> <li>子类会继承父类的属性，但不会继承父类的构造方法和初始化方法</li> <li>子类可以重写父类的属性，但不能重写父类的构造方法和初始化方法</li></ol> <p>场景二：Child 类没有继承 Parent 类，但是多个 Child 类中有相同的属性和值，此时 Parent 基类 Bean 上删除<code>class=&quot;com.example.Parent&quot;</code>即可。</p> <p>Bean 的别名：只能在@Configuration 中使用，不能在@Component 中使用。<img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131647632.png" alt="Bean的别名"></p> <h3 id="bean-的依赖注入"><a href="#bean-的依赖注入" class="header-anchor">#</a> Bean 的依赖注入</h3> <ol><li>构造器注入：在构造器中注入依赖，使用<code>&lt;bean id=&quot;xx&quot; class=&quot;com.example.Xx&quot; constructor-arg ref=&quot;yy&quot;&gt;&lt;/bean&gt;</code></li> <li>setter 注入：在 setter 方法中注入依赖，使用<code>&lt;bean id=&quot;xx&quot; class=&quot;com.example.Xx&quot;&gt;&lt;property name=&quot;yy&quot; ref=&quot;yy&quot;&gt;&lt;/property&gt;&lt;/bean&gt;</code></li> <li>自动装配：使用<code>&lt;bean id=&quot;xx&quot; class=&quot;com.example.Xx&quot; autowire=&quot;byType&quot;&gt;&lt;/bean&gt;</code>，byName、byType、constructor、no</li> <li>使用<code>@Autowired</code>注解，可以自动装配，可以标注在构造器、setter 方法、字段上</li> <li>使用<code>@Qualifier</code>注解，可以指定具体的 bean，可以标注在构造器、setter 方法、字段上</li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131715018.png" alt="注入Bean示例1"></li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131716175.png" alt="通过属性注入Bean示例"></li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131718520.png" alt="实例化和注入时指定Bean的id"></li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131721241.png" alt="List和Set注入示例1"></li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131723461.png" alt="List和Set注入示例2">，通过 order 指定顺序。</li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131725961.png" alt="Map注入示例1"></li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131726824.png" alt="Map注入示例2"></li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131726595.png" alt="简单类型注入示例"></li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131727344.png" alt="SpringIoC容器内置接口实例注入示例"></li></ol> <h3 id="bean-的生命周期"><a href="#bean-的生命周期" class="header-anchor">#</a> Bean 的生命周期</h3> <ol><li>实例化：通过构造器或工厂方法创建 bean 实例</li> <li>属性赋值：通过 setter 方法或工厂方法设置 bean 属性</li> <li>初始化：通过 init-method 方法或 InitializingBean 接口的 afterPropertiesSet 方法进行初始化</li> <li>使用：bean 可以被使用</li> <li>销毁：通过 destroy-method 方法或 DisposableBean 接口的 destroy 方法进行销毁</li></ol> <h3 id="通过注解设置-bean-的作用域"><a href="#通过注解设置-bean-的作用域" class="header-anchor">#</a> 通过注解设置 Bean 的作用域</h3> <ol><li>通过@Scope 注解设置作用域及名称<img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131738557.png" alt=""></li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131739528.png" alt="自定义作用域"></li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131740488.png" alt="方法注入"></li></ol> <h3 id="通过注解设置-bean-的懒加载"><a href="#通过注解设置-bean-的懒加载" class="header-anchor">#</a> 通过注解设置 Bean 的懒加载</h3> <p>@Lazy 注解，通过@Lazy 注解设置懒加载，可以标注在类上，也可以标注在方法上。<img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/202411131744600.png" alt="对比示例"></p> <h3 id="通过注解实现-bean-的初始化及销毁"><a href="#通过注解实现-bean-的初始化及销毁" class="header-anchor">#</a> 通过注解实现 Bean 的初始化及销毁</h3> <ol><li><p>使用@PostConstruct 注解，方法在依赖注入完成后执行，可以标注在方法上。</p></li> <li><p>使用@PreDestroy 注解，方法在 bean 销毁前执行，可以标注在方法上。</p></li> <li><p>使用 InitializingBean 接口的 afterPropertiesSet 方法进行初始化，可以实现 InitializingBean 接口。</p></li> <li><p>使用 DisposableBean 接口的 destroy 方法进行销毁，可以实现 DisposableBean 接口。</p></li> <li><p>在 Bean 实例上使用<code>@Bean(initMethod=&quot;onInit&quot;, destroyMethod=&quot;onDestroy&quot;)</code>注解，可以指定初始化和销毁方法。</p></li></ol> <h3 id="加载-properties-配置文件"><a href="#加载-properties-配置文件" class="header-anchor">#</a> 加载 properties 配置文件</h3> <p>一些数据库用户名密码啥的不应该写在 pom.xml 里，应该单独管理 jdbc.properties</p> <ol><li><p>把配置写入 jdbc.properties 文件，比如：<code>jdbc.username=xxx jdbc.password=xxx</code></p></li> <li><p>开 context 命名空间</p> <ol><li>jdbc.properties 中，beans 里面增加一行<code>xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</code>，再增加 2 行<code>http:.../context</code>，<code>http:.../context/spring-context.xsd</code>。大部分是这么操作</li> <li>使用 context 空间加载 properties 配置文件：<code>&lt;context:property-placeholder location=&quot;jdbc.properties&quot;/&gt;</code>，通过<code>system-properties-mode=&quot;NEVER&quot;</code>设置不去加载系统属性，通过 location 属性配置使用不同的 jdbc.properties 文件。</li> <li>在 bean 中使用属性占位符<code>${}</code>读取 properties 配置文件中的属性。</li></ol></li> <li><p>不加载系统属性：<code>&lt;context:property-placeholder location=&quot;jdbc.properties&quot; system-properties-mode=&quot;NEVER&quot; /&gt;</code></p></li> <li><p>加载多个：<code>&lt;context:property-placeholder location=&quot;jdbc.properties,jdbc2.properties&quot; /&gt;</code></p></li> <li><p>加载所有：<code>&lt;context:property-placeholder location=&quot;*.properties&quot; /&gt;</code></p></li> <li><p>加载 properties 文件<strong>标准格式</strong>：<code>&lt;context:property-placeholder location=&quot;classpath:*.properties&quot; /&gt;</code></p></li> <li><p>从类路径或加载系统属性：<code>&lt;context:property-placeholder location=&quot;classpath*:*.properties&quot; /&gt;</code></p></li></ol> <h3 id="ioc-容器"><a href="#ioc-容器" class="header-anchor">#</a> IOC 容器</h3> <ol><li>容器初始化方式一：加载类路径下的配置文件：<code>ApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);</code></li> <li>容器初始化方式二：从文件系统下加载配置文件：<code>ApplicationContext ctx = new FileSystemXmlApplicationContext(&quot;D:\\applicationContext.xml&quot;);</code></li> <li>容器初始化加载多个配置文件：<code>ApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;bean1.xml&quot;,&quot;bean2.xml&quot;);</code></li> <li>获取 bean 方式一：使用 bean 名称获取<code>BookDao bookDao = (BookDao) ctx.getBean(&quot;bookDao&quot;);</code></li> <li>获取 bean 方式二：使用 bean 名称获取并指定类型<code>BookDao bookDao = ctx.getBean(&quot;bookDao&quot;，BookDao.class);</code></li> <li>获取 bean 方式三：使用 bean 类型获取<code>BookDao bookDao = ctx.getBean(BookDao.class);</code>，此时系统中该类只能有一个。</li> <li>上古方法：BeanFactory 接口是 IoC 容器的顶层接口，初始化 BeanFactory 对象时，延迟加载 Bean。</li> <li>ApplicationContext 是 Spring 容器的核心接口，初始化时立即加载 Bean。该接口提供基础的 bean 操作相关方法，通过其它接口扩展器功能。</li> <li>bean 相关:</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="注解模式开发"><a href="#注解模式开发" class="header-anchor">#</a> 注解模式开发</h3> <ol><li><p>定义 bean</p> <ul><li><p>@Component</p> <ul><li>@Controller</li> <li>@Service</li> <li>@Repository</li></ul></li> <li><p><code>&lt;context:component-scan/&gt;</code></p></li></ul></li> <li><p>纯注解开发</p> <ul><li>@Configuration</li> <li>@ComponentScan，多个值用数组</li> <li>@AnnotationConfigApplicationContext</li></ul></li> <li><p>bean 生命周期</p> <ul><li>作用范围@Scope</li> <li>使用@PostConstruct、@PreDestroy 定义 bean 生命周期</li></ul></li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Repository</span>
<span class="token annotation punctuation">@Scope</span><span class="token punctuation">(</span><span class="token string">&quot;singleton&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 单例模式，prototype:非单例</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookDaoImpl</span> <span class="token keyword">implements</span> <span class="token class-name">BookDao</span><span class="token punctuation">{</span>
   <span class="token keyword">public</span> <span class="token class-name">BookDaoImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
   <span class="token annotation punctuation">@PostConstruct</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
   <span class="token annotation punctuation">@PreDestroy</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ol start="4"><li><p>自动装配：无同名 bean 时直接使用@AutoWired，按类型装配，使用反射里面的暴力反射简化代码书写。有同名 bean 时，1 可以通过按名称装配，在 bean 中使用@Repository(&quot;xx&quot;)注解的形式区分；2 是使用@Qualifier(&quot;beanName&quot;)注解的形式开启指定名称装配 bean，直接使用。</p> <ul><li>注意：自动装配基于反射设计创建对象并暴力反射对应属性为私有属性初始化数据，因此无需提供 setter 方法</li> <li>注意：自动装配建议使用无参构造方法创建对象（默认），如果不提供对应的构造方法，请提供唯一的构造方法</li> <li>注意：@Qualifier 注解无法单独使用，必须配合@AutoWired 注解使用</li> <li>使用@Value 实现简单类型/值类型的注入</li></ul></li> <li><p>加载外部 properties 文件</p> <ul><li>使用@PropertySource 注解加载 properties 文件，不支持<code>*</code>文件名</li> <li>注意：路径仅支持单一文件配置，多文件请使用数组格式配置，不允许使用通配符<code>*</code></li></ul></li> <li><p>第三方 bean 管理</p> <ul><li>使用@Bean 定义一个返回这 bean 实例的方法</li> <li>将独立的配置类加入核心配置
<ul><li>方式一：导入式，使用@Import 注解手动加入配置类到核心配置，此注解只能添加一次，多个数据使用数组格式。推荐</li> <li>方式二：扫描式，使用@ComponentScan({&quot;xx.config&quot;})注解扫描配置类所在的包，加载对应的配置类信息。不推荐</li></ul></li></ul></li> <li><p>第三方 bean 的依赖注入</p> <ol><li>简单类型：直接使用@Value 注解，相当于变量的形式</li> <li>引用类型：在@Bean 下定义的方法中定义形参，然后就能直接使用，会自动按类型检测。容器会根据类型自动装配对象。</li></ol></li></ol> <h3 id="aop"><a href="#aop" class="header-anchor">#</a> AOP</h3> <ul><li>基础：</li></ul> <ol><li>面向切面编程，一种编程范式，指导开发者如何组织程序结构。作用是在不惊动原始设计的基础上为其进行功能增强。</li> <li>Spring 倡导无侵入式编程</li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/20221020143540.png" alt="AOP核心概念"></li> <li>连接点：程序执行过程中的任意位置，粒度为执行方法、抛出异常、设置变量等
<ol><li>在 SpringAOP 中，理解为方法的执行</li></ol></li> <li>切入点：匹配连接点的式子。在 SpringAOP 中，一个切入点可以只描述一个具体方法，也可以匹配多个方法
<ol><li>一个具体方法：某个包下某个接口中的无形参无返回值的某个方法</li> <li>匹配多个方法：所有的 save 方法，所有的 get 开头的方法，所有的以 Dao 结尾的接口中的任意方法。。</li></ol></li> <li>通知：在切入点处执行的操作，也就是共性功能
<ol><li>在 SpringAOP 中，功能最终以方法的形式呈现</li></ol></li> <li>通知类：定义通知的类</li> <li>切面：描述通知与切入点的对应关系</li></ol> <ul><li>实战：</li></ul> <ol><li>导包：<code>org.springframework.spring-context</code>，<code>org.aspectj.aspectjweaver</code></li> <li>保持原来的接口和实现类不变</li> <li>Spring 的执行程序（main 方法）也不变</li> <li>SpringConfig 中，增加<code>@EnableAspectJAutoProxy</code>注解，告诉程序我们要用注解开发 AOP</li> <li>AOP 通知类（自己创建）上，增加<code>@Component</code>注解，告诉 Spring 来加载。增加<code>@Aspect</code>注解，进行关联通知。</li> <li>在通知类中，新增一个私有的空方法<code>pt()</code>做通知，名字任意，无参无返回值无实际逻辑，使用<code>@Pointcut</code>注解，并传入：<code>&quot;execution(void com.xxx.BookDao.xx())&quot;</code></li> <li>把切入点（抽出来的函数）与通知绑定，通过<code>@Before(&quot;pt()&quot;)</code>的形式</li> <li>SpringAOP 的核心模式就是代理模式</li> <li>切入点：要进行增强的方法</li> <li>切入点表达式：要进行增强的方法的描述方式，有两种描述方式：
<ol><li>执行 com.xxx.dao 包下的 BookDao 接口中的无参数 update 方法</li> <li>执行 com.xxx.dao.impl 包下的 BookDaoImpl 类中的无参数 update 方法</li></ol></li> <li>切入点表达式标准格式：<code>动作关键字(访问修饰符 返回值 包名.类/接口名.方法名(参数)异常名)</code> <ol><li>动作关键字：描述切入点的行为动作。例如 execution 表示执行到指定切入点</li> <li>访问修饰符：public，private 等可以省略</li> <li>返回值</li> <li>包名</li> <li>类/接口名</li> <li>方法名</li> <li>参数</li> <li>异常名：方法定义中抛出指定异常，可以省略</li></ol></li> <li>可以使用通配符描述切入点，快速描述
<ol><li><code>*</code>：单个独立的任意符号，可以独立出现，也可以作为前缀或者后缀的匹配符出现，<code>@Pointcut(&quot;execution(public * com.xxx.*.BookDao.find* (*))&quot;)</code></li> <li><code>..</code>：多个连续的任意符号，可以独立出现，常用于简化包名与参数的书写，<code>execution(public User com..BookDao.findById (..))</code></li> <li><code>+</code>：专用于匹配子类类型，<code>execution(* *..*Service+.*(..))</code></li> <li>终极写法：<code>execution(* *..*(..))</code>，不常用</li></ol></li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images/imgs/20221020220453.png" alt="20221020220453"></li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images/imgs/20221020221605.png" alt="20221020221605"> <ol><li>关键步骤如下：</li> <li><code>@Around()</code></li> <li><code>Object</code></li> <li><code>Throwable</code></li> <li><code>ProceedingJoinPoint pjp</code></li> <li><code>pjp.proceed()</code></li> <li><code>return ret</code></li> <li>然后填充要做的操作逻辑</li></ol></li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images/imgs/20221020221529.png" alt="20221020221529"></li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images/imgs/20221020221629.png" alt="20221020221629"></li> <li><code>Signature sig = pjp.getSignature(); String xx = sig.getDeclaringTypeName()/getName();</code>获取具体执行的切入点的信息</li> <li>AOP 通知获取参数数据：
<ol><li>JoinPoint 对象描述了连接点方法的运行状态。可以获取到原始方法的调用参数，用于除了<code>@Around</code>以外的</li> <li>ProceedJointPoint 是 JointPoint 的子类：用于<code>@Around</code></li></ol></li> <li>AOP 通知获取返回值数据：
<ol><li>抛出异常后通知可以获取切入点方法中出现的异常信息，使用形参可以接受对应的异常对象。<code>@AfterReturning(value=&quot;pt()&quot;,returning=&quot;ret&quot;)</code></li> <li>环绕通知中可以手工书写对原始方法的调用，得到的结果即为原始方法的返回值。</li></ol></li> <li>AOP 通知获取异常数据（了解）
<ol><li>抛出异常：<code>@AfterThrowing(value=&quot;pt()&quot;,throwing=&quot;t&quot;)</code>，通过形参<code>Throwable t</code>接收并使用对应的异常对象</li> <li>抛出异常后通知可以获取切入点方法运行的异常信息，使用形参可以接受运行时抛出的的异常对象，使用<code>try{}catch(Throwable t){...}</code>接受并使用</li></ol></li> <li>大量的相同的有共性的可以提取出来的方法，可以用 AOP，可以简化大量操作。</li></ol> <h3 id="spring-事务"><a href="#spring-事务" class="header-anchor">#</a> Spring 事务</h3> <ol><li>事务的作用：在数据层保障一系列的数据库操作同成功同失败。</li> <li>Spring 事务作用：在数据层或业务层保障一系列的数据库操作同成功同失败。</li> <li><code>interface PlatformTransactionManager</code>、<code>class DataSourceTransactionManager</code></li> <li>使用步骤 3 步：
<ol><li>在业务层接口上添加 Spring 事务管理：<code>@Transactional</code>，通常添加在业务层接口而不是业务层实现类中，降低耦合，注解式事务可以添加到业务方法上表示当前方法开启事务，也可以添加到接口上表示当前接口所有方法开启事务</li> <li>设置事务管理器：通过 <code>PlatformTransactionManager</code> 新建一个 bean，bean 中返回 <code>DataSourceTransactionManager</code> 的实例对象。事务管理器要根据实现技术进行选择，MyBatis 框架使用的是 JDBC 事务。</li> <li>开启注解式事务驱动：<code>@EnableTransactionManagement</code></li></ol></li> <li>Spring 事务角色：
<ol><li>事务管理员：发起事务方，在 Spring 中通常指代业务层开启事务的方法</li> <li>事务协调员：加入事务方，在 Spring 中通常指代数据层方法，也可以是业务层方法</li></ol></li> <li>事务相关配置：一般只在 Error 错误或运行时异常时才会导致事务回滚。有些异常是不会导致事务回滚的，比如 IOException。
<ol><li>如果要加上这种异常，需在<code>@Transactional(rollbackFor={IOException.class})</code>这样配置</li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/20221021154844.png" alt="事务相关配置"></li></ol></li> <li>事务传播行为：事务协调员对事务管理员所携带事务的处理态度。。。
<ol><li>如果某个接口或方法需要单独开启事务，需在<code>@Transactional(propagation=Propagation.REQUIRE_NEW)</code>这样配置</li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/20221021155835.png" alt="事务传播行为"></li></ol></li></ol> <h3 id="spring-中有哪些方法可以实现异步流式接口防止接口超时"><a href="#spring-中有哪些方法可以实现异步流式接口防止接口超时" class="header-anchor">#</a> Spring 中有哪些方法可以实现异步流式接口防止接口超时？</h3> <ol><li>使用 DeferredResult，异步处理，通过延迟返回结果，避免线程阻塞。当后台任务完成时，通过 DeferredResult 设置结果并返回给客户端。常用于需要等待后台任务完成再返回结果的场景。非阻塞：主线程不需要等待任务完成。超时可控：可以设置超时时间，避免客户端长时间等待。有局限性，处理结果仅返回单个值。</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>context<span class="token punctuation">.</span>request<span class="token punctuation">.</span>async<span class="token punctuation">.</span></span><span class="token class-name">DeferredResult</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">CompletableFuture</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/async&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AsyncController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/deferred&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">DeferredResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">deferredResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 创建 DeferredResult，设置超时时间为10秒</span>
        <span class="token class-name">DeferredResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> deferredResult <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DeferredResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">10000L</span><span class="token punctuation">,</span> <span class="token string">&quot;请求超时，返回默认值&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 模拟异步任务</span>
        <span class="token class-name">CompletableFuture</span><span class="token punctuation">.</span><span class="token function">runAsync</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 模拟处理耗时任务</span>
                deferredResult<span class="token punctuation">.</span><span class="token function">setResult</span><span class="token punctuation">(</span><span class="token string">&quot;异步处理完成，返回成功结果！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置最终结果</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                deferredResult<span class="token punctuation">.</span><span class="token function">setErrorResult</span><span class="token punctuation">(</span><span class="token string">&quot;处理异常&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> deferredResult<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><ol start="2"><li>使用 ResponseBodyEmitter，适用于要动态生成内容并逐步发送给客户端的场景，可以在任务执行过程中逐步向客户端发送更新，而不是等待整个接口执行完成后一次性返回。适合需要分批返回数据的场景，比如文件上传进度、实时日志或大数据集的返回。数据分块响应，减小单次数据传输的压力。实时性好：可以逐步将数据发送给客户端，而非一次性返回。减少内存消耗：适合大数据集的场景。</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>mvc<span class="token punctuation">.</span>method<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ResponseBodyEmitter</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">CompletableFuture</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/async&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AsyncStreamController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/stream&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ResponseBodyEmitter</span> <span class="token function">streamResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 创建一个ResponseBodyEmitter，-1/0：代表不超时，如果不设置，到达默认的超时时间后连接会自动断开。</span>
        <span class="token class-name">ResponseBodyEmitter</span> emitter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ResponseBodyEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 模拟异步任务不断推送数据</span>
        <span class="token class-name">CompletableFuture</span><span class="token punctuation">.</span><span class="token function">runAsync</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    emitter<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;数据块 &quot;</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 推送数据块</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 模拟延迟</span>
                <span class="token punctuation">}</span>
                emitter<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 完成数据发送</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> <span class="token operator">|</span> <span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                emitter<span class="token punctuation">.</span><span class="token function">completeWithError</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 发送错误</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> emitter<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><ol start="3"><li>使用 SseEmitter (Server-Sent Events)，是 ResponseBodyEmitter 的一个子类，它同样能够实现动态内容生成，不过主要将它用在服务器向客户端推送实时数据，如实时消息推送、状态更新等场景。基于 HTTP 的单向事件流（Server-Sent Events 协议）。适用于实时数据推送场景，比如通知系统、日志流或进度更新。SSE 有一点比较好，客户端与服务端一旦建立连接，即便服务端发生重启，也可以做到自动重连。轻量级协议：基于 HTTP 协议的简单实现，无需使用 WebSocket。适合前端支持 SSE 的场景。</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>mvc<span class="token punctuation">.</span>method<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">SseEmitter</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">CompletableFuture</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/async&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SseController</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">SseEmitter</span><span class="token punctuation">&gt;</span></span> <span class="token constant">EMITTER_MAP</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/subSseEmitter/{userId}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">SseEmitter</span> <span class="token function">sseEmitter</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">String</span> userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;sseEmitter: {}&quot;</span><span class="token punctuation">,</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SseEmitter</span> emitterTmp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SseEmitter</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token constant">EMITTER_MAP</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span> emitterTmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">CompletableFuture</span><span class="token punctuation">.</span><span class="token function">runAsync</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">SseEmitter<span class="token punctuation">.</span>SseEventBuilder</span> event <span class="token operator">=</span> <span class="token class-name">SseEmitter</span><span class="token punctuation">.</span><span class="token function">event</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token string">&quot;sseEmitter&quot;</span> <span class="token operator">+</span> userId <span class="token operator">+</span> <span class="token string">&quot; @ &quot;</span> <span class="token operator">+</span> <span class="token class-name">LocalTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">&quot;sseEmitter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                emitterTmp<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                emitterTmp<span class="token punctuation">.</span><span class="token function">completeWithError</span><span class="token punctuation">(</span>ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> emitterTmp<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/sendSseMsg/{userId}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sseEmitter</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">String</span> userId<span class="token punctuation">,</span> <span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">SseEmitter</span> sseEmitter <span class="token operator">=</span> <span class="token constant">EMITTER_MAP</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>sseEmitter <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        sseEmitter<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><p>前端代码示例：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
        
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>SSE 接收服务端事件消息数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
        
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>message<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>等待连接...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">let</span> source <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> userId <span class="token operator">=</span> <span class="token number">7777</span><span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">setMessageInnerHTML</span><span class="token punctuation">(</span><span class="token parameter">message</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> messageDiv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> newParagraph <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;p&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      newParagraph<span class="token punctuation">.</span>textContent <span class="token operator">=</span> message<span class="token punctuation">;</span>
      messageDiv<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>newParagraph<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>EventSource<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 建立连接</span>
      source <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventSource</span><span class="token punctuation">(</span><span class="token string">&quot;http://127.0.0.1:9033/subSseEmitter/&quot;</span> <span class="token operator">+</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setMessageInnerHTML</span><span class="token punctuation">(</span><span class="token string">&quot;连接用户=&quot;</span> <span class="token operator">+</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">/**
       * 连接一旦建立，就会触发open事件
       * 另一种写法：source.onopen = function (event) {}
       */</span>
      source<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
        <span class="token string">&quot;open&quot;</span><span class="token punctuation">,</span>
        <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">setMessageInnerHTML</span><span class="token punctuation">(</span><span class="token string">&quot;建立连接。。。&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token boolean">false</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">/**
       * 客户端收到服务器发来的数据
       * 另一种写法：source.onmessage = function (event) {}
       */</span>
      source<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setMessageInnerHTML</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// onerror</span>
      source<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;连接出错:&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">setMessageInnerHTML</span><span class="token punctuation">(</span><span class="token string">&quot;你的浏览器不支持SSE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><ol start="4"><li>使用 CompletableFuture + @Async，Spring 提供的 @Async 注解可以让方法异步执行，返回 CompletableFuture 以提高处理性能。简单易用，基于线程池实现异步任务。适合后台异步处理任务，接口快速返回结果。简单直观，易于集成。配合线程池提高异步执行效率。有局限性，处理结果仅返回单个值。</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>scheduling<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Async</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>scheduling<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">EnableAsync</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">CompletableFuture</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/async&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@EnableAsync</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AsyncServiceController</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">AsyncService</span> asyncService<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">AsyncServiceController</span><span class="token punctuation">(</span><span class="token class-name">AsyncService</span> asyncService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>asyncService <span class="token operator">=</span> asyncService<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/future&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">futureResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> asyncService<span class="token punctuation">.</span><span class="token function">processAsyncTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">class</span> <span class="token class-name">AsyncService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Async</span>
    <span class="token keyword">public</span> <span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">processAsyncTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 模拟耗时任务</span>
            <span class="token keyword">return</span> <span class="token class-name">CompletableFuture</span><span class="token punctuation">.</span><span class="token function">completedFuture</span><span class="token punctuation">(</span><span class="token string">&quot;异步任务完成！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token class-name">CompletableFuture</span><span class="token punctuation">.</span><span class="token function">completedFuture</span><span class="token punctuation">(</span><span class="token string">&quot;任务失败！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><ol start="5"><li>基于 WebFlux 的响应式流式接口，如果服务使用的是 Spring WebFlux（基于 Reactor 的响应式框架），可以直接返回 Flux 或 Mono 类型的数据流。完全异步非阻塞。适合高并发场景，充分利用 Reactor 框架的响应式特性。完全异步非阻塞，性能高效。支持响应式编程，流式处理数据。</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">reactor<span class="token punctuation">.</span>core<span class="token punctuation">.</span>publisher<span class="token punctuation">.</span></span><span class="token class-name">Flux</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">Duration</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/async&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebFluxController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/flux&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Flux</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">fluxResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 每隔1秒，发送一个数据块，持续5次</span>
        <span class="token keyword">return</span> <span class="token class-name">Flux</span><span class="token punctuation">.</span><span class="token function">interval</span><span class="token punctuation">(</span><span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">ofSeconds</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                   <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> <span class="token string">&quot;数据块 &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span>
                   <span class="token punctuation">.</span><span class="token function">take</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 限制发送5个数据块</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><ol start="6"><li>StreamingResponseBody 与其他响应处理方式略有不同，主要用于处理大数据量或持续数据流的传输，支持将数据直接写入 OutputStream。例如，当我们需要下载一个超大文件时，使用 StreamingResponseBody 可以避免将文件数据一次性加载到内存中，而是持续不断的把文件流发送给客户端，从而解决下载大文件时常见的内存溢出问题。接口实现直接返回 StreamingResponseBody 对象，将数据写入输出流并刷新，调用一次 flush 就会向客户端写入一次数据。</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// ...</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/async&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StreamingResponseBodyController</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/streamingResponse&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">StreamingResponseBody</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleRbe</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

      <span class="token class-name">StreamingResponseBody</span> stream <span class="token operator">=</span> out <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
          <span class="token class-name">String</span> message <span class="token operator">=</span> <span class="token string">&quot;streamingResponse&quot;</span><span class="token punctuation">;</span>
          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">try</span> <span class="token punctuation">{</span>
                  out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>message <span class="token operator">+</span> i<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\r\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                  out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;\r\n&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token comment">//调用一次flush就会像前端写入一次数据</span>
                  out<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token class-name">MediaType</span><span class="token punctuation">.</span><span class="token constant">TEXT_HTML</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span>stream<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><ol start="7"><li>总结：
<ul><li>DeferredResult：适合异步处理任务后一次性返回结果。</li> <li>ResponseBodyEmitter：适合分批或流式返回数据。</li> <li>SseEmitter：适合实时推送消息（支持 SSE 协议的场景）。</li> <li>Flux（WebFlux）：高性能响应式流式接口，适合高并发场景。</li> <li>@Async + CompletableFuture：适合后台异步任务执行，快速返回结果。</li> <li>StreamingResponseBody：适合大数据量或持续数据流传输，避免内存溢出。</li></ul></li></ol> <h2 id="springmvc"><a href="#springmvc" class="header-anchor">#</a> SpringMVC</h2> <p>SpringMVC 技术与 Servlet 技术功能等同，均属于 web 层开发技术。SpringMVC 是一种基于 Java 实现 MVC 模型的轻量级 Web 框架。使用简单，开发便捷（相较于 Servlet）。灵活性强。</p> <h3 id="使用步骤"><a href="#使用步骤" class="header-anchor">#</a> 使用步骤</h3> <ol><li>先导入 <code>SpringMVC（spring-webmvc）</code>与<code>Servlet（javax.servlet-api）</code>的坐标（依赖）</li> <li>创建 SpringMVC 控制器类（等同于 Servlet 功能）
<ol><li>定义访问路径：<code>@RequestMapping(&quot;/xxx&quot;)</code></li> <li>定义返回：<code>@ResponseBody</code></li></ol></li> <li>初始化 SpringMVC 环境（同 Spring 环境）设定 SpringMVC 加载对应的 bean</li> <li>启动 Tomcat 服务器的时候要保证能加载到服务器的配置，初始化 Servlet 容器。加载 SpringMVC 环境，并设置 SpringMVC 技术处理的请求。
<ol><li>创建一个类，继承<code>AbstractDispatcherServletInitializer</code>并实现它的几个抽象方法。</li> <li>初始化一个<code>AnnotationConfigWebApplicationContext</code>并注册 SpringMvcConfig.class</li> <li>在 getServletMappings 方法中设置把所有进入 Tomcat 的请求都交由 SpringMVC 来处理。固定格式<code>return new String[]{&quot;/&quot;};</code></li></ol></li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/20221021164054.png" alt="入门案例总结"></li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/20221021164522.png" alt="入门案例工作流程分析"></li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/20221021171118.png" alt="Controller加载控制与业务bean加载控制"></li> <li>乱码处理：重写 <code>getServletFilters()</code>，<code>return new Filter[]{new CharacterEncodingFilter().setEncoding(&quot;UTF-8&quot;)};</code></li> <li>get 请求：在@Controller 中
<ol><li>注解<code>@RequestMapping(&quot;函数名，也是请求的 path&quot;)</code></li> <li>注解<code>@ResponseBody</code></li> <li>编写响应函数体，通过形参接收参数，通过<code>(@RequestParam(&quot;name&quot;) String username, ... )</code>设置参数别名，return 返回响应字符串</li></ol></li> <li>post 请求：
<ol><li>通过<code>x-www-form-urlencoded</code>发送时，Java 代码和 get 请求一样</li></ol></li> <li>参数传递：
<ol><li>普通参数如上</li> <li>POJO 参数：通过实体类来接收，使用时直接以形参注入</li> <li>嵌套 POJO 参数一样，请求时嵌套属性以 AA.bb 的形式请求</li> <li>数组参数：多个相同的属性会自动组成数组</li> <li>集合参数：通过<code>@RequestParam List&lt;String&gt; lists</code>来接收</li> <li>各种 JSON 数据（包括 POJO，POJO 集合）对象数组等：
<ol><li>添加依赖<code>jackson-databind</code></li> <li>SpringMvcConfig 中添加<code>@EnableWebMvc</code>注解</li> <li>通过<code>@RequestBody List&lt;String&gt; lists</code>来接收</li></ol></li></ol></li> <li><code>@RequestBody</code>与<code>@RequestParam</code>的区别：
<ol><li><code>@RequestParam</code>用于接收 url 地址传参，表单传参<code>application/x-www-form-urlencoded</code></li> <li><code>@RequestBody</code>用于接收 json 数据<code>application/json</code></li> <li><code>@PathVariable</code>用于接收路径参数，使用{参数名称}描述路径参数</li> <li>开发中，发送 json 格式数据为主，<code>@RequestBody</code>应用较广</li> <li>如果发送非 json 数据，选用<code>@RequestParam</code>接收请求参数</li> <li>采用 restful 进行开发，当参数数量较少时，例如 1 个，可以采用<code>@PathVariable</code>接收请求路径变量，通常用于传递 id 值</li></ol></li> <li>日期型参数接收：提前使用<code>@DateFormat(pattern=&quot;yyyy-MM-dd&quot;) Date date</code>进行格式约定，否则默认只能接收<code>yyyy/MM/dd</code>格式。底层是通过 Converter 接口重写的 convert 方法实现的转化。</li> <li>响应：
<ol><li>页面：直接在处理函数中返回页面的相对路径即可，不需要<code>@ResponseBody</code></li> <li>数据：
<ol><li>字符串：需要<code>@ResponseBody</code></li> <li>JSON：需要<code>@ResponseBody</code>--设置当前控制器返回值作为响应体，返回一个 POJO 对应的对象即可，是 jackson 实现的。是 HttpMessageConverter 接口转的。</li></ol></li></ol></li></ol> <h3 id="restful-风格"><a href="#restful-风格" class="header-anchor">#</a> RESTful 风格</h3> <ol><li>首先要遵循 restful 风格定义接口</li> <li>然后借助注解<code>@RequestMapping(&quot;函数名，也是请求的 path&quot;, method=RequestMethod.DELETE)</code>的第二个参数，定义接口行为</li> <li>对于路由参数，使用注解<code>@PathVariable</code>接收，同时要做<code>@RequestMapping(value=&quot;/xxx/{id}&quot;)</code>配置，跟前端路由参数一样。</li> <li>公共路径前缀通过在函数上添加注解<code>@RequestMapping(&quot;/commonPath&quot;)</code>实现简化。</li> <li>同上<code>@ResponseBody</code>注解也可以提取到函数外面，前提是所有响应方法都需要这个注解。</li> <li>在上面 4+5 中，可以用<code>@RestController</code>代替<code>@Controller</code>和<code>@ResponseBody</code>。</li> <li><code>@RequestMapping(value=&quot;&quot;, method=RequestMethod.POST)</code>===<code>@PostMapping(...)</code>，其他几种都有类似简化书写方式。</li> <li>设置对静态资源的访问放行：</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringMvcSupport</span> <span class="token keyword">extends</span> <span class="token class-name">WebMvcConfigurationSupport</span><span class="token punctuation">{</span>
   <span class="token annotation punctuation">@Override</span>
   <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">addResourceHandlers</span><span class="token punctuation">(</span><span class="token class-name">ResourceHandlerRegistry</span> registry<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// 当访问/pages/???的时候，走/pages目录下的内容</span>
      registry<span class="token punctuation">.</span><span class="token function">addResourceHandler</span><span class="token punctuation">(</span><span class="token string">&quot;/pages/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token string">&quot;/pages/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      registry<span class="token punctuation">.</span><span class="token function">addResourceHandler</span><span class="token punctuation">(</span><span class="token string">&quot;/js/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token string">&quot;/js/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      registry<span class="token punctuation">.</span><span class="token function">addResourceHandler</span><span class="token punctuation">(</span><span class="token string">&quot;/css/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token string">&quot;/css/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      registry<span class="token punctuation">.</span><span class="token function">addResourceHandler</span><span class="token punctuation">(</span><span class="token string">&quot;/plugins/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token string">&quot;/plugins/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="ssm-整合"><a href="#ssm-整合" class="header-anchor">#</a> SSM 整合</h2> <h2 id="学透-spring"><a href="#学透-spring" class="header-anchor">#</a> 学透 Spring</h2> <h3 id="sdkman"><a href="#sdkman" class="header-anchor">#</a> sdkman</h3> <p>管理 Java 版本，类似 nvm？也可以管理 Maven、groovy 等。</p> <ol><li><code>curl -s &quot;https://get.sdkman.io&quot; | bash</code>: 安装 sdkman</li> <li><code>source &quot;$HOME/.sdkman/bin/sdkman-init.sh&quot;</code>: 刷新环境变量，可以直接加到你的 shell 配置文件（比如 ~/.bash_profile、~/.zshrc 等）中，以便每次打开新终端时自动初始化 sdkman。</li> <li><code>sdk version</code></li> <li><code>sdk list java</code>: 获取当前操作系统可用的 JDK 信息</li> <li><code>sdk install java 11.0.18</code>: 安装特定版本 JDK</li> <li><code>sdk install java 14.0.1 /Library/Java/JavaVirtualMachines/jdk-14.0.1.jdk/Contents/Home</code>: 关联本地已安装 JDK</li> <li><code>sdk default java 11.0.18</code>: 设置默认版本（感觉并不管用，还得去改.zshrc 才会生效）</li> <li><code>sdk use java 11.0.18</code>: 使用某个 jdk 版本</li> <li><code>sdk uninstall java 8.0.252-open</code>: 移除 SDKMAN 中的某个特定版本</li> <li><code>sudo rm -rf /Library/Java/JavaVirtualMachines/jdk1.8.0_202.jdk</code>: 移除本地 jdk 版本</li> <li><code>ls /Library/Java/JavaVirtualMachines/</code>: Mac 上通过 .dmg 文件安装的 JDK 一般会在这个目录下</li> <li><code>sudo rm -rf /Library/Java/JavaVirtualMachines/jdk1.8.0_202.jdk</code>: 使用 rm 命令来删除对应的 JDK 目录</li> <li><code>sdk install maven</code>: 安装 Maven，安装前要确保已正确安装 JDK</li> <li>Maven 镜像仓库，阿里云：<code>https://maven.aliyun.com/</code>，按使用指南修改 Maven 安装目录下的<code>conf/settings.xml</code>文件；也可以在用户目录的<code>.m2</code>子目录中创建<code>settings.xml</code>文件，并设置相应配置内容。</li> <li><code>/Users/eric/.sdkman/candidates/maven/3.9.1/conf/settings.xml</code>: 配置举例</li> <li><code>brew cask install intellij-idea-ce</code>: 安装 idea 社区版或直接去官网下载</li> <li><code>IDEA-&gt;Help-&gt;Edit Custom VW Options</code>，在打开的 idea.vmoptions 文件中调整-Xms 和-Xmx 等 JVM 相关参数，让 ide 流畅运行</li> <li>通过<a href="https://start.spring.io" target="_blank" rel="nofollow noopener noreferrer">Spring Initializr<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>创建工程，打开网页，填写项目信息，点击生成，下载 helloworld.zip 压缩包</li> <li>Maven 设置 sdkman 的 settings.xml 为全局公用配置：
<ol><li>在<code>.zshrc</code>中设置环境变量：一般来说 sdkman 默认安装的位置都是一样的</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">SDKMAN_DIR</span><span class="token operator">=</span><span class="token environment constant">$HOME</span>/.sdkman
<span class="token builtin class-name">export</span> <span class="token assign-left variable">M2_HOME</span><span class="token operator">=</span><span class="token variable">$SDKMAN_DIR</span>/candidates/maven/current
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="2"><li><code>mkdir -p $M2_HOME/conf</code>，如果没有权限则<code>sudo chown -R $USER $M2_HOME</code></li> <li><code>cp /path/to/your/settings.xml $M2_HOME/conf/</code></li> <li>这样当你切换 Maven 版本之后，也依然会使用公用的 settings</li></ol></li></ol> <h3 id="快速新建一个-springboot-项目"><a href="#快速新建一个-springboot-项目" class="header-anchor">#</a> 快速新建一个 SpringBoot 项目</h3> <ol start="0"><li><p>一个 web 开发框架</p></li> <li><p>在这个<a href="https://start.spring.io/" target="_blank" rel="nofollow noopener noreferrer">网站<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>选择配置，作用可以理解为前端的 vue-cli、create-react-app 等脚手架，选好配置依赖之后下载；</p></li> <li><p>idea 中打开刚才下载的项目</p></li> <li><p>项目结构：</p> <ol><li><code>src/main/java/com/example/demo/DemoApplication.java</code>：主类，启动类</li> <li><code>src/main/java/com/example/demo/controller/HelloController.java</code>：控制器类</li> <li><code>src/main/resources/application.properties</code>：配置文件</li> <li><code>src/main/resources/static</code>：静态资源目录</li> <li><code>src/main/resources/templates</code>：模板目录</li></ol></li> <li><p><code>DemoApplication.java</code>：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">DemoApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li> <li><p><code>HelloController.java</code>：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@GetMapping</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Hello, World!&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li> <li><p><code>application.properties</code>：</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">server.port</span><span class="token punctuation">=</span><span class="token value attr-value">8080</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>运行项目，访问<code>http://localhost:8080/hello</code>，会看到<code>Hello, World!</code></p></li></ol> <h3 id="springboot-常用注解"><a href="#springboot-常用注解" class="header-anchor">#</a> SpringBoot 常用注解</h3> <ol><li><code>@SpringBootApplication</code>：启动类注解，包含<code>@Configuration</code>、<code>@EnableAutoConfiguration</code>、<code>@ComponentScan</code></li> <li><code>@Configuration</code>：配置类注解，用于定义配置类</li> <li><code>@EnableAutoConfiguration</code>：自动配置类注解，用于启用自动配置</li> <li><code>@ComponentScan</code>：组件扫描类注解，用于指定扫描组件的包路径</li> <li><code>@RestController</code>：组合注解，用于定义控制器类，包含<code>@Controller</code>和<code>@ResponseBody</code></li> <li><code>@RequestMapping</code>：请求映射注解，用于定义请求路径和请求方法</li> <li><code>@GetMapping</code>：组合注解，用于定义 GET 请求路径</li> <li><code>@PostMapping</code>：组合注解，用于定义 POST 请求路径</li> <li><code>@PutMapping</code>：组合注解，用于定义 PUT 请求路径</li> <li><code>@DeleteMapping</code>：组合注解，用于定义 DELETE 请求路径</li> <li><code>@PathVariable</code>：路径变量注解，用于获取路径变量值</li></ol> <h3 id="依赖管理"><a href="#依赖管理" class="header-anchor">#</a> 依赖管理</h3> <ol><li>在<code>pom.xml</code>中添加依赖：<div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li>在<code>pom.xml</code>中添加插件：<div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li>在<code>pom.xml</code>中添加仓库：<div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>aliyun<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>https://maven.aliyun.com/repository/public<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li>在<code>pom.xml</code>中添加属性：<div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ol> <h3 id="springboot-配置文件"><a href="#springboot-配置文件" class="header-anchor">#</a> SpringBoot 配置文件</h3> <ol><li><code>application.properties</code>：用于配置 SpringBoot 应用程序的属性</li> <li><code>application.yml</code>：用于配置 SpringBoot 应用程序的属性，使用 YAML 格式</li> <li>配置文件的优先级：<code>application.properties</code> &gt; <code>application.yml</code> &gt; <code>application-{profile}.properties</code> &gt; <code>application-{profile}.yml</code></li> <li>application.yml 示例：</li></ol> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">profiles</span><span class="token punctuation">:</span>
    <span class="token comment"># 默认激活 dev 环境</span>
    <span class="token key atrule">active</span><span class="token punctuation">:</span> dev
  <span class="token comment">#  jackson:</span>
  <span class="token comment">#    # 设置后台返参，若字段值为 null, 则不返回</span>
  <span class="token comment">#    default-property-inclusion: non_null</span>
  <span class="token comment">#    # 设置日期字段格式</span>
  <span class="token comment">#    date-format: yyyy-MM-dd HH:mm:ss</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span> <span class="token comment"># 配置数据库连接</span>
  <span class="token comment">#    p6spy组件的数据库驱动</span>
  <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.p6spy.engine.spy.P6SpyDriver
  <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>p6spy<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//127.0.0.1<span class="token punctuation">:</span>3306/weblog<span class="token punctuation">?</span>useUnicode=true<span class="token important">&amp;characterEncoding=UTF-8&amp;autoReconnect=true&amp;useSSL=false&amp;zeroDateTimeBehavior=convertToNull</span>
  <span class="token comment">#    JDBC的数据库驱动</span>
  <span class="token comment">#    driver-class-name: com.mysql.cj.jdbc.Driver</span>
  <span class="token comment">#    url: jdbc:mysql://127.0.0.1:3306/weblog?useUnicode=true&amp;characterEncoding=UTF-8&amp;autoReconnect=true&amp;useSSL=false&amp;zeroDateTimeBehavior=convertToNull</span>
  <span class="token key atrule">username</span><span class="token punctuation">:</span> root
  <span class="token key atrule">password</span><span class="token punctuation">:</span> xxx
  <span class="token key atrule">hikari</span><span class="token punctuation">:</span>
    <span class="token key atrule">minimum-idle</span><span class="token punctuation">:</span> <span class="token number">5</span>
    <span class="token key atrule">maximum-pool-size</span><span class="token punctuation">:</span> <span class="token number">20</span>
    <span class="token key atrule">auto-commit</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">idle-timeout</span><span class="token punctuation">:</span> <span class="token number">30000</span>
    <span class="token key atrule">pool-name</span><span class="token punctuation">:</span> Weblog<span class="token punctuation">-</span>HikariCP
    <span class="token key atrule">max-lifetime</span><span class="token punctuation">:</span> <span class="token number">1800000</span>
    <span class="token key atrule">connection-timeout</span><span class="token punctuation">:</span> <span class="token number">30000</span>
    <span class="token key atrule">connection-test-query</span><span class="token punctuation">:</span> SELECT 1
<span class="token key atrule">security</span><span class="token punctuation">:</span>
  <span class="token comment"># 自定义登录用户名、密码</span>
  <span class="token key atrule">user</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> admin <span class="token comment"># 登录用户名</span>
    <span class="token key atrule">password</span><span class="token punctuation">:</span> xxx <span class="token comment"># 登录密码</span>
<span class="token key atrule">jwt</span><span class="token punctuation">:</span>
  <span class="token comment"># 过期时间</span>
  <span class="token key atrule">expiration</span><span class="token punctuation">:</span> <span class="token number">86400</span>
  <span class="token comment"># 签名算法</span>
  <span class="token key atrule">algorithm</span><span class="token punctuation">:</span> HS512
  <span class="token comment"># 签发人 瞎写的</span>
  <span class="token key atrule">issuer</span><span class="token punctuation">:</span> ericyang
  <span class="token comment"># 秘钥</span>
  <span class="token key atrule">secret</span><span class="token punctuation">:</span> xxx
<span class="token key atrule">logging</span><span class="token punctuation">:</span>
  <span class="token key atrule">level</span><span class="token punctuation">:</span>
    <span class="token key atrule">root</span><span class="token punctuation">:</span> info
    <span class="token key atrule">com.example.demo</span><span class="token punctuation">:</span> debug <span class="token comment"># trace级别更低，比debug输出的信息更多？</span>
  <span class="token key atrule">pattern</span><span class="token punctuation">:</span>
    <span class="token key atrule">console</span><span class="token punctuation">:</span> <span class="token string">&quot;%p%m%n&quot;</span>
<span class="token comment"># springboot默认使用Tomcat，配置最大连接数等可以控制程序同时处理的请求数：max-connections + accept-count</span>
<span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">tomcat</span><span class="token punctuation">:</span>
    <span class="token key atrule">threads</span><span class="token punctuation">:</span>
      <span class="token comment"># 最少线程数</span>
      <span class="token key atrule">min-spare</span><span class="token punctuation">:</span> <span class="token number">10</span>
      <span class="token key atrule">max</span><span class="token punctuation">:</span> <span class="token number">20</span>
    <span class="token comment"># 最大连接数</span>
    <span class="token key atrule">max-connections</span><span class="token punctuation">:</span> <span class="token number">8192</span> <span class="token comment"># 默认8192</span>
    <span class="token comment"># 最大等待数</span>
    <span class="token key atrule">accept-count</span><span class="token punctuation">:</span> <span class="token number">100</span> <span class="token comment"># 默认100</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div><h3 id="springboot-自动配置"><a href="#springboot-自动配置" class="header-anchor">#</a> SpringBoot 自动配置</h3> <ol><li>SpringBoot 会根据类路径中的依赖自动配置应用程序</li> <li>自动配置类位于<code>spring-boot-autoconfigure</code>模块中</li> <li>自动配置类使用<code>@Conditional</code>注解来决定是否应用配置</li></ol> <h3 id="springboot-测试"><a href="#springboot-测试" class="header-anchor">#</a> SpringBoot 测试</h3> <ol><li>在<code>pom.xml</code>中添加测试依赖：<div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li>使用<code>@SpringBootTest</code>注解来启动测试应用程序</li> <li>使用<code>@Autowired</code>注解来注入测试所需的依赖</li> <li>使用<code>@Test</code>注解来定义测试方法</li></ol> <h3 id="springboot-部署"><a href="#springboot-部署" class="header-anchor">#</a> SpringBoot 部署</h3> <ol><li>使用<code>mvn clean package</code>命令打包 SpringBoot 应用程序</li> <li>构建：<code>mvn install</code></li> <li>构建跳过测试类 <code>mvn install -Dmaven.test.skip=true</code></li> <li>生成的 JAR 文件位于<code>target</code>目录下</li> <li>使用<code>java -jar your-application.jar</code>命令启动应用程序</li> <li>使用<code>nohup java -jar your-application.jar &amp;</code>命令在后台启动应用程序</li> <li>使用<code>systemd</code>或<code>init.d</code>脚本来管理应用程序的启动和停止</li></ol> <h3 id="springboot-安全"><a href="#springboot-安全" class="header-anchor">#</a> SpringBoot 安全</h3> <ol><li>使用<code>spring-boot-starter-security</code>依赖来添加安全功能</li> <li>配置安全规则，例如使用<code>@EnableWebSecurity</code>注解来启用安全配置</li> <li>使用<code>@Override</code>方法来重写安全配置，例如配置登录页面、权限等</li> <li>使用<code>@PreAuthorize</code>、<code>@PostAuthorize</code>、<code>@Secured</code>等注解来控制方法的访问权限</li></ol> <h3 id="springboot-日志"><a href="#springboot-日志" class="header-anchor">#</a> SpringBoot 日志</h3> <ol><li>使用<code>spring-boot-starter-logging</code>依赖来添加日志功能</li> <li>配置日志级别，例如使用<code>logging.level.root=INFO</code>来设置根日志级别</li> <li>配置日志文件，例如使用<code>logging.file.name=app.log</code>来设置日志文件名</li> <li>使用<code>@Slf4j</code>注解来简化日志记录</li></ol> <h3 id="springboot-配置中心"><a href="#springboot-配置中心" class="header-anchor">#</a> SpringBoot 配置中心</h3> <ol><li>使用<code>spring-cloud-config</code>依赖来添加配置中心功能</li> <li>配置配置中心的地址，例如使用<code>spring.cloud.config.uri=http://localhost:8888</code>来设置配置中心地址</li> <li>使用<code>@Value</code>注解来注入配置中心的配置</li> <li>使用<code>@ConfigurationProperties</code>注解来注入配置中心的配置到配置类中</li></ol> <h3 id="springboot-微服务"><a href="#springboot-微服务" class="header-anchor">#</a> SpringBoot 微服务</h3> <ol><li>使用<code>spring-cloud-starter-netflix-eureka-client</code>依赖来添加 Eureka 客户端功能</li> <li>配置 Eureka 客户端的地址，例如使用<code>eureka.client.serviceUrl.defaultZone=http://localhost:8761/eureka/</code>来设置 Eureka 客户端地址</li> <li>使用<code>@EnableEurekaClient</code>注解来启用 Eureka 客户端</li> <li>使用<code>@EnableDiscoveryClient</code>注解来启用服务发现功能</li></ol> <h3 id="springboot-任务调度"><a href="#springboot-任务调度" class="header-anchor">#</a> SpringBoot 任务调度</h3> <ol><li>使用<code>spring-boot-starter-quartz</code>依赖来添加 Quartz 任务调度功能</li> <li>配置 Quartz</li> <li>任务调度类使用<code>@Component</code>注解来定义</li> <li>任务调度方法使用<code>@Scheduled</code>注解来定义</li></ol> <h3 id="springboot-数据库"><a href="#springboot-数据库" class="header-anchor">#</a> SpringBoot 数据库</h3> <ol><li>使用<code>spring-boot-starter-data-jpa</code>依赖来添加 JPA 数据库访问功能</li> <li>配置数据库连接信息，例如使用<code>spring.datasource.url=jdbc:mysql://localhost:3306/your_database</code>来设置数据库连接信息</li> <li>使用<code>@Entity</code>注解来定义实体类</li> <li>使用<code>@Repository</code>注解来定义数据访问层</li></ol> <h3 id="springboot-消息队列"><a href="#springboot-消息队列" class="header-anchor">#</a> SpringBoot 消息队列</h3> <ol><li>使用<code>spring-boot-starter-activemq</code>依赖来添加 ActiveMQ 消息队列功能</li> <li>配置 ActiveMQ 连接信息，例如使用<code>spring.activemq.broker-url=tcp://localhost:61616</code>来设置 ActiveMQ 连接信息</li> <li>使用<code>@JmsListener</code>注解来监听消息队列中的消息</li> <li>使用<code>JmsTemplate</code>来发送消息</li></ol> <h3 id="springboot-文件上传"><a href="#springboot-文件上传" class="header-anchor">#</a> SpringBoot 文件上传</h3> <ol><li>使用<code>spring-boot-starter-web</code>依赖来添加 Web 功能</li> <li>配置文件上传大小限制，例如使用<code>spring.servlet.multipart.max-file-size=10MB</code>来设置文件上传大小限制</li> <li>使用<code>MultipartFile</code>来接收文件上传</li> <li>使用<code>File</code>来保存上传的文件</li></ol> <h3 id="springboot-文件下载"><a href="#springboot-文件下载" class="header-anchor">#</a> SpringBoot 文件下载</h3> <ol><li>使用<code>spring-boot-starter-web</code>依赖来添加 Web 功能</li> <li>使用<code>ResponseEntity</code>来设置响应头和响应体</li> <li>使用<code>InputStreamResource</code>来设置响应体</li> <li>使用<code>HttpServletResponse</code>来设置响应头和响应体</li></ol> <h3 id="springboot-文件压缩"><a href="#springboot-文件压缩" class="header-anchor">#</a> SpringBoot 文件压缩</h3> <ol><li>使用<code>spring-boot-starter-web</code>依赖来添加 Web 功能</li> <li>使用<code>ZipOutputStream</code>来压缩文件</li> <li>使用<code>ZipInputStream</code>来解压缩文件</li></ol> <h3 id="springboot-文件解压缩"><a href="#springboot-文件解压缩" class="header-anchor">#</a> SpringBoot 文件解压缩</h3> <ol><li>使用<code>spring-boot-starter-web</code>依赖来添加 Web 功能</li> <li>使用<code>ZipOutputStream</code>来压缩文件</li> <li>使用<code>ZipInputStream</code>来解压缩文件</li></ol> <h3 id="springboot-文件加密"><a href="#springboot-文件加密" class="header-anchor">#</a> SpringBoot 文件加密</h3> <ol><li>使用<code>spring-boot-starter-web</code>依赖来添加 Web 功能</li> <li>使用<code>Cipher</code>类来加密和解密文件</li></ol></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">1/12/2025</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/handbook/Java/Maven.html" class="prev">
            Maven
          </a></span> <span class="next"><a href="/handbook/Java/SQL.html">
            MySQL笔记
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-2" data-v-cb1513f6><a href="/handbook/Java/Spring.html#spring" class="sidebar-link reco-side-spring" data-v-cb1513f6>Spring</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#spring-boot-注解类型" class="sidebar-link reco-side-spring-boot-注解类型" data-v-cb1513f6>Spring-Boot 注解类型</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#项目结构" class="sidebar-link reco-side-项目结构" data-v-cb1513f6>项目结构</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#ioc-控制反转" class="sidebar-link reco-side-ioc-控制反转" data-v-cb1513f6>IoC 控制反转</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#使用" class="sidebar-link reco-side-使用" data-v-cb1513f6>使用</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#bean-基础配置" class="sidebar-link reco-side-bean-基础配置" data-v-cb1513f6>bean 基础配置</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#依赖注入" class="sidebar-link reco-side-依赖注入" data-v-cb1513f6>依赖注入</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#bean-的作用域" class="sidebar-link reco-side-bean-的作用域" data-v-cb1513f6>Bean 的作用域</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#bean-的懒加载" class="sidebar-link reco-side-bean-的懒加载" data-v-cb1513f6>Bean 的懒加载</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#bean-初始化及销毁逻辑处理" class="sidebar-link reco-side-bean-初始化及销毁逻辑处理" data-v-cb1513f6>Bean 初始化及销毁逻辑处理</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#bean-属性继承" class="sidebar-link reco-side-bean-属性继承" data-v-cb1513f6>Bean 属性继承</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#bean-的依赖注入" class="sidebar-link reco-side-bean-的依赖注入" data-v-cb1513f6>Bean 的依赖注入</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#bean-的生命周期" class="sidebar-link reco-side-bean-的生命周期" data-v-cb1513f6>Bean 的生命周期</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#通过注解设置-bean-的作用域" class="sidebar-link reco-side-通过注解设置-bean-的作用域" data-v-cb1513f6>通过注解设置 Bean 的作用域</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#通过注解设置-bean-的懒加载" class="sidebar-link reco-side-通过注解设置-bean-的懒加载" data-v-cb1513f6>通过注解设置 Bean 的懒加载</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#通过注解实现-bean-的初始化及销毁" class="sidebar-link reco-side-通过注解实现-bean-的初始化及销毁" data-v-cb1513f6>通过注解实现 Bean 的初始化及销毁</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#加载-properties-配置文件" class="sidebar-link reco-side-加载-properties-配置文件" data-v-cb1513f6>加载 properties 配置文件</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#ioc-容器" class="sidebar-link reco-side-ioc-容器" data-v-cb1513f6>IOC 容器</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#注解模式开发" class="sidebar-link reco-side-注解模式开发" data-v-cb1513f6>注解模式开发</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#aop" class="sidebar-link reco-side-aop" data-v-cb1513f6>AOP</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#spring-事务" class="sidebar-link reco-side-spring-事务" data-v-cb1513f6>Spring 事务</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#spring-中有哪些方法可以实现异步流式接口防止接口超时" class="sidebar-link reco-side-spring-中有哪些方法可以实现异步流式接口防止接口超时" data-v-cb1513f6>Spring 中有哪些方法可以实现异步流式接口防止接口超时？</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/Java/Spring.html#springmvc" class="sidebar-link reco-side-springmvc" data-v-cb1513f6>SpringMVC</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#使用步骤" class="sidebar-link reco-side-使用步骤" data-v-cb1513f6>使用步骤</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#restful-风格" class="sidebar-link reco-side-restful-风格" data-v-cb1513f6>RESTful 风格</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/Java/Spring.html#ssm-整合" class="sidebar-link reco-side-ssm-整合" data-v-cb1513f6>SSM 整合</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/Java/Spring.html#学透-spring" class="sidebar-link reco-side-学透-spring" data-v-cb1513f6>学透 Spring</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#sdkman" class="sidebar-link reco-side-sdkman" data-v-cb1513f6>sdkman</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#快速新建一个-springboot-项目" class="sidebar-link reco-side-快速新建一个-springboot-项目" data-v-cb1513f6>快速新建一个 SpringBoot 项目</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#springboot-常用注解" class="sidebar-link reco-side-springboot-常用注解" data-v-cb1513f6>SpringBoot 常用注解</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#依赖管理" class="sidebar-link reco-side-依赖管理" data-v-cb1513f6>依赖管理</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#springboot-配置文件" class="sidebar-link reco-side-springboot-配置文件" data-v-cb1513f6>SpringBoot 配置文件</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#springboot-自动配置" class="sidebar-link reco-side-springboot-自动配置" data-v-cb1513f6>SpringBoot 自动配置</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#springboot-测试" class="sidebar-link reco-side-springboot-测试" data-v-cb1513f6>SpringBoot 测试</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#springboot-部署" class="sidebar-link reco-side-springboot-部署" data-v-cb1513f6>SpringBoot 部署</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#springboot-安全" class="sidebar-link reco-side-springboot-安全" data-v-cb1513f6>SpringBoot 安全</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#springboot-日志" class="sidebar-link reco-side-springboot-日志" data-v-cb1513f6>SpringBoot 日志</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#springboot-配置中心" class="sidebar-link reco-side-springboot-配置中心" data-v-cb1513f6>SpringBoot 配置中心</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#springboot-微服务" class="sidebar-link reco-side-springboot-微服务" data-v-cb1513f6>SpringBoot 微服务</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#springboot-任务调度" class="sidebar-link reco-side-springboot-任务调度" data-v-cb1513f6>SpringBoot 任务调度</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#springboot-数据库" class="sidebar-link reco-side-springboot-数据库" data-v-cb1513f6>SpringBoot 数据库</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#springboot-消息队列" class="sidebar-link reco-side-springboot-消息队列" data-v-cb1513f6>SpringBoot 消息队列</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#springboot-文件上传" class="sidebar-link reco-side-springboot-文件上传" data-v-cb1513f6>SpringBoot 文件上传</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#springboot-文件下载" class="sidebar-link reco-side-springboot-文件下载" data-v-cb1513f6>SpringBoot 文件下载</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#springboot-文件压缩" class="sidebar-link reco-side-springboot-文件压缩" data-v-cb1513f6>SpringBoot 文件压缩</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#springboot-文件解压缩" class="sidebar-link reco-side-springboot-文件解压缩" data-v-cb1513f6>SpringBoot 文件解压缩</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Java/Spring.html#springboot-文件加密" class="sidebar-link reco-side-springboot-文件加密" data-v-cb1513f6>SpringBoot 文件加密</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div></div></div></div>
    <script src="/assets/js/app.eb0be052.js" defer></script><script src="/assets/js/4.e4a90c70.js" defer></script><script src="/assets/js/3.ad1ccd56.js" defer></script><script src="/assets/js/2.0240bc78.js" defer></script><script src="/assets/js/1.b94e320b.js" defer></script><script src="/assets/js/66.6f5c3310.js" defer></script>
  </body>
</html>
