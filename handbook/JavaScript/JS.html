<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript Tips | 木易的OT</title>
    <meta name="generator" content="VuePress 1.9.10">
    <script>
        (function() {
          if (location.href.indexOf('github.io') > -1 || location.href.indexOf('gitee.io') > -1) {
             location.href = 'https://ericyangxd.top'
           }
        })();
        </script><script type='application/ld+json'>
          {
            "@context": "https://schema.org",
            "@type": "Article",
            "headline": "JavaScript Tips",
            "url": "https://ericyangxd.top/handbook/JavaScript/JS.html",
            "image": [
              "https://ericyangxd.top/logo.png"
              ],
            "datePublished": "2021-12-29T00:00:00.000Z",
            "dateModified": "2024-08-08T00:00:00.000Z",
            "author": [{
                "@type": "Person",
                "name": "EricYangXD",
                "url": "https://github.com/EricYangXD/ericyangxd.github.io"
            }]
          }
      </script>
    <meta name="description" content="前端面试,React,Vue,JavaScript,CSS,HTML,HTTP,HTTPS,websocket,UDP,TCP,Webpack,算法,数据结构,LeetCode,小程序,油猴,计算机网络,NodeJs,Vite,Antdesign,EricYangXD,Eric,Chrome,Android,V8,Mac,git,网络安全,开发技巧,路由,router,诗歌,金句,源码,面试,Docker,Shell,clash,Windows">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="keywords" content="前端面试,React,Vue,JavaScript,CSS,HTML,HTTP,TCP,Webpack,算法,数据结构,LeetCode,小程序,油猴,计算机网络,NodeJs,Vite,Antdesign,EricYangXD,Eric,Chrome,Android,V8,Mac,git,网络安全,开发技巧,路由,router,话费,充值,诗歌,金句,源码,面试,docker">
    
    <link rel="preload" href="/assets/css/0.styles.82c89da6.css" as="style"><link rel="preload" href="/assets/js/app.99147766.js" as="script"><link rel="preload" href="/assets/js/4.e4331d91.js" as="script"><link rel="preload" href="/assets/js/3.561be8e5.js" as="script"><link rel="preload" href="/assets/js/2.b25d4684.js" as="script"><link rel="preload" href="/assets/js/1.c7cb60d4.js" as="script"><link rel="preload" href="/assets/js/76.f923c4b5.js" as="script"><link rel="prefetch" href="/assets/js/10.26f8cbb6.js"><link rel="prefetch" href="/assets/js/100.29bde1a2.js"><link rel="prefetch" href="/assets/js/101.9866beb5.js"><link rel="prefetch" href="/assets/js/102.466d720a.js"><link rel="prefetch" href="/assets/js/103.cdcddc52.js"><link rel="prefetch" href="/assets/js/104.a6f9d639.js"><link rel="prefetch" href="/assets/js/105.041b8b30.js"><link rel="prefetch" href="/assets/js/106.553d3650.js"><link rel="prefetch" href="/assets/js/107.1b9b8f98.js"><link rel="prefetch" href="/assets/js/108.0de088d8.js"><link rel="prefetch" href="/assets/js/109.71f09044.js"><link rel="prefetch" href="/assets/js/11.ec88ce3f.js"><link rel="prefetch" href="/assets/js/110.efe683b8.js"><link rel="prefetch" href="/assets/js/111.5901eb1d.js"><link rel="prefetch" href="/assets/js/112.255fe3ee.js"><link rel="prefetch" href="/assets/js/113.789e77a7.js"><link rel="prefetch" href="/assets/js/114.a3723ab4.js"><link rel="prefetch" href="/assets/js/115.0ae94bcd.js"><link rel="prefetch" href="/assets/js/116.f670923e.js"><link rel="prefetch" href="/assets/js/117.231ea54e.js"><link rel="prefetch" href="/assets/js/118.28bea9c3.js"><link rel="prefetch" href="/assets/js/119.2dc8cee9.js"><link rel="prefetch" href="/assets/js/120.369acd11.js"><link rel="prefetch" href="/assets/js/121.a6986fb2.js"><link rel="prefetch" href="/assets/js/122.675327d5.js"><link rel="prefetch" href="/assets/js/123.10a33a10.js"><link rel="prefetch" href="/assets/js/124.347593f8.js"><link rel="prefetch" href="/assets/js/125.77e55acf.js"><link rel="prefetch" href="/assets/js/126.a71cae68.js"><link rel="prefetch" href="/assets/js/127.d1d19722.js"><link rel="prefetch" href="/assets/js/128.1fa816b7.js"><link rel="prefetch" href="/assets/js/129.4d4b9bdb.js"><link rel="prefetch" href="/assets/js/130.122ef202.js"><link rel="prefetch" href="/assets/js/131.37749659.js"><link rel="prefetch" href="/assets/js/132.9e8acf7e.js"><link rel="prefetch" href="/assets/js/133.1a0649d8.js"><link rel="prefetch" href="/assets/js/134.87b07376.js"><link rel="prefetch" href="/assets/js/135.9263ac55.js"><link rel="prefetch" href="/assets/js/136.3a8619c4.js"><link rel="prefetch" href="/assets/js/137.c101b8ca.js"><link rel="prefetch" href="/assets/js/138.786b1940.js"><link rel="prefetch" href="/assets/js/14.2a1415d9.js"><link rel="prefetch" href="/assets/js/15.b8e5af0a.js"><link rel="prefetch" href="/assets/js/16.ed296b89.js"><link rel="prefetch" href="/assets/js/17.d9e3ba74.js"><link rel="prefetch" href="/assets/js/18.8ddab221.js"><link rel="prefetch" href="/assets/js/19.57a74dfb.js"><link rel="prefetch" href="/assets/js/20.e3da0919.js"><link rel="prefetch" href="/assets/js/21.546b406c.js"><link rel="prefetch" href="/assets/js/22.9450f156.js"><link rel="prefetch" href="/assets/js/23.c854b682.js"><link rel="prefetch" href="/assets/js/24.877c6c49.js"><link rel="prefetch" href="/assets/js/25.1110b637.js"><link rel="prefetch" href="/assets/js/26.3f26d858.js"><link rel="prefetch" href="/assets/js/27.533548d8.js"><link rel="prefetch" href="/assets/js/28.98a340e2.js"><link rel="prefetch" href="/assets/js/29.edf59bdf.js"><link rel="prefetch" href="/assets/js/30.b7cf2b52.js"><link rel="prefetch" href="/assets/js/31.1fe66269.js"><link rel="prefetch" href="/assets/js/32.e46a6d14.js"><link rel="prefetch" href="/assets/js/33.db6ae149.js"><link rel="prefetch" href="/assets/js/34.66c83798.js"><link rel="prefetch" href="/assets/js/35.1f8028c0.js"><link rel="prefetch" href="/assets/js/36.86d9fc47.js"><link rel="prefetch" href="/assets/js/37.c2037205.js"><link rel="prefetch" href="/assets/js/38.334016b8.js"><link rel="prefetch" href="/assets/js/39.a4f75b3a.js"><link rel="prefetch" href="/assets/js/40.71d69a74.js"><link rel="prefetch" href="/assets/js/41.8319178d.js"><link rel="prefetch" href="/assets/js/42.bb4de8c4.js"><link rel="prefetch" href="/assets/js/43.e8ab1b54.js"><link rel="prefetch" href="/assets/js/44.23ce8349.js"><link rel="prefetch" href="/assets/js/45.cd99ff4b.js"><link rel="prefetch" href="/assets/js/46.49efbfee.js"><link rel="prefetch" href="/assets/js/47.667b3ec5.js"><link rel="prefetch" href="/assets/js/48.7a1a058b.js"><link rel="prefetch" href="/assets/js/49.4d17fd69.js"><link rel="prefetch" href="/assets/js/5.41516153.js"><link rel="prefetch" href="/assets/js/50.4224961a.js"><link rel="prefetch" href="/assets/js/51.94b8c696.js"><link rel="prefetch" href="/assets/js/52.db0b001f.js"><link rel="prefetch" href="/assets/js/53.6b5a2ceb.js"><link rel="prefetch" href="/assets/js/54.a3f77cae.js"><link rel="prefetch" href="/assets/js/55.03261827.js"><link rel="prefetch" href="/assets/js/56.e77c4aeb.js"><link rel="prefetch" href="/assets/js/57.5f79b777.js"><link rel="prefetch" href="/assets/js/58.7e0e7784.js"><link rel="prefetch" href="/assets/js/59.b2cd4369.js"><link rel="prefetch" href="/assets/js/6.dca3a5c8.js"><link rel="prefetch" href="/assets/js/60.0ab70b0b.js"><link rel="prefetch" href="/assets/js/61.2c476e7e.js"><link rel="prefetch" href="/assets/js/62.a341c013.js"><link rel="prefetch" href="/assets/js/63.e0236199.js"><link rel="prefetch" href="/assets/js/64.8d9b951a.js"><link rel="prefetch" href="/assets/js/65.75acef63.js"><link rel="prefetch" href="/assets/js/66.894e8891.js"><link rel="prefetch" href="/assets/js/67.715c432e.js"><link rel="prefetch" href="/assets/js/68.86ac5e9b.js"><link rel="prefetch" href="/assets/js/69.3603dac5.js"><link rel="prefetch" href="/assets/js/7.8f6e299c.js"><link rel="prefetch" href="/assets/js/70.22777af1.js"><link rel="prefetch" href="/assets/js/71.06b60850.js"><link rel="prefetch" href="/assets/js/72.0081924d.js"><link rel="prefetch" href="/assets/js/73.8497db2b.js"><link rel="prefetch" href="/assets/js/74.cb9f2349.js"><link rel="prefetch" href="/assets/js/75.bac03168.js"><link rel="prefetch" href="/assets/js/77.547080f4.js"><link rel="prefetch" href="/assets/js/78.c7a4e5e2.js"><link rel="prefetch" href="/assets/js/79.91802f97.js"><link rel="prefetch" href="/assets/js/8.41d4a20d.js"><link rel="prefetch" href="/assets/js/80.4ce368d7.js"><link rel="prefetch" href="/assets/js/81.dedde27d.js"><link rel="prefetch" href="/assets/js/82.f886b29f.js"><link rel="prefetch" href="/assets/js/83.7d8007c6.js"><link rel="prefetch" href="/assets/js/84.28cca9fc.js"><link rel="prefetch" href="/assets/js/85.14ca8c56.js"><link rel="prefetch" href="/assets/js/86.d587da06.js"><link rel="prefetch" href="/assets/js/87.9fe70bc2.js"><link rel="prefetch" href="/assets/js/88.b8cc8536.js"><link rel="prefetch" href="/assets/js/89.5cdffa25.js"><link rel="prefetch" href="/assets/js/9.492c22f0.js"><link rel="prefetch" href="/assets/js/90.ddc619a0.js"><link rel="prefetch" href="/assets/js/91.3a73d293.js"><link rel="prefetch" href="/assets/js/92.20a597d9.js"><link rel="prefetch" href="/assets/js/93.920bff8f.js"><link rel="prefetch" href="/assets/js/94.519a97aa.js"><link rel="prefetch" href="/assets/js/95.f01f7efc.js"><link rel="prefetch" href="/assets/js/96.f47a8eeb.js"><link rel="prefetch" href="/assets/js/97.b7bfbef6.js"><link rel="prefetch" href="/assets/js/98.098995c6.js"><link rel="prefetch" href="/assets/js/99.a24f82d6.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.bd007aa5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.82c89da6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-130b300a><div data-v-130b300a><div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-130b300a data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>木易的OT</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>前端面试,React,Vue,JavaScript,CSS,HTML,HTTP,HTTPS,websocket,UDP,TCP,Webpack,算法,数据结构,LeetCode,小程序,油猴,计算机网络,NodeJs,Vite,Antdesign,EricYangXD,Eric,Chrome,Android,V8,Mac,git,网络安全,开发技巧,路由,router,诗歌,金句,源码,面试,Docker,Shell,clash,Windows</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>EricYangXD</span>
            
          <!---->
          2024
        </a></span></div></div> <div class="hide" data-v-130b300a><header class="navbar" data-v-130b300a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">木易的OT</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      木易的OT
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/EricYangXD" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/2295436007445021" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-130b300a></div> <aside class="sidebar" data-v-130b300a><div class="personal-info-wrapper" data-v-39576ba9 data-v-130b300a><!----> <h3 class="name" data-v-39576ba9>
    EricYangXD
  </h3> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>100</h3> <h6 data-v-39576ba9>文章</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>0</h3> <h6 data-v-39576ba9>标签</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      木易的OT
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/EricYangXD" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/2295436007445021" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/" class="sidebar-heading clickable router-link-active"><span>About</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Android</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>LeetCode</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/handbook/JavaScript/FrontEnd1.html" class="sidebar-link">前端开发技巧(1)</a></li><li><a href="/handbook/JavaScript/FrontEnd2.html" class="sidebar-link">前端开发技巧(2)</a></li><li><a href="/handbook/JavaScript/FrontEnd3.html" class="sidebar-link">前端开发技巧(3)</a></li><li><a href="/handbook/JavaScript/Api.html" class="sidebar-link">APIs</a></li><li><a href="/handbook/JavaScript/Promise.html" class="sidebar-link">手写Promise</a></li><li><a href="/handbook/JavaScript/Quill.html" class="sidebar-link">Quill编辑器</a></li><li><a href="/handbook/JavaScript/RegExp.html" class="sidebar-link">正则表达式</a></li><li><a href="/handbook/JavaScript/TS.html" class="sidebar-link">TypeScript</a></li><li><a href="/handbook/JavaScript/JS.html" aria-current="page" class="active sidebar-link">JavaScript</a></li><li><a href="/handbook/JavaScript/Cojs.html" class="sidebar-link">co.js</a></li><li><a href="/handbook/JavaScript/Function1.html" class="sidebar-link">手写函数1</a></li><li><a href="/handbook/JavaScript/Function2.html" class="sidebar-link">手写函数2</a></li><li><a href="/handbook/JavaScript/PackageManageTools.html" class="sidebar-link">包管理工具</a></li><li><a href="/handbook/JavaScript/Axios.html" class="sidebar-link">用TS封装Axios</a></li><li><a href="/handbook/JavaScript/ESLint.html" class="sidebar-link">ESLint+Prettier</a></li><li><a href="/handbook/JavaScript/Jest.html" class="sidebar-link">Jest</a></li><li><a href="/handbook/JavaScript/NextJS.html" class="sidebar-link">Next.js</a></li><li><a href="/handbook/JavaScript/Mock.html" class="sidebar-link">Mock数据</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>AntDesign</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>小程序</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>开发技巧</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Angular</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Backend（Java Based）</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>油猴</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Nodejs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vite</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Web安全</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Google Chrome V8</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Mac使用记录</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>文章诗句</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Office软件</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>股海浮沉</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>打工人须知</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>JavaScript Tips</h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>EricYangXD</span>
            
          <!---->
          2024
        </a></span></div></div> <div data-v-130b300a><main class="page"><section><div class="page-title"><h1 class="title">JavaScript Tips</h1> <div data-v-f875f3fc><i class="iconfont reco-account" data-v-f875f3fc><span data-v-f875f3fc>EricYangXD</span></i> <i class="iconfont reco-date" data-v-f875f3fc><span data-v-f875f3fc>2021/12/29</span></i> <i class="iconfont reco-eye" data-v-f875f3fc><span id="/handbook/JavaScript/JS.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-f875f3fc><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <!----></div></div> <div class="theme-reco-content content__default"><h2 id="原型、继承、原型链"><a href="#原型、继承、原型链" class="header-anchor">#</a> 原型、继承、原型链</h2> <ul><li><p><a href="https://juejin.cn/post/6844903837623386126" target="_blank" rel="nofollow noopener noreferrer">参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/proto.png" alt="原型关系图" title="原型关系图"></p></li></ul> <p>ECMAScript 中-所有-函数的参数都是按值传递的。也就是说，把函数外部的值复制给函数内部的参数，就和把值从一个变量复制到另一个变量一样。</p> <p>共享传递是指，在传递对象的时候，传递对象的引用的副本。注意：按引用传递是传递对象的引用，而按共享传递是传递对象的引用的副本！</p> <p><strong>参数如果是基本类型是按值传递，如果是引用类型按共享传递</strong>。但是因为拷贝副本也是一种值的拷贝，所以在高程中也直接认为是按值传递了。</p> <h3 id="es5-es6-的继承除了写法以外还有什么区别"><a href="#es5-es6-的继承除了写法以外还有什么区别" class="header-anchor">#</a> ES5/ES6 的继承除了写法以外还有什么区别</h3> <ol><li>ES6 子类可以直接通过 <code>__proto__</code> 寻址到父类:<code>Sub.__proto__ === Super</code>。而通过 ES5 的方式:<code>Sub.__proto__ === Function.prototype</code>。</li> <li>ES5 和 ES6 子类 this 生成顺序不同。
<ul><li>ES5 的继承先生成了子类实例，再调用父类的构造函数修饰子类实例，</li> <li>ES6 的继承先生成父类实例，再调用子类的构造函数修饰父类实例。这个差别使得 ES6 可以继承 js 内置对象。</li></ul></li> <li>class 声明不会提升，如同 let、const，会造成暂时性死区。</li> <li>class 声明内部会启用严格模式。</li> <li>class 的所有方法（包括静态方法和实例方法）都是不可枚举的。</li> <li>class 的所有方法（包括静态方法和实例方法）都没有原型对象 prototype，所以也没有<code>[[construct]]</code>，不能使用 new 来调用。</li> <li>必须使用 new 调用 class。</li> <li>class 内部无法重写类名。</li></ol> <h2 id="类型转换"><a href="#类型转换" class="header-anchor">#</a> 类型转换</h2> <ul><li>依赖 valueOf,toString,ToPrimitive</li> <li>真值表如下:</li> <li><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images@master/imgs/js-true-value.png" alt="JS类型转换真值表" title="JS类型转换真值表"></li></ul> <h2 id="静态作用域与动态作用域"><a href="#静态作用域与动态作用域" class="header-anchor">#</a> 静态作用域与动态作用域</h2> <p>JavaScript 采用词法作用域(lexical scoping)，也就是静态作用域。函数的作用域在函数定义的时候就决定了。而与词法作用域相对的是动态作用域，函数的作用域是在函数调用的时候才决定的。</p> <h2 id="判断上传的文件类型"><a href="#判断上传的文件类型" class="header-anchor">#</a> 判断上传的文件类型</h2> <ol><li>通过 input 元素的 accept 属性来限制文件的类型</li></ol> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">accept</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image/*<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>通过截取文件名后缀的方式来判断</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> ext <span class="token operator">=</span> file<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="3"><li><p>利用 file-type</p></li> <li><p>利用 vscode 插件 hexdump for VSCode 以十六进制的形式查看二进制文件--同一种类型的文件，他们的头信息是完全相同的</p> <blockquote><ol><li>在获取文件对象后，我们可以通过 FileReader API 来读取文件的内容;</li> <li>然后将结果转为 Unicode 编码，再转为十六进制;</li> <li><strong>没有必要将整个文件转为十六进制，我们只需要截取文件的前几个字节，然后将截取后的文件转为十六进制，再进行比对就可以</strong>;</li></ol></blockquote></li></ol> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  file<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;change&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> file <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> flag <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">isImage</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;上传格式通过！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;请上传正确的格式！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 判断是否为图片</span>
  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">isImage</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">isGif</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">isPng</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">isJpg</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 判断是否为 jpg 格式</span>
  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">isJpg</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">blobToString</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> res <span class="token operator">===</span> <span class="token string">&quot;FF D8 FF&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 判断是否为 png 格式</span>
  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">isPng</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">blobToString</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> res <span class="token operator">===</span> <span class="token string">&quot;89 50 4E 47&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 判断是否为 gif 格式</span>
  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">isGif</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">blobToString</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> res <span class="token operator">===</span> <span class="token string">&quot;47 49 46 38&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 将文件转为十六进制字符串</span>
  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">blobToString</span><span class="token punctuation">(</span><span class="token parameter">blob</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      reader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> res <span class="token operator">=</span> reader<span class="token punctuation">.</span>result
          <span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 将读取结果分割为数组</span>
          <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> v<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 转为 Unicode 编码</span>
          <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> v<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 转为十六进制，再转大写</span>
          <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> v<span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 个位数补0</span>
          <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 转为字符串</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      reader<span class="token punctuation">.</span><span class="token function">readAsBinaryString</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将文件读取为二进制字符串</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><h2 id="env-文件原理解析"><a href="#env-文件原理解析" class="header-anchor">#</a> .env 文件原理解析</h2> <ul><li>一句话总结 dotenv 库的原理。用 fs.readFileSync 读取 .env 文件，并解析文件为键值对形式的对象，将最终结果对象遍历赋值到 process.env 上。</li></ul> <blockquote><p>Dotenv 是一个零依赖模块，可将 .env 文件中的环境变量加载到 process.env 中
如果需要使用变量，则配合如下扩展包使用 —— dotenv-expand</p></blockquote> <h3 id="_4-个功能"><a href="#_4-个功能" class="header-anchor">#</a> 4 个功能</h3> <ol><li>读取 .env 文件</li> <li>解析 .env 文件拆成键值对的对象形式</li> <li>赋值到 process.env 上</li> <li>最后返回解析后得到的对象</li></ol> <h2 id="open-的原理"><a href="#open-的原理" class="header-anchor">#</a> open 的原理</h2> <ul><li><p>用法：--open 或者 --no-open</p></li> <li><p>地址<a href="https://github.com/sindresorhus/open" target="_blank" rel="nofollow noopener noreferrer">open<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>一句话概括 open 原理则是：针对不同的系统，使用 Node.js 的子进程 child_process 模块的 spawn 方法，调用系统的命令打开浏览器.</p></li> <li><p>对应的系统命令简单形式则是：</p></li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># mac</span>
<span class="token function">open</span> https://ericyangxd.top/
<span class="token comment"># win</span>
start https://ericyangxd.top/
<span class="token comment"># linux</span>
<span class="token function">xdg-open</span> https://ericyangxd.top/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="前端生成水印-watermark"><a href="#前端生成水印-watermark" class="header-anchor">#</a> 前端生成水印 watermark</h2> <h3 id="使用-canvas"><a href="#使用-canvas" class="header-anchor">#</a> 使用 Canvas</h3> <ul><li>原理：使用 Canvas 绘制好图片，利用 canvas.toDataURL()转换为 base64 格式，然后给顶层的#root 设置 background-image 即可，注意调整样式。
示例代码：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;canvas&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> angle <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">40</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> txt <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Good Luck Infinity Co. ericyangxd.top </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleTimeString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> canvasWidth <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> canvasHeight <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>canvas<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// drawing code here</span>
  canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> canvasWidth<span class="token punctuation">;</span>
  canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> canvasHeight<span class="token punctuation">;</span>
  <span class="token keyword">const</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&quot;2d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 通过把像素设置为透明以达到擦除一个矩形区域的目的。</span>
  <span class="token comment">// 请确保在调用 clearRect()之后绘制新内容前调用beginPath() 。</span>
  <span class="token comment">// 清除整个画布</span>
  ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> canvasWidth<span class="token punctuation">,</span> canvasHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 文字填充颜色</span>
  ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&quot;#000&quot;</span><span class="token punctuation">;</span>
  <span class="token comment">// 文字透明度</span>
  ctx<span class="token punctuation">.</span>globalAlpha <span class="token operator">=</span> <span class="token number">0.8</span><span class="token punctuation">;</span>
  <span class="token comment">// 同CSS font，至少包含font-size和font-family</span>
  ctx<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token string">&quot;bold 20px 微软雅黑&quot;</span><span class="token punctuation">;</span>
  <span class="token comment">// 旋转弧度</span>
  ctx<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">)</span> <span class="token operator">*</span> angle<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// -280： 文字向左偏移； 380：文字向下偏移； strokeText：中空字体； fillText：实线字体</span>
  ctx<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span>txt<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">280</span><span class="token punctuation">,</span> <span class="token number">380</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="透明图片覆盖"><a href="#透明图片覆盖" class="header-anchor">#</a> 透明图片覆盖</h3> <ul><li>太 low 了，不用</li></ul> <h2 id="一个-function"><a href="#一个-function" class="header-anchor">#</a> 一个 function</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  conssole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">world</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
f<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>a<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token comment">// 会打印如下：</span>
<span class="token comment">// [[&quot;Hello &quot;,&quot;!&quot;],&quot;world&quot;]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="js-类型"><a href="#js-类型" class="header-anchor">#</a> JS 类型</h2> <h3 id="对应类型"><a href="#对应类型" class="header-anchor">#</a> 对应类型</h3> <ul><li>JS 7(8) 种基本类型对应的是：undefined, null, object, boolean, string, number, symbol(, bigint)。</li> <li>那么 7 种语言类型应该对应的什么？作者回复:
<ul><li>List 和 Record</li> <li>Set</li> <li>Completion Record</li> <li>Reference</li> <li>Property Descriptor</li> <li>Lexical Environment 和 Environment Record</li> <li>Data Block</li></ul></li></ul> <h3 id="类型检测"><a href="#类型检测" class="header-anchor">#</a> 类型检测</h3> <table><thead><tr><th>不同类型/优缺点</th> <th>typeof</th> <th>instanceof</th> <th>constructor</th> <th>Object.prototype.toString.call</th></tr></thead> <tbody><tr><td>优点</td> <td>简单易用</td> <td>检测引用类型</td> <td>基本能检测所有的类型（除 null 和 undefined）</td> <td>可以检测出所有类型</td></tr> <tr><td>缺点</td> <td>只能检测基本类型（除 null）</td> <td>只能检测引用类型，且不能跨 iframe</td> <td>constructor 易被修改，也不能跨 iframe</td> <td>IE6 下，undefined 和 null 均为 Object</td></tr></tbody></table> <h3 id="模块化发展历程"><a href="#模块化发展历程" class="header-anchor">#</a> 模块化发展历程</h3> <p>模块化主要是用来抽离公共代码，隔离作用域，避免变量冲突等。</p> <ol><li>IIFE： 使用自执行函数来编写模块化，特点：在一个单独的函数作用域中执行代码，避免变量冲突。</li> <li>AMD： 使用 requireJS 来编写模块化，特点：依赖必须提前声明好。</li> <li>CMD： 使用 seaJS 来编写模块化，特点：支持动态引入依赖文件。</li> <li>CommonJS： nodejs 中自带的模块化。</li> <li>UMD：兼容 AMD，CommonJS 模块化语法。</li> <li>webpack(require.ensure)：webpack 2.x 版本中的代码分割。</li> <li>ES Modules： ES6 引入的模块化，支持 import 来引入另一个 js 。</li></ol> <h3 id="xhr-请求文件"><a href="#xhr-请求文件" class="header-anchor">#</a> XHR 请求文件</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 可以跨域请求 html</span>
<span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://xyz.example.com/secret/file.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;got result: &quot;</span><span class="token punctuation">,</span> xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>然后可以对这个文件进行解析啥的<code>formatHtml(xhr.responseText)</code>，适用于抓到别人的网页之后，解析一下 body 放到自己的页面里。</li></ul> <h3 id="jwt"><a href="#jwt" class="header-anchor">#</a> JWT</h3> <p>在 Node.js 中使用 jsonwebtoken 库生成和验证 JWT：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> jwt <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;jsonwebtoken&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 生成 JWT</span>
<span class="token keyword">const</span> token <span class="token operator">=</span> jwt<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> user<span class="token punctuation">.</span>id <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;secretKey&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">expiresIn</span><span class="token operator">:</span> <span class="token string">&quot;1h&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 验证 JWT</span>
jwt<span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span> <span class="token string">&quot;secretKey&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> decoded</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Token is not valid&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Decoded payload:&quot;</span><span class="token punctuation">,</span> decoded<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="移除-a-标签的默认跳转行为"><a href="#移除-a-标签的默认跳转行为" class="header-anchor">#</a> 移除 a 标签的默认跳转行为</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1</span>
<span class="token function">$</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;href&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;javascript:void(0);&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 2</span>
<span class="token function">$</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 3</span>
<span class="token function">$</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;target&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="通过-canvas-做-web-身份识别"><a href="#通过-canvas-做-web-身份识别" class="header-anchor">#</a> 通过 Canvas 做 web 身份识别</h3> <ul><li>原理：通过 Canvas 生成指纹，做识别。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// PHP 中，bin2hex() 函数把 ASCII 字符的字符串转换为十六进制值。字符串可通过使用 pack() 函数再转换回去</span>
<span class="token comment">// 下面是PHP 的 bin2hex 的 JavaScript 实现</span>
<span class="token keyword">function</span> <span class="token function">bin2hex</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> n<span class="token punctuation">,</span>
    o <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  s <span class="token operator">+=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> s<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    n <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    o <span class="token operator">+=</span> n<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token operator">?</span> <span class="token string">&quot;0&quot;</span> <span class="token operator">+</span> n <span class="token operator">:</span> n<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> o<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 获取指纹UUID</span>
<span class="token keyword">function</span> <span class="token function">getUUID</span><span class="token punctuation">(</span><span class="token parameter">domain</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 创建 &lt;canvas&gt; 元素</span>
  <span class="token keyword">let</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;canvas&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// getContext() 方法可返回一个对象，该对象提供了用于在画布上绘图的方法和属性</span>
  <span class="token keyword">let</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&quot;2d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 设置在绘制文本时使用的当前文本基线</span>
  ctx<span class="token punctuation">.</span>textBaseline <span class="token operator">=</span> <span class="token string">&quot;top&quot;</span><span class="token punctuation">;</span>
  <span class="token comment">// 设置文本内容的当前字体属性</span>
  ctx<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token string">&quot;14px 'Arial'&quot;</span><span class="token punctuation">;</span>
  <span class="token comment">// 设置用于填充绘画的颜色、渐变或模式</span>
  ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&quot;#f60&quot;</span><span class="token punctuation">;</span>
  <span class="token comment">// 绘制&quot;被填充&quot;的矩形</span>
  ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">125</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">62</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&quot;#069&quot;</span><span class="token punctuation">;</span>
  <span class="token comment">// 在画布上绘制&quot;被填充的&quot;文本</span>
  ctx<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span>domain<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&quot;rgba(102, 204, 0, 0.7)&quot;</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span>domain<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// toDataURL返回一个包含图片展示的 data URI</span>
  <span class="token keyword">let</span> b64 <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">toDataURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;data:image/png;base64,&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// atob() 方法用于解码使用 base-64 编码的字符串；base-64 编码使用方法是 btoa()，这俩都是window全局方法</span>
  <span class="token keyword">let</span> crc <span class="token operator">=</span> <span class="token function">bin2hex</span><span class="token punctuation">(</span><span class="token function">atob</span><span class="token punctuation">(</span>b64<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> crc<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 调用时，你可以传入任何你想传的字符串，并不局限于传递domain，这里只是为了便于区分站点</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getUUID</span><span class="token punctuation">(</span><span class="token string">&quot;https://www.baidu.com/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h2 id="回车与换行"><a href="#回车与换行" class="header-anchor">#</a> 回车与换行</h2> <p>电传打字机：</p> <ol><li>在每行后面加两个表示结束的字符：一个叫做&quot;回车&quot;，告诉打字机把打印头定位在左边界；另一个叫做&quot;换行&quot;，告诉打字机把纸向下移一行。</li></ol> <p>计算机发明后：</p> <ol><li>Unix 系统里，每行结尾只有<code>&lt;换行&gt;</code>，即<code>\n</code>；</li> <li>Windows 系统里面，每行结尾是<code>&lt;回车&gt;&lt;换行&gt;</code>，即<code>\r\n</code>；</li> <li>Mac 系统里，每行结尾是<code>&lt;回车&gt;</code>。</li></ol> <p>一个直接后果是，Unix/Mac 系统下的文件在 Windows 里打开的话，所有文字会变成一行；而 Windows 里的文件在 Unix/Mac 下打开的话，在每行的结尾可能会多出一个^M 符号。</p> <p><code>\n</code>是匹配一个换行符，<code>\r</code>是匹配一个回车符。<code>\0</code>表示匹配 NULL（U+0000）字符，空字符（Null character）又称结束符，缩写 NUL，是一个数值为 0 的控制字符。</p> <h2 id="js-遍历方法"><a href="#js-遍历方法" class="header-anchor">#</a> js 遍历方法</h2> <p><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images/imgs/WechatIMG290.jpeg" alt="js遍历方法"></p> <h2 id="js-事件委托"><a href="#js-事件委托" class="header-anchor">#</a> js 事件委托</h2> <p><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images/imgs/WechatIMG289.png" alt="js事件委托"></p> <h2 id="function"><a href="#function" class="header-anchor">#</a> Function</h2> <p>原理：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">&quot;world&quot;</span><span class="token punctuation">;</span>
f<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>a<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span> <span class="token comment">// [[&quot;Hello&quot;, &quot;!&quot;], world]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="js-闭包的漏洞"><a href="#js-闭包的漏洞" class="header-anchor">#</a> JS 闭包的漏洞</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 如何在不修改代码的情况下去修改obj</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// 防御方案1</span>
  <span class="token comment">// Object.setPrototypeOf(obj, null);</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">k</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> obj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token comment">// 防御方案2</span>
      <span class="token comment">// if(obj.hasOwnProperty(k)){</span>
      <span class="token comment">//   return obj[k];</span>
      <span class="token comment">// }</span>
      <span class="token comment">// return undefined;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><ol><li>通过<code>Object.defineProperty</code>返回 obj，通过原型攻击，这种方式可能会破坏第三方库的完整性</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> obj2 <span class="token operator">=</span> o<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 然后就可以修改获取到的obj了</span>
obj2<span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
obj2<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">11</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 11</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ol start="2"><li>防御方案，参考代码</li></ol> <h2 id="如何避免输入中文拼音时触发-input-事件"><a href="#如何避免输入中文拼音时触发-input-事件" class="header-anchor">#</a> 如何避免输入中文拼音时触发 input 事件</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1. 通过监听compositionstart和compositionend事件</span>
<span class="token comment">// 2. 通过监听input事件，判断是否是中文输入法输入</span>
<span class="token comment">// 3. 通过监听keydown事件，判断是否是中文输入法输入</span>
<span class="token comment">// 4. 通过监听keyup事件，判断是否是中文输入法输入</span>

<span class="token keyword">var</span> input <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;input&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> isComposing <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">search</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>input<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
input<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;compositionstart&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;中文输入开始&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
input<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;compositionend&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;中文输入结束&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">search</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
input<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;input&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isComposing <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;中文输入&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">search</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

input<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;keydown&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&quot;Unidentified&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;中文输入&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
input<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;keyup&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&quot;Unidentified&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;中文输入&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h2 id="react-源码中的位运算"><a href="#react-源码中的位运算" class="header-anchor">#</a> React 源码中的位运算</h2> <h3 id="按位与-、或-、非"><a href="#按位与-、或-、非" class="header-anchor">#</a> 按位与（&amp;）、或（|）、非（～）</h3> <p>在 JS 中，位运算的操作数会先转换为 Int32（32 位有符号整型），执行完位运算会把 Int32 转换回对应浮点数。Int32 的最高位是符号位，不保存具体的数.</p> <ol><li>找出当前最高优先级的更新在哪一位，低位优先级高：</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 由于Int32采用「补码」表示，所以-lanes可以看作如下两步操作：</span>
<span class="token comment">// 1. lanes取反（~lanes）</span>
<span class="token comment">// 2. 加1</span>
<span class="token keyword">function</span> <span class="token function">getHighestPriorityLane</span><span class="token punctuation">(</span><span class="token parameter">lanes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> lanes <span class="token operator">&amp;</span> <span class="token operator">-</span>lanes<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="javascript-核心原理解析"><a href="#javascript-核心原理解析" class="header-anchor">#</a> JavaScript 核心原理解析</h2> <h3 id="_01-delete-0"><a href="#_01-delete-0" class="header-anchor">#</a> 01|delete 0</h3> <ol><li>delete 这个操作的正式语法设计并不是“删除某个东西”，而是“删除一个表达式的结果”：<code>delete UnaryExpression</code>。</li> <li>在 JavaScript 中，有两个东西可以被执行并存在执行结果（Result），包括语句和表达式。</li> <li>表达式的值，在 ECMAScript 的规范中，称为“引用”。</li> <li>在进一步的删除操作之前，JavaScript 需要检测这个 Result 的类型：
<ol><li>如果它是值，则按照传统的 JavaScript 的约定返回 true；</li> <li>如果它是一个引用，那么对该引用进行分析，以决定如何操作。</li></ol></li> <li>ECMAScript 约定：任何表达式计算的结果（Result）要么是一个值，要么是一个引用。</li> <li>“delete x”归根到底，是在删除一个表达式的、引用类型的结果（Result），而不是在删除 x 表达式，或者这个删除表达式的值（Value）。</li> <li>delete 运算符尝试删除值数据时，会返回 true，用于表示没有错误（Error）。</li> <li>delete 0 的本质是删除一个表达式的值（Result）。</li> <li>delete x 与上述的区别只在于 Result 是一个引用（Reference）。</li> <li>delete 其实只能删除一种引用，即对象的成员（Property）。</li> <li>delete x 中，如果 x 根本不存在，会返回 true。</li> <li>delete object.x 中，如果 x 是只读的，会 delete object.x 不能删除掉 x 属性，返回 false；如果在严格模式下，会报错：TypeError: Cannot delete property 'x'。</li> <li>访问不存在的变量 x 报 ReferenceError 错误，其实是对 x 表达式的的 Result 引用做 getValue 的时候报的错误，然后为啥 typeof x 和 delete x 不报错，因为这两个操作没有求值。</li></ol> <h3 id="_02-var-x-y-100"><a href="#_02-var-x-y-100" class="header-anchor">#</a> 02 | var x = y = 100</h3> <p>在这行代码中，等号的右边是一个表达式 y = 100，它发生了一次“向不存在的变量赋值”，所以它「隐式地声明了一个全局变量」y，并赋值为 100。</p> <p>严格意义上讲，JavaScript 只有变量和常量两种标识符，六条声明语句:</p> <ul><li><code>let x …</code> : 声明变量 x。不可在赋值之前读。</li> <li><code>const x …</code> : 声明常量 x。不可写。</li> <li><code>var x …</code> : 声明变量 x。在赋值之前可读取到 undefined 值。</li> <li><code>function x …</code> : 声明变量 x。该变量指向一个函数。</li> <li><code>class x …</code> : 声明变量 x。该变量指向一个类（该类的作用域内部是处理严格模式的）。</li> <li><code>import …</code> : 导入标识符并作为常量（可以有多种声明标识符的模式和方法）。</li></ul> <blockquote><p>NOTE：6 种声明语句中的函数是按 varDecls 的规则声明的；类的内部是处于严格模式中，它的名字是按 let 来处理的，而 import 导入的名字则是按 const 的规则来处理的。所以，所有的声明本质上只有三种处理模式：var 变量声明、let 变量声明和 const 常量声明。</p></blockquote> <p>除了这六个语句之外，还有两个语句有潜在的声明标识符的能力，不过它们并不是严格意义上的声明语句（声明只是它们的语法效果）。这两个语句是指：</p> <ul><li><code>for (var|let|const x …) …</code> : for 语句有多种语法来声明一个或多个标识符，用作循环变量。</li> <li><code>try … catch (x) …</code> : catch 子句可以声明一个或多个标识符，用作异常对象变量。</li></ul> <p>一个简单论断，所有的“声明”：</p> <ul><li>都意味着 JavaScript 将可以通过“静态”语法分析发现那些声明的标识符；</li> <li>标识符对应的变量 / 常量“一定”会在用户代码执行前就已经被创建在作用域中。</li></ul> <p>回到 ECMAScript 6 之前：JavaScript 是允许访问还没有绑定值的 var 所声明的标识符的。这种标识符后来统一约定称为“变量声明（varDelcs）”，而“let/const”则称为“词法声明（lexicalDecls）”。JavaScript 环境在创建一个“变量名（varName in varDecls）”后，会为它初始化绑定一个 undefined 值，而”词法名字（lexicalNames）”在创建之后就没有这项待遇，所以它们在缺省情况下就是“还没有绑定值”的标识符。</p> <ol><li>var 等声明语句总是在变量作用域（变量表）或词法作用域中静态地声明一个或多个标识符。</li> <li>全局变量的管理方式决定了“向一个不存在的变量赋值”所导致的变量泄漏是不可避免的。</li> <li>动态添加的“var 声明”是可以删除的，这是唯一能操作 varNames 列表的方式（不过它并不存在多少实用意义）。</li> <li>变量声明在引擎的处理上被分成两个部分：一部分是静态的、基于标识符的词法分析和管理，它总是在相应上下文的环境构建时作为名字创建的；另一部分是表达式执行过程，是对上述名字的赋值，这个过程也称为绑定。</li> <li>这一讲标题里的这行代码中，x 和 y 是两个不同的东西，前者是声明的名字，后者是一个赋值过程可能创建的变量名。</li></ol> <h3 id="_03-a-x-a-n-2"><a href="#_03-a-x-a-n-2" class="header-anchor">#</a> 03 | a.x = a = {n:2}</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">(</span>a <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">n</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span>x <span class="token operator">=</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">n</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { n: 2 }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>忽略 b，上面发生了两次赋值，第一次赋值发生于“a = {n: 2}”，它覆盖了“原始的变量 a”；第二次赋值发生于被“a.x”引用暂存的“原始的变量 a”。所以，第二次赋值操作“a.x = …”实际是无意义的。因为它所操作的对象，也就是“原始的变量 a”被废弃了。</p> <h3 id="_04-export-default-function"><a href="#_04-export-default-function" class="header-anchor">#</a> 04 | export default function() {}</h3> <p><code>export default function() {}</code>，在严格意义上来说它并不是导出了一个匿名函数表达式，而是导出了一个匿名函数定义（Anonymous Function Definition）。这个语法本身没有任何的问题。但是他看似导出一个匿名函数表达式。其实他真正导出的是一个具有名字的函数，名字是<code>default</code>。</p> <p>ECMAScript 6 模块是静态装配的，而传统的 Node.js 模块却是动态加载的。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 导出“（声明的）名字”</span>
<span class="token keyword">export</span> <span class="token operator">&lt;</span><span class="token keyword">let</span><span class="token operator">/</span><span class="token keyword">const</span><span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">&gt;</span> x <span class="token operator">...</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">...</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">x</span> <span class="token operator">...</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">;</span>


<span class="token comment">// 导出“（重命名的）名字”</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> x <span class="token keyword">as</span> y<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> x <span class="token keyword">as</span> <span class="token keyword">default</span><span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>


<span class="token comment">// 导出“（其它模块的）名字”</span>
<span class="token keyword">export</span> <span class="token operator">...</span> from <span class="token operator">...</span><span class="token punctuation">;</span>


<span class="token comment">// 导出“值”</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token operator">&lt;</span>expression
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>一个 export 也必须理解为这样两个步骤：导出一个名字；为上述名字绑定一个值。</p> <h3 id="_05-for-let-x-of-1-2-3"><a href="#_05-for-let-x-of-1-2-3" class="header-anchor">#</a> 05 | for (let x of [1,2,3]) ...</h3> <p>绝大多数 JavaScript 语句都并没有自己的块级作用域。从语言设计的原则上来看，越少作用域的执行环境调度效率也就越高，执行时的性能也就越好。基于这个原则，switch 语句被设计为有且仅有一个作用域，无论它有多少个 case 语句，其实都是运行在一个块级作用域环境中的。</p> <p>并不是所有的循环语句都有自己的块级作用域，例如 while 和 do..while 语句就没有。而且，也不是所有 for 语句都有块级作用域。在 JavaScript 中，有且仅有：
<code>for (let/const ...) ...</code>这个语法有自己的块级作用域。当然，这也包括相同设计的<code>for await</code>和<code>for .. of/in ..</code>。PS:不包括 var 声明，因为 var 会变量提升。</p> <ul><li>所有“var 声明”和函数声明的标识符都登记为 varNames，使用“变量作用域”管理；</li> <li>其它情况下的标识符 / 变量声明，都作为 lexicalNames 登记，使用“词法作用域”管理。</li></ul> <p>循环语句（对于支持“let/const”的 for 语句来说）“通常情况下”只支持一个块级作用域。</p> <p>for 语句中使用“let/const”这种块级作用域声明所需要付出的代价：在语法上只需要两个“块级作用域”，而实际运行时却需要为其中的第二个块级作用域（for 循环体）创建无数个副本。这种 for 循环并不比使用函数递归节省开销。因为每一次函数调用其实都会创建一个新的闭包——也就是函数的作用域的一个副本。</p> <ul><li>在 es6 中，其实 for 只要写大括号就代表着块级作用域。所以只要写大括号，不管用 let 还是 var，一定是会创建相应循环数量的块级作用域的。</li> <li>如果不用大括号，在 for 中使用了 let，也会创建相应循环数量的块级作用域。</li> <li>也就是说，可以提高性能的唯一情况只有（符合业务逻辑的情况下），循环体是单行语句就不使用大括号且 for 中使用 var。</li></ul></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">8/8/2024</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/handbook/JavaScript/TS.html" class="prev">
            TypeScript
          </a></span> <span class="next"><a href="/handbook/JavaScript/Cojs.html">
            co.js
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#原型、继承、原型链" class="sidebar-link reco-side-原型、继承、原型链" data-v-cb1513f6>原型、继承、原型链</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#es5-es6-的继承除了写法以外还有什么区别" class="sidebar-link reco-side-es5-es6-的继承除了写法以外还有什么区别" data-v-cb1513f6>ES5/ES6 的继承除了写法以外还有什么区别</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#类型转换" class="sidebar-link reco-side-类型转换" data-v-cb1513f6>类型转换</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#静态作用域与动态作用域" class="sidebar-link reco-side-静态作用域与动态作用域" data-v-cb1513f6>静态作用域与动态作用域</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#判断上传的文件类型" class="sidebar-link reco-side-判断上传的文件类型" data-v-cb1513f6>判断上传的文件类型</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#env-文件原理解析" class="sidebar-link reco-side-env-文件原理解析" data-v-cb1513f6>.env 文件原理解析</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#_4-个功能" class="sidebar-link reco-side-_4-个功能" data-v-cb1513f6>4 个功能</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#open-的原理" class="sidebar-link reco-side-open-的原理" data-v-cb1513f6>open 的原理</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#前端生成水印-watermark" class="sidebar-link reco-side-前端生成水印-watermark" data-v-cb1513f6>前端生成水印 watermark</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#使用-canvas" class="sidebar-link reco-side-使用-canvas" data-v-cb1513f6>使用 Canvas</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#透明图片覆盖" class="sidebar-link reco-side-透明图片覆盖" data-v-cb1513f6>透明图片覆盖</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#一个-function" class="sidebar-link reco-side-一个-function" data-v-cb1513f6>一个 function</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#js-类型" class="sidebar-link reco-side-js-类型" data-v-cb1513f6>JS 类型</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#对应类型" class="sidebar-link reco-side-对应类型" data-v-cb1513f6>对应类型</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#类型检测" class="sidebar-link reco-side-类型检测" data-v-cb1513f6>类型检测</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#模块化发展历程" class="sidebar-link reco-side-模块化发展历程" data-v-cb1513f6>模块化发展历程</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#xhr-请求文件" class="sidebar-link reco-side-xhr-请求文件" data-v-cb1513f6>XHR 请求文件</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#jwt" class="sidebar-link reco-side-jwt" data-v-cb1513f6>JWT</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#移除-a-标签的默认跳转行为" class="sidebar-link reco-side-移除-a-标签的默认跳转行为" data-v-cb1513f6>移除 a 标签的默认跳转行为</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#通过-canvas-做-web-身份识别" class="sidebar-link reco-side-通过-canvas-做-web-身份识别" data-v-cb1513f6>通过 Canvas 做 web 身份识别</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#回车与换行" class="sidebar-link reco-side-回车与换行" data-v-cb1513f6>回车与换行</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#js-遍历方法" class="sidebar-link reco-side-js-遍历方法" data-v-cb1513f6>js 遍历方法</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#js-事件委托" class="sidebar-link reco-side-js-事件委托" data-v-cb1513f6>js 事件委托</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#function" class="sidebar-link reco-side-function" data-v-cb1513f6>Function</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#js-闭包的漏洞" class="sidebar-link reco-side-js-闭包的漏洞" data-v-cb1513f6>JS 闭包的漏洞</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#如何避免输入中文拼音时触发-input-事件" class="sidebar-link reco-side-如何避免输入中文拼音时触发-input-事件" data-v-cb1513f6>如何避免输入中文拼音时触发 input 事件</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#react-源码中的位运算" class="sidebar-link reco-side-react-源码中的位运算" data-v-cb1513f6>React 源码中的位运算</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#按位与-、或-、非" class="sidebar-link reco-side-按位与-、或-、非" data-v-cb1513f6>按位与（&amp;）、或（|）、非（～）</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#javascript-核心原理解析" class="sidebar-link reco-side-javascript-核心原理解析" data-v-cb1513f6>JavaScript 核心原理解析</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#_01-delete-0" class="sidebar-link reco-side-_01-delete-0" data-v-cb1513f6>01|delete 0</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#_02-var-x-y-100" class="sidebar-link reco-side-_02-var-x-y-100" data-v-cb1513f6>02 | var x = y = 100</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#_03-a-x-a-n-2" class="sidebar-link reco-side-_03-a-x-a-n-2" data-v-cb1513f6>03 | a.x = a = {n:2}</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#_04-export-default-function" class="sidebar-link reco-side-_04-export-default-function" data-v-cb1513f6>04 | export default function() {}</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/JS.html#_05-for-let-x-of-1-2-3" class="sidebar-link reco-side-_05-for-let-x-of-1-2-3" data-v-cb1513f6>05 | for (let x of [1,2,3]) ...</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div></div></div></div>
    <script src="/assets/js/app.99147766.js" defer></script><script src="/assets/js/4.e4331d91.js" defer></script><script src="/assets/js/3.561be8e5.js" defer></script><script src="/assets/js/2.b25d4684.js" defer></script><script src="/assets/js/1.c7cb60d4.js" defer></script><script src="/assets/js/76.f923c4b5.js" defer></script>
  </body>
</html>
