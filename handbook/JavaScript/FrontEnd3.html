<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>记录一些前端知识(3) | 木易的OT</title>
    <meta name="generator" content="VuePress 1.9.10">
    <script>
        (function() {
          if (location.href.indexOf('github.io') > -1 || location.href.indexOf('gitee.io') > -1) {
             location.href = 'https://ericyangxd.top'
           }
        })();
        </script><script type='application/ld+json'>
          {
            "@context": "https://schema.org",
            "@type": "Article",
            "headline": "记录一些前端知识(3)",
            "url": "https://ericyangxd.top/handbook/JavaScript/FrontEnd3.html",
            "image": [
              "https://ericyangxd.top/logo.png"
              ],
            "datePublished": "2022-06-24T00:00:00.000Z",
            "dateModified": "2025-05-06T00:00:00.000Z",
            "author": [{
                "@type": "Person",
                "name": "EricYangXD",
                "url": "https://github.com/EricYangXD/ericyangxd.github.io"
            }]
          }
      </script>
    <meta name="description" content="前端面试,React,Vue,JavaScript,CSS,HTML,HTTP,HTTPS,websocket,UDP,TCP,Webpack,算法,数据结构,LeetCode,小程序,油猴,计算机网络,NodeJs,Vite,Antdesign,EricYangXD,Eric,Chrome,Android,V8,Mac,git,网络安全,开发技巧,路由,router,诗歌,金句,源码,面试,Docker,Shell,clash,Windows">
    <meta name="keywords" content="前端监控,上报,常识">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
    <link rel="preload" href="/assets/css/0.styles.82c89da6.css" as="style"><link rel="preload" href="/assets/js/app.6c202dd4.js" as="script"><link rel="preload" href="/assets/js/4.e4a90c70.js" as="script"><link rel="preload" href="/assets/js/3.ad1ccd56.js" as="script"><link rel="preload" href="/assets/js/2.0240bc78.js" as="script"><link rel="preload" href="/assets/js/1.b94e320b.js" as="script"><link rel="preload" href="/assets/js/74.0fb29e26.js" as="script"><link rel="prefetch" href="/assets/js/10.d09001be.js"><link rel="prefetch" href="/assets/js/100.bd2007f6.js"><link rel="prefetch" href="/assets/js/101.340b9f58.js"><link rel="prefetch" href="/assets/js/102.006ad327.js"><link rel="prefetch" href="/assets/js/103.49d96ff2.js"><link rel="prefetch" href="/assets/js/104.00fdb312.js"><link rel="prefetch" href="/assets/js/105.b828a018.js"><link rel="prefetch" href="/assets/js/106.70bed698.js"><link rel="prefetch" href="/assets/js/107.715d2d3f.js"><link rel="prefetch" href="/assets/js/108.1e1e2f04.js"><link rel="prefetch" href="/assets/js/109.3e6c4c62.js"><link rel="prefetch" href="/assets/js/11.74c854af.js"><link rel="prefetch" href="/assets/js/110.f89c1bd8.js"><link rel="prefetch" href="/assets/js/111.46193712.js"><link rel="prefetch" href="/assets/js/112.7189160c.js"><link rel="prefetch" href="/assets/js/113.96a41cb8.js"><link rel="prefetch" href="/assets/js/114.bc07bbf1.js"><link rel="prefetch" href="/assets/js/115.d6b361c3.js"><link rel="prefetch" href="/assets/js/116.4dbdd4fa.js"><link rel="prefetch" href="/assets/js/117.7107f5f0.js"><link rel="prefetch" href="/assets/js/118.dedc15dd.js"><link rel="prefetch" href="/assets/js/119.81cab98e.js"><link rel="prefetch" href="/assets/js/120.74b7d766.js"><link rel="prefetch" href="/assets/js/121.e7108376.js"><link rel="prefetch" href="/assets/js/122.30415f94.js"><link rel="prefetch" href="/assets/js/123.498f61aa.js"><link rel="prefetch" href="/assets/js/124.8d18d520.js"><link rel="prefetch" href="/assets/js/125.9bb31fa3.js"><link rel="prefetch" href="/assets/js/126.3ebd096f.js"><link rel="prefetch" href="/assets/js/127.b997ff29.js"><link rel="prefetch" href="/assets/js/128.2563df8a.js"><link rel="prefetch" href="/assets/js/129.66e22c94.js"><link rel="prefetch" href="/assets/js/130.95a53543.js"><link rel="prefetch" href="/assets/js/131.efdf58a2.js"><link rel="prefetch" href="/assets/js/132.118ce6c5.js"><link rel="prefetch" href="/assets/js/133.5cc4b4fe.js"><link rel="prefetch" href="/assets/js/134.1df36b8e.js"><link rel="prefetch" href="/assets/js/135.076c8b6f.js"><link rel="prefetch" href="/assets/js/136.4b83d899.js"><link rel="prefetch" href="/assets/js/137.9641d4e2.js"><link rel="prefetch" href="/assets/js/138.6f654fb0.js"><link rel="prefetch" href="/assets/js/139.4eb7b7b1.js"><link rel="prefetch" href="/assets/js/14.d1f30751.js"><link rel="prefetch" href="/assets/js/140.d52d1e7e.js"><link rel="prefetch" href="/assets/js/141.de48315c.js"><link rel="prefetch" href="/assets/js/142.f8e4d68b.js"><link rel="prefetch" href="/assets/js/143.b48ae9d4.js"><link rel="prefetch" href="/assets/js/144.ee750c06.js"><link rel="prefetch" href="/assets/js/145.811e2e1f.js"><link rel="prefetch" href="/assets/js/15.13cca212.js"><link rel="prefetch" href="/assets/js/16.4899876e.js"><link rel="prefetch" href="/assets/js/17.13bc3b8f.js"><link rel="prefetch" href="/assets/js/18.76e876d7.js"><link rel="prefetch" href="/assets/js/19.b5d33ae1.js"><link rel="prefetch" href="/assets/js/20.29dbec92.js"><link rel="prefetch" href="/assets/js/21.96fceba8.js"><link rel="prefetch" href="/assets/js/22.d2b3e267.js"><link rel="prefetch" href="/assets/js/23.64c64b94.js"><link rel="prefetch" href="/assets/js/24.b558a260.js"><link rel="prefetch" href="/assets/js/25.bb57ebb2.js"><link rel="prefetch" href="/assets/js/26.47cd7229.js"><link rel="prefetch" href="/assets/js/27.8d7938d4.js"><link rel="prefetch" href="/assets/js/28.f894eb36.js"><link rel="prefetch" href="/assets/js/29.525cb35a.js"><link rel="prefetch" href="/assets/js/30.cbeef5b7.js"><link rel="prefetch" href="/assets/js/31.51f58f47.js"><link rel="prefetch" href="/assets/js/32.3f80a1ce.js"><link rel="prefetch" href="/assets/js/33.418aa3e9.js"><link rel="prefetch" href="/assets/js/34.ce30b292.js"><link rel="prefetch" href="/assets/js/35.097a405e.js"><link rel="prefetch" href="/assets/js/36.2bca446e.js"><link rel="prefetch" href="/assets/js/37.03c8c74a.js"><link rel="prefetch" href="/assets/js/38.06c1896e.js"><link rel="prefetch" href="/assets/js/39.631eea29.js"><link rel="prefetch" href="/assets/js/40.e5751373.js"><link rel="prefetch" href="/assets/js/41.ef449e99.js"><link rel="prefetch" href="/assets/js/42.835371e5.js"><link rel="prefetch" href="/assets/js/43.65197e24.js"><link rel="prefetch" href="/assets/js/44.788162ac.js"><link rel="prefetch" href="/assets/js/45.06190cdc.js"><link rel="prefetch" href="/assets/js/46.1c3faa0c.js"><link rel="prefetch" href="/assets/js/47.d484bee0.js"><link rel="prefetch" href="/assets/js/48.cf12d96c.js"><link rel="prefetch" href="/assets/js/49.3e165034.js"><link rel="prefetch" href="/assets/js/5.73d03319.js"><link rel="prefetch" href="/assets/js/50.7471e53f.js"><link rel="prefetch" href="/assets/js/51.9f4c51c5.js"><link rel="prefetch" href="/assets/js/52.a26d278e.js"><link rel="prefetch" href="/assets/js/53.299a74e3.js"><link rel="prefetch" href="/assets/js/54.eecc0581.js"><link rel="prefetch" href="/assets/js/55.d5e7f44a.js"><link rel="prefetch" href="/assets/js/56.161de751.js"><link rel="prefetch" href="/assets/js/57.39ee9ae6.js"><link rel="prefetch" href="/assets/js/58.9c84fe43.js"><link rel="prefetch" href="/assets/js/59.3b1cd5b0.js"><link rel="prefetch" href="/assets/js/6.ef81b8ef.js"><link rel="prefetch" href="/assets/js/60.6e21d755.js"><link rel="prefetch" href="/assets/js/61.4b6d6c71.js"><link rel="prefetch" href="/assets/js/62.bed210c2.js"><link rel="prefetch" href="/assets/js/63.5f5863b5.js"><link rel="prefetch" href="/assets/js/64.a0711d11.js"><link rel="prefetch" href="/assets/js/65.fc0d1efe.js"><link rel="prefetch" href="/assets/js/66.7862995d.js"><link rel="prefetch" href="/assets/js/67.6ddfe45a.js"><link rel="prefetch" href="/assets/js/68.c9574c2e.js"><link rel="prefetch" href="/assets/js/69.cbcac00e.js"><link rel="prefetch" href="/assets/js/7.126283bf.js"><link rel="prefetch" href="/assets/js/70.b55af5c9.js"><link rel="prefetch" href="/assets/js/71.976e18f6.js"><link rel="prefetch" href="/assets/js/72.48a62ce2.js"><link rel="prefetch" href="/assets/js/73.49db95e0.js"><link rel="prefetch" href="/assets/js/75.af525202.js"><link rel="prefetch" href="/assets/js/76.bfb124b3.js"><link rel="prefetch" href="/assets/js/77.df40efe1.js"><link rel="prefetch" href="/assets/js/78.3dda516a.js"><link rel="prefetch" href="/assets/js/79.9bccdf64.js"><link rel="prefetch" href="/assets/js/8.4a5e8a86.js"><link rel="prefetch" href="/assets/js/80.8c442cde.js"><link rel="prefetch" href="/assets/js/81.20158d6c.js"><link rel="prefetch" href="/assets/js/82.306c4424.js"><link rel="prefetch" href="/assets/js/83.ef623f34.js"><link rel="prefetch" href="/assets/js/84.5a9ac805.js"><link rel="prefetch" href="/assets/js/85.5bb81ee1.js"><link rel="prefetch" href="/assets/js/86.eacff8d8.js"><link rel="prefetch" href="/assets/js/87.9eadea75.js"><link rel="prefetch" href="/assets/js/88.c0ce378e.js"><link rel="prefetch" href="/assets/js/89.d425ca98.js"><link rel="prefetch" href="/assets/js/9.ed44c863.js"><link rel="prefetch" href="/assets/js/90.879bda9e.js"><link rel="prefetch" href="/assets/js/91.803e109f.js"><link rel="prefetch" href="/assets/js/92.9be6e572.js"><link rel="prefetch" href="/assets/js/93.c7d9adb9.js"><link rel="prefetch" href="/assets/js/94.c297940c.js"><link rel="prefetch" href="/assets/js/95.01a7aa45.js"><link rel="prefetch" href="/assets/js/96.71fd4f7f.js"><link rel="prefetch" href="/assets/js/97.d819ac1f.js"><link rel="prefetch" href="/assets/js/98.a0b0cff5.js"><link rel="prefetch" href="/assets/js/99.25fff382.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.52b9ad0c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.82c89da6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-130b300a><div data-v-130b300a><div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-130b300a data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>木易的OT</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>前端面试,React,Vue,JavaScript,CSS,HTML,HTTP,HTTPS,websocket,UDP,TCP,Webpack,算法,数据结构,LeetCode,小程序,油猴,计算机网络,NodeJs,Vite,Antdesign,EricYangXD,Eric,Chrome,Android,V8,Mac,git,网络安全,开发技巧,路由,router,诗歌,金句,源码,面试,Docker,Shell,clash,Windows</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>EricYangXD</span>
            
          <!---->
          2025
        </a></span></div></div> <div class="hide" data-v-130b300a><header class="navbar" data-v-130b300a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">木易的OT</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      木易的OT
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/EricYangXD" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/2295436007445021" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-130b300a></div> <aside class="sidebar" data-v-130b300a><div class="personal-info-wrapper" data-v-39576ba9 data-v-130b300a><!----> <h3 class="name" data-v-39576ba9>
    EricYangXD
  </h3> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>107</h3> <h6 data-v-39576ba9>文章</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>0</h3> <h6 data-v-39576ba9>标签</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      木易的OT
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/EricYangXD" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/2295436007445021" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/" class="sidebar-heading clickable router-link-active"><span>About</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Android</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>LeetCode</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/handbook/JavaScript/FrontEnd1.html" class="sidebar-link">前端开发技巧(1)</a></li><li><a href="/handbook/JavaScript/FrontEnd2.html" class="sidebar-link">前端开发技巧(2)</a></li><li><a href="/handbook/JavaScript/FrontEnd3.html" aria-current="page" class="active sidebar-link">前端开发技巧(3)</a></li><li><a href="/handbook/JavaScript/Api.html" class="sidebar-link">APIs</a></li><li><a href="/handbook/JavaScript/Promise.html" class="sidebar-link">手写Promise</a></li><li><a href="/handbook/JavaScript/Quill.html" class="sidebar-link">Quill编辑器</a></li><li><a href="/handbook/JavaScript/RegExp.html" class="sidebar-link">正则表达式</a></li><li><a href="/handbook/JavaScript/TS.html" class="sidebar-link">TypeScript</a></li><li><a href="/handbook/JavaScript/JS.html" class="sidebar-link">JavaScript</a></li><li><a href="/handbook/JavaScript/Cojs.html" class="sidebar-link">co.js</a></li><li><a href="/handbook/JavaScript/Function1.html" class="sidebar-link">手写函数1</a></li><li><a href="/handbook/JavaScript/Function2.html" class="sidebar-link">手写函数2</a></li><li><a href="/handbook/JavaScript/PackageManageTools.html" class="sidebar-link">包管理工具</a></li><li><a href="/handbook/JavaScript/Axios.html" class="sidebar-link">用TS封装Axios</a></li><li><a href="/handbook/JavaScript/ESLint.html" class="sidebar-link">ESLint+Prettier</a></li><li><a href="/handbook/JavaScript/Jest.html" class="sidebar-link">Jest</a></li><li><a href="/handbook/JavaScript/NextJS.html" class="sidebar-link">Next.js</a></li><li><a href="/handbook/JavaScript/Mock.html" class="sidebar-link">Mock数据</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>AntDesign</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>小程序</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>开发技巧</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Angular</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Backend（Java Based）</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>油猴</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Nodejs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vite</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Web安全</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Google Chrome V8</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Mac使用记录</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>文章诗句</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Office软件</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>股海浮沉</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>打工人须知</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>记录一些前端知识(3)</h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>EricYangXD</span>
            
          <!---->
          2025
        </a></span></div></div> <div data-v-130b300a><main class="page"><section><div class="page-title"><h1 class="title">记录一些前端知识(3)</h1> <div data-v-f875f3fc><i class="iconfont reco-account" data-v-f875f3fc><span data-v-f875f3fc>EricYangXD</span></i> <i class="iconfont reco-date" data-v-f875f3fc><span data-v-f875f3fc>2022/6/24</span></i> <i class="iconfont reco-eye" data-v-f875f3fc><span id="/handbook/JavaScript/FrontEnd3.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-f875f3fc><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <!----></div></div> <div class="theme-reco-content content__default"><h2 id="前端监控上报数据"><a href="#前端监控上报数据" class="header-anchor">#</a> 前端监控上报数据</h2> <p>重点解析在 <strong>页面实例关闭</strong> 时，如何将监控数据上传到服务端的解决方案。涉及到 4 种方案，分别为：</p> <ul><li>同步<code>XMLHttpRequest</code></li> <li><code>img.src</code></li> <li><code>navigator.sendBeacon</code></li> <li><code>fetch keepalive</code></li></ul> <h3 id="同步-xmlhttprequest"><a href="#同步-xmlhttprequest" class="header-anchor">#</a> 同步 XMLHttpRequest</h3> <p>已废弃。</p> <p>为什么同步 XMLHttpRequest 可以在页面关闭时上传数据？同步请求阻止代码的执行，这会导致屏幕上出现“冻结”和无响应的用户体验。</p> <p>缺点:</p> <ul><li>用户体验差，会阻塞页面切换</li> <li>只有旧版的浏览器支持 Chrome&lt;80</li> <li>无法读取 reponse 的返回值</li></ul> <h3 id="img-src"><a href="#img-src" class="header-anchor">#</a> img.src</h3> <p>创建一个<code>&lt;img&gt;</code>元素，并设置<code>src</code>。大部分的浏览器，都会延迟卸载当前页面，优先加载图像。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">time</span><span class="token operator">:</span> performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://api.wangxiaokai.vip/test?</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>缺点:</p> <ul><li>数据传输不可靠，有可能浏览器卸载当前页面，直接杀掉图像请求</li> <li>只能发起 GET 请求</li> <li>数据大小有限制</li></ul> <h3 id="navigator-sendbeacon"><a href="#navigator-sendbeacon" class="header-anchor">#</a> navigator.sendBeacon</h3> <p>通过 HTTP POST 请求，将少量数据使用异步的方式，发送到服务端。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">reportEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token string">&quot;http://api.wangxiaokai.vip/test&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">time</span><span class="token operator">:</span> performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  navigator<span class="token punctuation">.</span><span class="token function">sendBeacon</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;visibilitychange&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>visiblityState <span class="token operator">===</span> <span class="token string">&quot;hidden&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">reportEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ol><li>浏览器端自动判断合适的时机进行发送。</li> <li>不会产生阻塞，影响当前页面的卸载。</li> <li>不影响下个新页面的加载，不存在性能问题。</li> <li>另外，数据传输可靠。</li> <li>当浏览器将数据成功加入传输队列时，sendBeacon 方法会返回 true，否则返回 false。注意返回值的时机：成功加入传输队列，而不是服务端的处理成功后的返回。</li></ol> <p>缺点:</p> <ul><li>只能发起 POST 请求</li> <li>无法自定义请求头参数</li> <li>数据大小有限制 （Chrome 限制大小为 64kb）</li> <li>只能在 window 事件 visibilitychange 和 beforeunload 中使用，其他事件中回调，会丢失数据</li></ul> <blockquote><p>出于兼容性原因，请确保使用 document.addEventListener 而不是 window.addEventListener 来注册<code>visibilitychange</code>回调。</p></blockquote> <h3 id="fetch-keepalive"><a href="#fetch-keepalive" class="header-anchor">#</a> fetch keepalive</h3> <blockquote><p>The keepalive option can be used to allow the request to outlive the page. Fetch with the keepalive flag is a replacement for the Navigator.sendBeacon() API.
keepalive 选项可用来允许一个请求在页面关闭后继续存在。带 keepalive 标志的 Fetch 可以替代 Navigator.sendBeacon() API。</p></blockquote> <p>标记 keepalive 的 fetch 请求允许在页面卸载后执行。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token string">&quot;http://api.wangxiaokai.vip/test&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">time</span><span class="token operator">:</span> performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">body</span><span class="token operator">:</span> data<span class="token punctuation">,</span>
  <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;Content-Type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">keepalive</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="web-see"><a href="#web-see" class="header-anchor">#</a> web-see</h3> <p>使用第三方库，其原理也是综合了<code>img.src</code>、<code>navigator.sendBeacon</code>、<code>fetch keepalive</code>这几种方式来实现上报。可用来收集并上报：代码报错、性能数据、页面录屏、用户行为、白屏检测等个性化指标数据。(websee)[https://github.com/xy-sea/web-see]。</p> <h2 id="undefined"><a href="#undefined" class="header-anchor">#</a> undefined</h2> <p>不要再直接写 undefined，因为可以局部也起一个叫 undefined 的变量并给它赋值，如果此时用到了 undefined，那么可能出现 bug。示例如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token keyword">undefined</span> <span class="token operator">=</span> <span class="token string">&quot;hello world&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">value is undefined</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">value is not undefined</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> value<span class="token punctuation">;</span>
<span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'value is not undefined'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>推荐的做法：使用<code>void 0</code>或<code>void(0)</code>代替<code>undefined</code>。</p> <p>void 运算符是对给定的表达式进行求值，然后返回 undefined 。而且， void 是不能重新定义的，不然会报语法错误，这样也保证了用 void 来代替 undefined 的不会出现被重定义而造成的 bug。</p> <h2 id="js-判断图片是否被缓存"><a href="#js-判断图片是否被缓存" class="header-anchor">#</a> js 判断图片是否被缓存</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 url 测试图片路径
 被缓存返回true，没被缓存返回false
 */</span>
<span class="token keyword">function</span> <span class="token function">testCache</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;执行&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token string">&quot;http://www.8chedao.com/page/images/webIndex-logo.png&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> myImg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  myImg<span class="token punctuation">.</span>src <span class="token operator">=</span> url<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>myImg<span class="token punctuation">.</span>complete<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;图片被缓存&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;图片没被缓存&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    myImg<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;图片已经下载成功!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="正则-捕获组"><a href="#正则-捕获组" class="header-anchor">#</a> 正则-捕获组</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">&quot;2022-07&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;year&gt;[0-9]{4})-(?&lt;month&gt;[0-9]{2})</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> group <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">.</span>groups<span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>group<span class="token punctuation">.</span>year<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="css-中-html-和-body-的区别"><a href="#css-中-html-和-body-的区别" class="header-anchor">#</a> css 中 html 和 body 的区别</h2> <ol><li>在 html 中，<code>&lt;html&gt;</code>包含<code>&lt;body&gt;</code></li> <li>在 html 文档中，<code>&lt;html&gt;</code>是根元素。</li> <li>在 css 中有一个<code>:root</code>选择器，和<code>html</code>选择器作用一样，甚至<code>:root</code>具有更高的优先级！</li> <li>以下内联属性 Inline Attribute 最初在规范 spec 中分配给了<code>&lt;body&gt;</code>：<code>background</code>、<code>bgcolor</code>、<code>marginbottom</code>、<code>marginleft</code>、<code>marginright</code>、<code>margintop</code>、<code>text</code></li> <li>相应的 CSS 属性：<code>background</code>、<code>background/background-color</code>、<code>margin-bottom</code>、<code>margin-left</code>、<code>margin-right</code>、<code>margin-top</code>、<code>font</code></li> <li><code>rem</code> 单位是相对于文档根目录的。是相对于 <code>&lt;html&gt;</code> 元素的字体大小的。</li> <li>如何将 <code>&lt;html&gt;</code> 上的字体大小设置为百分比，以便在使用 rem 单位时用作重置:<a href="http://snook.ca/archives/html_and_css/font-size-with-rem" target="_blank" rel="nofollow noopener noreferrer">1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>在 body 上设置<code>background-color</code>，</li> <li>在 html 上设置<code>background-color</code>，</li> <li>JavaScript 也存在差异。例如，html 是 <code>document.rootElement</code>，body 是 <code>document.body</code>。</li> <li>body 元素实际上没有浏览器窗口那么高。它只和里面的内容一样高，就像 div 或其他任何东西一样。所以在 body 上设置 background 时要特别注意，背景有可能撑不起来：如果 html 元素没有背景，body 背景将覆盖页面。如果 html 元素上有背景，则 body 背景的行为与任何其他元素一样。所以背景色要么设置在 html 上，要么给 body 设置一个高度，以防万一。</li> <li>将基本字体大小定义为 62.5%，以便以类似于使用 px 的方式方便地调整 rems 大小。</li></ol> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token comment">/* 不考虑兼容性 */</span>
<span class="token selector">html</span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 62.5%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 1.4rem<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token comment">/* =14px */</span>
<span class="token selector">h1</span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 2.4rem<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token comment">/* =24px */</span>

<span class="token comment">/* 考虑兼容性 */</span>
<span class="token selector">html</span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 62.5%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 1.4rem<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token comment">/* =14px */</span>
<span class="token selector">h1</span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 24px<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 2.4rem<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token comment">/* =24px */</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><ol start="13"><li>关键在于区分那些属性是可覆盖的，然后设置在不同的标签上</li></ol> <h2 id="why-not-iframe"><a href="#why-not-iframe" class="header-anchor">#</a> Why Not Iframe</h2> <p>为什么不用 iframe，这几乎是所有微前端方案第一个会被 challenge 的问题。但是大部分微前端方案又不约而同放弃了 iframe 方案，自然是有原因的，并不是为了 &quot;炫技&quot; 或者刻意追求 &quot;特立独行&quot;。</p> <p>如果不考虑体验问题，iframe 几乎是最完美的微前端解决方案了。</p> <p>iframe 最大的特性就是提供了浏览器原生的硬隔离方案，不论是样式隔离、js 隔离这类问题统统都能被完美解决。但他的最大问题也在于他的隔离性无法被突破，导致应用间上下文无法被共享，随之带来的开发体验、产品体验的问题。</p> <ul><li>url 不同步。浏览器刷新 iframe url 状态丢失、后退前进按钮无法使用。</li> <li>UI 不同步，DOM 结构不共享。想象一下屏幕右下角 1/4 的 iframe 里来一个带遮罩层的弹框，同时我们要求这个弹框要浏览器居中显示，还要浏览器 resize 时自动居中。</li> <li>全局上下文完全隔离，内存变量不共享。iframe 内外系统的通信、数据同步等需求，主应用的 cookie 要透传到根域名都不同的子应用中实现免- 登效果。</li> <li>慢。每次子应用进入都是一次浏览器上下文重建、资源重新加载的过程。</li></ul> <p>其中有的问题比较好解决(问题 1)，有的问题我们可以睁一只眼闭一只眼(问题 4)，但有的问题我们则很难解决(问题 3)甚至无法解决(问题 2)，而这些无法解决的问题恰恰又会给产品带来非常严重的体验问题， 最终导致我们舍弃了 iframe 方案。</p> <h2 id="为-iframe-正名"><a href="#为-iframe-正名" class="header-anchor">#</a> 为 iframe 正名</h2> <h2 id="javascript-深拷贝性能分析"><a href="#javascript-深拷贝性能分析" class="header-anchor">#</a> JavaScript 深拷贝性能分析</h2> <h3 id="引用传值"><a href="#引用传值" class="header-anchor">#</a> 引用传值</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">mutate</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  obj<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">mutate</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol><li>对于基本类型，是进行值传递；对于引用类型，传递的是这个对象的指针。</li> <li>在值传递的场景中，函数的形参只是实参的一个副本 ——a copy—— 当函数调用完成后，并不改变实参。但是在 JavaScript 这种引用传递的场景中，函数的形参和实参指向同一个对象，当参数内部改变形参的时候，函数外面的实参也被改变了。</li></ol> <h3 id="浅拷贝-object-assign"><a href="#浅拷贝-object-assign" class="header-anchor">#</a> 浅拷贝：Object.assign ()</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">mutateDeepObject</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  obj<span class="token punctuation">.</span>a<span class="token punctuation">.</span>thing <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">thing</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> copy <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">mutateDeepObject</span><span class="token punctuation">(</span>copy<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>a<span class="token punctuation">.</span>thing<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// prints true</span>

<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token literal-property property">d</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">e</span><span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>a <span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>d<span class="token punctuation">.</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5</span>
b<span class="token punctuation">.</span>d<span class="token punctuation">.</span>e <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>d<span class="token punctuation">.</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 8</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ol><li><code>Object.assign(target, sources...)</code>。它接受任意数量的源对象，枚举它们的所有属性并分配给 target。如果我们使用一个新的空对象 target，那么我们就可以实现对象的复制。注意，第一个参数 target，会被改变！</li> <li>该方法只适合拷贝没有嵌套对象的情况，否则要注意：他只是个浅拷贝，对于深层的对象只是拷贝的指针。修改新的对象可能会导致源对象发生变化！</li> <li>注意：对象解构运算，这也是浅拷贝。</li></ol> <h3 id="深拷贝的几种方法"><a href="#深拷贝的几种方法" class="header-anchor">#</a> 深拷贝的几种方法</h3> <p>深拷贝是一个常见需求，我们可以通过 <code>JSON</code> 转换、递归、lodash 的<code>_.cloneDeep()</code>等方式实现。</p> <h4 id="json-parse-json-stringify"><a href="#json-parse-json-stringify" class="header-anchor">#</a> <code>JSON.parse()</code>+<code>JSON.stringify()</code></h4> <p>将该对象转换为其 JSON 字符串表示形式，然后将其解析回对象。</p> <blockquote><p>缺点</p></blockquote> <ul><li>需要创建一个临时的，可能很大的字符串，只是为了把它重新放回解析器。</li> <li>不能处理循环对象。而且循环对象经常发生。</li> <li>诸如 Map, Set, RegExp, Date, ArrayBuffer 和其他内置类型在进行序列化时会丢失。</li> <li>不能克隆 function。</li> <li>对于值为 undefined 的属性，克隆之后会被丢弃。值为 null 的属性会被保留。可以通过改写<code>JSON.stringify()</code>的第二个参数进行「修复」。</li> <li>原理：<code>JSON.stringify</code> 只能处理基本对象、数组和基本类型，而其他类型的值在转换之后都可能出现出乎意料的结果，例如 Date 会转化为字符串， Set 会转化为 {}。<code>JSON.stringify</code> 甚至完全忽略某些内容，比如 undefined 或函数。</li> <li>除此之外，<code>JSON.parse(JSON.stringify(x))</code> 无法对包含循环引用的对象进行深克隆</li></ul> <h4 id="structured-clone-结构化克隆算法"><a href="#structured-clone-结构化克隆算法" class="header-anchor">#</a> Structured Clone 结构化克隆算法</h4> <p>Structured cloning 是一种现有的算法，用于将值从一个地方转移到另一地方。例如，每当您调用 postMessage 将消息发送到另一个窗口或 WebWorker 时，都会使用它。关于结构化克隆的好处在于它处理循环对象并 支持大量的内置类型。</p> <p>实际上，JavaScript 中提供了一个原生 API 来执行对象的深拷贝：<code>structuredClone()</code>。它可以通过结构化克隆算法创建一个给定值的深拷贝，并且还可以传输原始值的可转移对象。</p> <p><code>structuredClone()</code> 的实用方式很简单，只需将原始对象传递给该函数，它将返回具有不同引用和对象属性引用的深层副本。</p> <p>注意事项：</p> <ol><li>拷贝无限嵌套的对象和数组；</li> <li>拷贝循环引用；当对象中存在循环引用时，仍然可以通过 <code>structuredClone()</code> 进行深拷贝。</li> <li>拷贝各种 JavaScript 类型，例如 Date、Set、Map、Error、RegExp、ArrayBuffer、Blob、File、ImageData 等；</li> <li>拷贝使用 structuredClone()得到的对象；</li> <li><code>structuredClone()</code>不能克隆 DOM 元素。将 HTMLElement 对象传递给 <code>structuredClone()</code>将导致错误。</li> <li>可以拷贝任何可转移的对象。要注意的是，使用可转移对象时必须小心处理，因为一旦对象被转移，原线程将不再拥有该对象的所有权，因此在发送线程中不能再访问该对象。此外，在接收线程中使用可转移对象时，也需要根据需求进行显式释放，否则可能会导致内存泄漏和其他问题。</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> originalObject <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">set</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">regex</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">foo</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">array</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>someBlobData<span class="token punctuation">,</span> <span class="token string">&quot;file.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">error</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Hello!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
originalObject<span class="token punctuation">.</span>circular <span class="token operator">=</span> originalObject<span class="token punctuation">;</span>

<span class="token keyword">const</span> copied <span class="token operator">=</span> <span class="token function">structuredClone</span><span class="token punctuation">(</span>originalObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li><p>在 JavaScript 中，可转移对象（Transferable Objects）是指 ArrayBuffer 和 MessagePort 等类型的对象，它们可以在主线程和 Web Worker 线程之间相互传递，同时还可以实现零拷贝内存共享，提高性能。这是由于可转移对象具有两个特点：</p> <ol><li>可共享：可转移对象本身没有所有权，可以在多个线程之间共享，实现零拷贝内存共享。</li> <li>可转移：调用 Transferable API 时，可转移对象会从发送方（发送线程）转移到接收方（接收线程），不再存在于原始线程中，因此可以避免内存拷贝和分配等开销。</li></ol></li></ul> <ol start="7"><li><p><code>structuredClone()</code> 不能拷贝的数据类型:</p> <ol><li>函数或方法，会抛出异常。</li> <li>DOM 节点，也会抛出异常。</li> <li>属性描述符、setter 和 getter，以及类似的元数据都不能被克隆。</li> <li>对象原型，原型链不能被遍历或拷贝。所以如果克隆一个实例 MyClass，克隆的对象将不再是这个类的一个实例（但是这个类的所有有效属性都将被拷贝）。</li></ol></li> <li><p>支持拷贝的类型如下：</p> <ol><li>JS 内置对象：Array（数组）、ArrayBuffer（数据缓冲区）、Boolean（布尔类型）、DataView（数据视图）、Date（日期类型）、Error（错误类型，包括下面列出的具体类型）、Map（映射类型）、Object （仅指纯对象，如从对象字面量中创建的对象）、原始类型（除 symbol 外，即 number、string、null、undefined、boolean、BigInt）、RegExp（正则表达式）、Set（集合类型）、TypedArray（类型化数组）。</li> <li>Error 类型：Error、EvalError、RangeError、ReferenceError、SyntaxError、TypeError、URIError。</li> <li>Web/API 类型：AudioData、Blob、CryptoKey、DOMException、DOMMatrix、DOMMatrixReadOnly、DOMPoint、DomQuad、DomRect、File、FileList、FileSystemDirectoryHandle、FileSystemFileHandle、FileSystemHandle、ImageBitmap、ImageData、RTCCertificate、VideoFrame。</li></ol></li> <li><p>目前主流浏览器都支持 structuredClone API。</p></li></ol> <h4 id="messagechannel"><a href="#messagechannel" class="header-anchor">#</a> MessageChannel</h4> <p>可以创建一个 MessageChannel 并发送消息。在接收端，消息包含我们原始数据对象的结构化克隆。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">structuralClone</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
     <span class="token keyword">const</span> <span class="token punctuation">{</span>port1<span class="token punctuation">,</span> port2<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MessageChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     port2<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token parameter">ev</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span>ev<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
     port1<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

 <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token comment">/* ... */</span><span class="token punctuation">;</span>
 <span class="token keyword">const</span> clone <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">structuralClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>缺点是它是异步的。虽然这并无大碍，但是有时候你需要使用同步的方式来深度拷贝一个对象。</p> <h4 id="history-api"><a href="#history-api" class="header-anchor">#</a> History API</h4> <p><code>history.pushState()</code>可以提供一个状态对象来保存 URL。这个状态对象使用结构化克隆 - 而且是同步的。</p> <p>为了防止发生任何意外，请使用 <code>history.replaceState()</code> 而不是 <code>history.pushState()</code>。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code> <span class="token keyword">function</span> <span class="token function">structuralClone</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> oldState <span class="token operator">=</span> history<span class="token punctuation">.</span>state<span class="token punctuation">;</span>
		history<span class="token punctuation">.</span><span class="token function">replaceState</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> document<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">const</span> copy <span class="token operator">=</span> history<span class="token punctuation">.</span>state<span class="token punctuation">;</span>
		history<span class="token punctuation">.</span><span class="token function">replaceState</span><span class="token punctuation">(</span>oldState<span class="token punctuation">,</span> document<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> copy<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

 <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token comment">/* ... */</span><span class="token punctuation">;</span>
 <span class="token keyword">const</span> clone <span class="token operator">=</span> <span class="token function">structuralClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="notification-api"><a href="#notification-api" class="header-anchor">#</a> Notification API</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">structuralClone</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Notification</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">data</span><span class="token operator">:</span> obj<span class="token punctuation">,</span> <span class="token literal-property property">silent</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>data<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

 <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token comment">/* ... */</span><span class="token punctuation">;</span>
 <span class="token keyword">const</span> clone <span class="token operator">=</span> <span class="token function">structuralClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>浏览器支持度不够。</p> <h4 id="常规的遍历对象并赋值"><a href="#常规的遍历对象并赋值" class="header-anchor">#</a> 常规的遍历对象并赋值</h4> <p><code>for..in</code>+<code>obj.hasOwnProperty()</code></p> <h4 id="获取对象上非原型链上的属性-京东"><a href="#获取对象上非原型链上的属性-京东" class="header-anchor">#</a> 获取对象上非原型链上的属性（京东）</h4> <p>也就是对象自身的属性（不包括从其原型链继承的属性），可以使用以下几种方法:</p> <ol><li><code>Object.keys(obj)</code>: 返回一个由给定对象的自身可枚举属性键名组成的数组。不包括 Symbol 和不可枚举的属性。</li> <li><code>Object.hasOwn(obj, propName)</code>: 返回一个布尔值，用于判断对象是否具有某个自身属性，包括不可枚举属性。</li> <li><code>obj.hasOwnProperty(propName)</code>: 返回一个布尔值，表示对象自身属性中是否具有指定的属性（即否有指定的键），包括不可枚举属性。推荐使用<code>Object.hasOwn()</code>。</li> <li><code>Object.getOwnPropertyNames(obj)</code>: 返回一个由给定对象的自身可枚举属性键名组成的数组，包括不可枚举属性，但不包括 Symbol 属性。</li> <li><code>Object.getOwnPropertySymbols(obj)</code>: 返回一个由给定对象的自身 Symbol 属性键名组成的数组。</li> <li><code>Object.getOwnPropertyDescriptors(obj)</code>：返回对象自身属性的描述符，包括 Symbol 属性和不可枚举属性。描述符包含属性的值、可枚举性、可配置性等信息。</li> <li><code>Reflect.ownKeys(obj)</code>: 返回一个由目标对象自身的属性键组成的数组，包括 Symbol 属性和不可枚举属性。</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;sym&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">&quot;sym&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 从原型链继承的属性</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>gender <span class="token operator">=</span> <span class="token string">&quot;male&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 添加一个不可枚举属性</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;hidden&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;secret&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 不可枚举属性</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 添加一个可枚举属性</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;public&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 可枚举属性</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['name', 'age', 'public']</span>
<span class="token comment">// 2</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">hasOwn</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">hasOwn</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;gender&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">hasOwn</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;hidden&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">hasOwn</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;public&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token comment">// 3</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&quot;gender&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&quot;hidden&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&quot;public&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token comment">// 4</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyNames</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['name', 'age', 'hidden', 'public']</span>
<span class="token comment">// 5</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertySymbols</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [Symbol(sym)]</span>
<span class="token comment">// 6</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptors</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 如下</span>
<span class="token comment">// {</span>
<span class="token comment">//   &quot;name&quot;: {</span>
<span class="token comment">//     &quot;value&quot;: &quot;John&quot;,</span>
<span class="token comment">//     &quot;writable&quot;: true,</span>
<span class="token comment">//     &quot;enumerable&quot;: true,</span>
<span class="token comment">//     &quot;configurable&quot;: true</span>
<span class="token comment">//   },</span>
<span class="token comment">//   &quot;age&quot;: {</span>
<span class="token comment">//     &quot;value&quot;: 30,</span>
<span class="token comment">//     &quot;writable&quot;: true,</span>
<span class="token comment">//     &quot;enumerable&quot;: true,</span>
<span class="token comment">//     &quot;configurable&quot;: true</span>
<span class="token comment">//   },</span>
<span class="token comment">//   &quot;hidden&quot;: {</span>
<span class="token comment">//     &quot;value&quot;: &quot;secret&quot;,</span>
<span class="token comment">//     &quot;writable&quot;: false,</span>
<span class="token comment">//     &quot;enumerable&quot;: false,</span>
<span class="token comment">//     &quot;configurable&quot;: false</span>
<span class="token comment">//   },</span>
<span class="token comment">//   &quot;public&quot;: {</span>
<span class="token comment">//     &quot;value&quot;: &quot;test&quot;,</span>
<span class="token comment">//     &quot;writable&quot;: false,</span>
<span class="token comment">//     &quot;enumerable&quot;: true,</span>
<span class="token comment">//     &quot;configurable&quot;: false</span>
<span class="token comment">//   }</span>
<span class="token comment">// }</span>

<span class="token comment">// 7</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  ['name', 'age', 'hidden', 'public', Symbol(sym)]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br></div></div><h4 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h4> <ul><li>如果没有循环对象，并且不需要保留内置类型，则可以使用跨浏览器 <code>JSON.parse(JSON.stringify())</code> 获得最快的克隆性能。</li> <li>如果你想要一个适当的结构化克隆，<code>MessageChannel</code> 是你唯一可靠的跨浏览器的选择。</li></ul> <h3 id="console-log-与内存泄漏"><a href="#console-log-与内存泄漏" class="header-anchor">#</a> console.log 与内存泄漏</h3> <ol><li><code>console.log</code> 在 devtools 打开的时候是有内存泄漏的，因为控制台打印的是对象引用，但是不打开 devtools 是不会有内存泄漏的。</li> <li>通过<code>performance.memory.totalJSHeapSize/1024/1024</code>，配合 <code>console.log</code> 打印可以验证。</li> <li><code>string</code> 基本类型因为常量池的存在，同样的字符串实际只会创建一次。而 <code>new String</code> 的话才会在堆中创建一个对象，然后指向常量池中的字符串字面量。</li> <li>nodejs 打印的是序列化后的对象，所以没有内存泄露。</li> <li>生产环境是可以使用 <code>console.log</code> 的，没有内存泄漏问题。</li></ol> <h3 id="peerdependency"><a href="#peerdependency" class="header-anchor">#</a> peerDependency</h3> <p>peerDependency 可以避免核心依赖库被重复下载的问题。比如：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">..</span>.
├── helloWorld
│   └── node_modules
│       ├── packageA
│       ├── plugin1
│       │   └── nodule_modules
│       │       └── packageA
│       └── plugin2
│       │   └── nodule_modules
│       │       └── packageA
<span class="token punctuation">..</span>.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ol><li>此时 helloWorld 本身已经安装了一次 packageA，但是因为因为在 plugin1 和 plugin2 中的 dependencies 也声明了 packageA，所以最后 packageA 会被安装三次，有两次安装是冗余的。</li> <li>如果在 plugin1 和 plugin2 的 package.json 中使用 peerDependency 来声明核心依赖库，例如：</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// plugin1/package.json</span>
<span class="token punctuation">{</span>
	<span class="token string-property property">&quot;peerDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string-property property">&quot;packageA&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.1&quot;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// plugin2/package.json</span>
<span class="token punctuation">{</span>
  <span class="token string-property property">&quot;peerDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;packageA&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.1&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// helloWorld/package.json</span>
<span class="token punctuation">{</span>
  <span class="token string-property property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;packageA&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.1&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><ol start="3"><li>此时在主系统中执行 <code>npm install</code> 生成的依赖图就是这样的：可以看到这时候生成的依赖图是扁平的，packageA 也只会被安装一次。</li></ol> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">..</span>.
├── helloWorld
│   └── node_modules
│       ├── packageA
│       ├── plugin1
│       └── plugin2
<span class="token punctuation">..</span>.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="4"><li>总结：在插件使用 dependencies 声明依赖库的特点：
<ul><li>如果用户显式依赖了核心库，则可以忽略各插件的 peerDependency 声明；</li> <li>如果用户没有显式依赖核心库，则按照插件 peerDependencies 中声明的版本将库安装到项目根目录中；</li> <li>当用户依赖的版本、各插件依赖的版本之间不相互兼容，会报错让用户自行修复；</li></ul></li></ol> <h2 id="webgl"><a href="#webgl" class="header-anchor">#</a> WebGL</h2> <p><a href="http://js1k.com/2016-elemental/demo/2552" target="_blank" rel="nofollow noopener noreferrer">DEMO 网站<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="vue3diff"><a href="#vue3diff" class="header-anchor">#</a> Vue3diff</h2> <p><a href="https://blog.csdn.net/zl_Alien/article/details/106595459" target="_blank" rel="nofollow noopener noreferrer">Vue3 diff<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="iframe-防止他人嵌套自己的网站"><a href="#iframe-防止他人嵌套自己的网站" class="header-anchor">#</a> iframe 防止他人嵌套自己的网站</h2> <p>TODO</p> <ol><li>通过 parent 判断 origin</li></ol> <h2 id="几个框架对比总结"><a href="#几个框架对比总结" class="header-anchor">#</a> 几个框架对比总结</h2> <ol><li>不同框架编译之后的差异：</li></ol> <ul><li>🚀 React 编译之后是 Jsx 函数返回的虚拟 DOM</li> <li>🚀 Vue 编译之后是 render 函数返回的虚拟 DOM</li> <li>🚀 SolidJS 编译之后返回的真实 DOM 字符串</li> <li>🚀 Svelte 编译之后返回的是真实 DOM 片段</li></ul> <ol start="2"><li><p>React 由于架构机制决定了每当状态发生改变，从当前组件开始一直到叶子组件重新加载。</p></li> <li><p>Vue 由于给每个组件建立了 watchEffect 监听机制，每当组件依赖的状态发生改变，当前组件重新加载。</p></li> <li><p>SolidJS 和 Svelte 由于在编译之后就确定了当状态发生改变 UI 随之变化的关系，所以仅仅是具体 DOM 的重新加载。</p></li> <li><p>相对来说，react 更新粒度最粗，但是配合 useMemo/memo 之后可以跟 Vue 差不多，Vue 更新粒度中等，SolidJS 和 Svelte 更新粒度相对最细。</p></li></ol> <h2 id="totp"><a href="#totp" class="header-anchor">#</a> TOTP</h2> <p>基于时间的一次性密码算法（Time-based One-Time Password，简称：TOTP）是一种根据预共享的密钥与当前时间计算一次性密码的算法。</p> <ol><li>前端库：<code>@nest-public/totp</code>，默认使用 SHA1 散列算法和 30 秒的时间步长。</li></ol> <h2 id="本地快速启动-server"><a href="#本地快速启动-server" class="header-anchor">#</a> 本地快速启动 server</h2> <p>有时候我们需要给静态页面或文件，启动服务在浏览器中查看。推荐两个启动服务的 npm 包。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>npx http-server <span class="token punctuation">[</span>path<span class="token punctuation">]</span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span>

<span class="token comment"># 比如</span>
npx http-server <span class="token builtin class-name">.</span> <span class="token parameter variable">-p</span> <span class="token number">8090</span>

<span class="token function">npm</span> repo http-server 可直达仓库地址

npx serve <span class="token punctuation">[</span>path<span class="token punctuation">]</span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span>
<span class="token comment"># 比如</span>
npx serve <span class="token builtin class-name">.</span> <span class="token parameter variable">-p</span> <span class="token number">9090</span>

<span class="token function">npm</span> repo serve 可直达仓库地址
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="js-实现函数重载"><a href="#js-实现函数重载" class="header-anchor">#</a> JS 实现函数重载</h2> <p>不同于 TS，JS 没有类型系统</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createOverload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> fnMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">overload</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> keys <span class="token operator">=</span> args<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">typeof</span> item<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> fn <span class="token operator">=</span> fnMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>keys<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">&quot;没有找到对应的实现&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  overload<span class="token punctuation">.</span><span class="token function-variable function">addImpl</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> fn <span class="token operator">=</span> args<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> fn <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">&quot;最后一个参数必须是函数&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> key <span class="token operator">=</span> args<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    fnMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> overload<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// usage</span>
<span class="token keyword">const</span> getUsers <span class="token operator">=</span> <span class="token function">createOverload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

getUsers<span class="token punctuation">.</span><span class="token function">addImpl</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;查询所有用户&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">searchPage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">,</span> size <span class="token operator">=</span> <span class="token number">10</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;按照页码和数量查询用户&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
getUsers<span class="token punctuation">.</span><span class="token function">addImpl</span><span class="token punctuation">(</span><span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span> searchPage<span class="token punctuation">)</span><span class="token punctuation">;</span>
getUsers<span class="token punctuation">.</span><span class="token function">addImpl</span><span class="token punctuation">(</span><span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;按照姓名查询用户&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">getUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h2 id="画中画"><a href="#画中画" class="header-anchor">#</a> 画中画</h2> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>video</span>
    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>video<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>500px<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>800px<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../Downloads//Have the superpower of fixing containers.mp4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>video</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pipButton<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Open Picture-in-Picture<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">const</span> video <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;video&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> pipButton <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;pipButton&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    pipButton<span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token operator">!</span>document<span class="token punctuation">.</span>pictureInPictureEnabled<span class="token punctuation">;</span>

    pipButton<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>video <span class="token operator">!==</span> document<span class="token punctuation">.</span>pictureInPictureElement<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">await</span> video<span class="token punctuation">.</span><span class="token function">requestPictureInPicture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">await</span> document<span class="token punctuation">.</span><span class="token function">exitPictureInPicture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        <span class="token function">updateVideoButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    video<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;enterpictureinpicture&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      pipButton<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">&quot;Exit Picture-in-Picture&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    video<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;leavepictureinpicture&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      pipButton<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">&quot;Enter Picture-in-Picture&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">updateVideoButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      pipButton<span class="token punctuation">.</span>textContent <span class="token operator">=</span>
        video <span class="token operator">===</span> document<span class="token punctuation">.</span>pictureInPictureElement <span class="token operator">?</span> <span class="token string">&quot;Exit Picture-in-Picture&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Enter Picture-in-Picture&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h2 id="for-和-foreach-的区别"><a href="#for-和-foreach-的区别" class="header-anchor">#</a> for 和 forEach 的区别</h2> <ol><li><code>for</code> 是一个语句，<code>forEach</code> 是一个方法。</li> <li><code>for</code>循环是 js 提出时就有的循环方法。<code>forEach</code>是 ES5 提出的，挂载在可迭代对象原型上的方法，例如<code>Array</code> <code>Set</code> <code>Map</code>。<code>forEach</code>是一个迭代器，负责遍历可迭代对象。</li> <li><code>forEach</code> 是负责遍历（<code>Array Set Map</code>）可迭代对象的，而 <code>for</code> 循环是一种循环机制，只是能通过它遍历出数组。</li> <li>可迭代对象：ES6 中引入了 <code>iterable</code> 类型，<code>Array Set Map String arguments NodeList</code> 都属于 <code>iterable</code>，他们特点就是都拥有 <code>[Symbol.iterator]</code> 方法，包含他的对象被认为是可迭代的 <code>iterable</code>。</li> <li><code>for</code> 可以使用<code>break</code>和<code>continue</code>，<code>forEach</code> 不能。</li> <li><code>for</code> 可以使用<code>return</code>，直接在 Chrome 控制台会报错，用在函数中就行；<code>forEach</code> 中使用 return 的效果类似于 for 循环中的 continue，会跳过当前迭代进入下一个迭代，但不会停止整个 forEach 循环。</li> <li><code>forEach</code>属于迭代器，只能按序依次遍历完成，所以不支持上述的中断行为。</li> <li>一定要在 <code>forEach</code> 中跳出循环呢？其实是有办法的，借助<code>try/catch</code>，在<code>catch</code>中捕获异常，然后<code>return</code>，这样就可以实现跳出循环的效果。但是这样做不太好，因为<code>try/catch</code>会影响性能，所以不推荐这样做。<div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
  arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>message <span class="token operator">===</span> <span class="token string">&quot;end&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li> <li><code>for</code> 可以使用<code>let</code>和<code>const</code>，<code>forEach</code> 不能。</li> <li><code>for</code> 可以使用<code>var</code>，<code>forEach</code> 不能。</li> <li><code>for</code> 可以使用<code>for...of</code>，<code>forEach</code> 不能。</li> <li><code>for</code> 可以使用<code>for...in</code>，<code>forEach</code> 不能。</li> <li><code>for</code> 可以使用<code>for await...of</code>，<code>forEach</code> 不能。</li> <li><code>for</code> 可以使用<code>for await...in</code>，<code>forEach</code> 不能。</li> <li><code>for</code> 可以使用<code>for...await...of</code>，<code>forEach</code> 不能。</li> <li>只要是可迭代对象，调用内部的 <code>Symbol.iterator</code> 都会提供一个迭代器，并根据迭代器返回的<code>next</code> 方法来访问内部，这也是 <code>for...of</code> 的实现原理。</li> <li>完整用法：<code>arr.forEach((self,index,arr) =&gt;{},this)</code></li> <li><code>forEach</code> 删除自身元素，<code>index</code>不可被重置，在 <code>forEach</code> 中我们无法控制 <code>index</code> 的值，它只会无脑的自增直至大于数组的 <code>length</code> 跳出循环。所以也无法删除自身进行 <code>index</code> 重置。</li> <li>在实际开发中，遍历数组同时删除某项的操作十分常见，在使用 <code>forEach</code> 删除时要注意。</li> <li><code>for</code> 循环可以控制循环起点，<code>forEach</code> 的循环起点只能为 0 不能进行人为干预</li> <li>性能比较：<code>for &gt; forEach &gt; map</code> 在 Chrome 62 和 Node.js v9.1.0 环境下：<code>for</code> 循环比 <code>forEach</code> 快 1 倍，<code>forEach</code> 比 <code>map</code> 快 20%左右。</li> <li>原因分析
<ul><li><code>for</code>：for 循环没有额外的函数调用栈和上下文，所以它的实现最为简单。</li> <li><code>forEach</code>：对于 forEach 来说，它的函数签名中包含了参数和上下文，所以性能会低于 for 循环。</li> <li><code>map</code>：map 最慢的原因是因为 map 会返回一个新的数组，数组的创建和赋值会导致分配内存空间，因此会带来较大的性能开销。</li></ul></li></ol> <h2 id="页面加载解析渲染时触发的事件"><a href="#页面加载解析渲染时触发的事件" class="header-anchor">#</a> 页面加载解析渲染时触发的事件</h2> <p>在 HTML 文档加载、解析和渲染到页面的过程中，浏览器会触发一系列事件。这些事件可以用于监测页面的加载状态，并执行相应的操作。</p> <p>DOMContentLoaded 先于 load 完成。</p> <h3 id="domcontentloaded"><a href="#domcontentloaded" class="header-anchor">#</a> DOMContentLoaded</h3> <ul><li>触发时机：当初始的 HTML 文档被完全加载和解析，且所有延迟脚本（<code>&lt;script defer src=&quot;…&quot;&gt;</code> 和 <code>&lt;script type=&quot;module&quot;&gt;</code>）下载和执行完毕后触发，它不会等待图片、子框架和异步脚本 async 等其他内容完成加载。DOMContentLoaded 不会等待样式表加载，但延迟脚本会等待样式表，而且 DOMContentLoaded 事件排在延迟脚本之后。此外，非延迟或异步的脚本（如 <code>&lt;script&gt;</code>）将等待已解析的样式表加载。这个事件不可取消。</li> <li>代表含义：此事件表示 DOM 树已经构建完成，所有的 DOM 元素都可以被访问和操作。通常在这个事件中执行的 JavaScript 代码不会依赖于外部资源的加载。</li></ul> <h3 id="load"><a href="#load" class="header-anchor">#</a> load</h3> <ul><li>触发时机：当整个页面和所有依赖的资源（如图片、样式表、脚本等）都加载完成后触发。该事件不可取消，也不会冒泡。</li> <li>代表含义：此事件表示页面及其所有资源都已完全加载，可以安全地进行任何需要依赖这些资源的操作。</li></ul> <h3 id="beforeunload"><a href="#beforeunload" class="header-anchor">#</a> beforeunload</h3> <ul><li>触发时机：当用户尝试离开当前页面（例如，关闭浏览器、重新加载页面或导航到其他页面）时触发。</li> <li>代表含义：这个事件可以用来提示用户是否真的要离开页面，通常会弹出一个确认对话框。</li></ul> <h3 id="unload"><a href="#unload" class="header-anchor">#</a> unload</h3> <ul><li>触发时机：当页面已经被卸载（即用户离开页面）时触发。</li> <li>代表含义：此事件通常用于清理操作，如关闭连接或保存状态，但不能用于阻止页面的卸载。</li></ul> <h3 id="readystatechange"><a href="#readystatechange" class="header-anchor">#</a> readystatechange</h3> <ul><li>触发时机：当文档的 readyState 属性改变时触发。readyState 可以有以下几个值：
<ul><li>loading：文档正在加载。</li> <li>interactive：文档已就绪，用户可以与其交互，但仍在加载其他资源。</li> <li>complete：文档和所有资源加载完成。</li></ul></li> <li>代表含义：这个事件可以用于在不同的加载阶段执行特定操作。</li></ul> <h3 id="error"><a href="#error" class="header-anchor">#</a> error</h3> <ul><li>触发时机：当页面或资源（如图像、脚本、样式表等）加载失败时触发。</li> <li>代表含义：可以用于处理加载失败的情况，例如，显示错误消息或执行备用逻辑。</li></ul> <h2 id="在-input-标签中-我们可以使用哪些事件"><a href="#在-input-标签中-我们可以使用哪些事件" class="header-anchor">#</a> 在 input 标签中，我们可以使用哪些事件</h2> <ol><li>change：当输入的内容发生改变并且输入框失去焦点时触发。</li> <li>input：当输入框的内容发生变化时触发，适用于实时获取输入内容。</li> <li>focus：当输入框获得焦点时触发。</li> <li>blur：当输入框失去焦点时触发。</li> <li>keydown：当用户按下键盘时触发，包括按键、删除键等，能拿到具体的键名。</li> <li>keyup：当用户松开键盘时触发，包括按键、删除键等，能拿到具体的键名。</li> <li>keypress：：当按下一个可打印字符键时触发（已被弃用，建议使用 keydown 和 keyup），比如按下 backspace 键，shift 键，alt 键等就不会触发。</li> <li>paste：当用户粘贴内容到输入框时触发。</li> <li>cut：当用户剪切内容从输入框时触发。</li> <li>copy：当用户复制内容从输入框时触发。</li> <li>select：当用户选择输入框中的文本时触发。</li></ol> <p>PS:</p> <ul><li>对于 type=&quot;checkbox&quot; 或 type=&quot;radio&quot; 的输入框，可以使用 change 事件来检测状态变化。</li> <li>对于 type=&quot;file&quot; 的输入框，可以使用 change 事件来获取文件选择。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;myInput&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myInput'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Input changed to:'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myInput'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Current input:'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myInput'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'focus'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Input focused'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myInput'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'blur'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Input blurred'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myInput'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'keydown'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Key down:'</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myInput'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'keyup'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Key up:'</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myInput'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'keypress'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Key pressed:'</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myInput'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'paste'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Content pasted:'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myInput'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'cut'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Content cut:'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myInput'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'copy'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Content copied:'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myInput&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;select&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Content selected:&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><h2 id="有用的-js-函数片段"><a href="#有用的-js-函数片段" class="header-anchor">#</a> 有用的 JS 函数片段</h2> <h3 id="js-数值转换为金融字符串"><a href="#js-数值转换为金融字符串" class="header-anchor">#</a> js 数值转换为金融字符串</h3> <h4 id="使用-intl-numberformat"><a href="#使用-intl-numberformat" class="header-anchor">#</a> 使用 Intl.NumberFormat</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">formatCurrency</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 创建一个格式化器</span>
  <span class="token keyword">const</span> formatter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intl<span class="token punctuation">.</span>NumberFormat</span><span class="token punctuation">(</span><span class="token string">&quot;zh-CN&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token string">&quot;currency&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">currency</span><span class="token operator">:</span> <span class="token string">&quot;CNY&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 货币种类，人民币</span>
    <span class="token literal-property property">minimumFractionDigits</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 小数位数</span>
    <span class="token literal-property property">maximumFractionDigits</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> formatter<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 示例</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">formatCurrency</span><span class="token punctuation">(</span><span class="token number">1234567.89</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出: &quot;￥1,234,567.89&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">formatCurrency</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出: &quot;￥100.00&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="使用-number-prototype-tolocalestring"><a href="#使用-number-prototype-tolocalestring" class="header-anchor">#</a> 使用 Number.prototype.toLocaleString</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">formatCurrency</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> value<span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token string">&quot;zh-CN&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token string">&quot;currency&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">currency</span><span class="token operator">:</span> <span class="token string">&quot;CNY&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">minimumFractionDigits</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token literal-property property">maximumFractionDigits</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 示例</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">formatCurrency</span><span class="token punctuation">(</span><span class="token number">1234567.89</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出: &quot;￥1,234,567.89&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">formatCurrency</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出: &quot;￥100.00&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="自定义格式化函数"><a href="#自定义格式化函数" class="header-anchor">#</a> 自定义格式化函数</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">formatCurrency</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 确保值是数字</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

  <span class="token comment">// 将数值转换为字符串，并格式化为货币样式</span>
  <span class="token keyword">const</span> parts <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> integerPart <span class="token operator">=</span> parts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\B(?=(\d{3})+(?!\d))</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 每三位添加逗号</span>
  <span class="token keyword">const</span> decimalPart <span class="token operator">=</span> parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token string">&quot;.&quot;</span> <span class="token operator">+</span> parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 获取小数部分</span>

  <span class="token keyword">return</span> <span class="token string">&quot;￥&quot;</span> <span class="token operator">+</span> integerPart <span class="token operator">+</span> decimalPart<span class="token punctuation">;</span> <span class="token comment">// 拼接符号</span>
<span class="token punctuation">}</span>

<span class="token comment">// 示例</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">formatCurrency</span><span class="token punctuation">(</span><span class="token number">1234567.89</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出: &quot;￥1,234,567.89&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">formatCurrency</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出: &quot;￥100.00&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="如何平滑滚动到元素视图中"><a href="#如何平滑滚动到元素视图中" class="header-anchor">#</a> 如何平滑滚动到元素视图中</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">smoothScroll</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scrollIntoView</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">behavior</span><span class="token operator">:</span> <span class="token string">&quot;smooth&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">smoothScroll</span><span class="token punctuation">(</span><span class="token string">&quot;#fooBar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 平滑滚动到id为fooBar的元素</span>
<span class="token function">smoothScroll</span><span class="token punctuation">(</span><span class="token string">&quot;.fooBar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 平滑滚动到class为fooBar的第一个元素</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="如何生成-uuid"><a href="#如何生成-uuid" class="header-anchor">#</a> 如何生成 UUID？</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">UUIDGeneratorBrowser</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1e7</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token operator">-</span><span class="token number">1e3</span> <span class="token operator">+</span> <span class="token operator">-</span><span class="token number">4e3</span> <span class="token operator">+</span> <span class="token operator">-</span><span class="token number">8e3</span> <span class="token operator">+</span> <span class="token operator">-</span><span class="token number">1e11</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[018]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token punctuation">(</span>c <span class="token operator">^</span> <span class="token punctuation">(</span>crypto<span class="token punctuation">.</span><span class="token function">getRandomValues</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span><span class="token number">15</span> <span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span>c <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">UUIDGeneratorBrowser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '7982fcfe-5721-4632-bede-6000885be57d'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="如何获取选定的文本"><a href="#如何获取选定的文本" class="header-anchor">#</a> 如何获取选定的文本</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">getSelectedText</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> window<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">getSelectedText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'Lorem ipsum'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="如何将文本复制到剪贴板"><a href="#如何将文本复制到剪贴板" class="header-anchor">#</a> 如何将文本复制到剪贴板</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">copyToClipboard</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>navigator <span class="token operator">&amp;&amp;</span> navigator<span class="token punctuation">.</span>clipboard <span class="token operator">&amp;&amp;</span> navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span>writeText<span class="token punctuation">)</span> <span class="token keyword">return</span> navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">writeText</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&quot;The Clipboard API is not available.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="如何切换全屏模式"><a href="#如何切换全屏模式" class="header-anchor">#</a> 如何切换全屏模式</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> fullscreen <span class="token operator">=</span> <span class="token punctuation">(</span>mode <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> el <span class="token operator">=</span> <span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  mode <span class="token operator">?</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">requestFullscreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> document<span class="token punctuation">.</span><span class="token function">exitFullscreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">fullscreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将body以全屏模式打开</span>
<span class="token function">fullscreen</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 退出全屏模式</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="如何检测大写锁定是否打开"><a href="#如何检测大写锁定是否打开" class="header-anchor">#</a> 如何检测大写锁定是否打开</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> msg <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;password-message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;keyup&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  msg<span class="token punctuation">.</span>style <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getModifierState</span><span class="token punctuation">(</span><span class="token string">&quot;CapsLock&quot;</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;display: block&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;display: none&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="如何检查日期是否有效"><a href="#如何检查日期是否有效" class="header-anchor">#</a> 如何检查日期是否有效</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">isDateValid</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token operator">...</span>val<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">isDateValid</span><span class="token punctuation">(</span><span class="token string">&quot;December 17, 1995 03:24:00&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token function">isDateValid</span><span class="token punctuation">(</span><span class="token string">&quot;1995-12-17T03:24:00&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token function">isDateValid</span><span class="token punctuation">(</span><span class="token string">&quot;1995-12-17 T03:24:00&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token function">isDateValid</span><span class="token punctuation">(</span><span class="token string">&quot;Duck&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token function">isDateValid</span><span class="token punctuation">(</span><span class="token number">1995</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token function">isDateValid</span><span class="token punctuation">(</span><span class="token number">1995</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token string">&quot;Duck&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token function">isDateValid</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="如何检查当前用户的首选语言"><a href="#如何检查当前用户的首选语言" class="header-anchor">#</a> 如何检查当前用户的首选语言</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> detectLanguage <span class="token operator">=</span> <span class="token punctuation">(</span>defaultLang <span class="token operator">=</span> <span class="token string">&quot;en-US&quot;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  navigator<span class="token punctuation">.</span>language <span class="token operator">||</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>languages<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> navigator<span class="token punctuation">.</span>languages<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span> defaultLang<span class="token punctuation">;</span>

<span class="token function">detectLanguage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'nl-NL'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="如何检查当前用户的首选颜色方案"><a href="#如何检查当前用户的首选颜色方案" class="header-anchor">#</a> 如何检查当前用户的首选颜色方案</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">prefersDarkColorScheme</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  window <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span>matchMedia <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span><span class="token function">matchMedia</span><span class="token punctuation">(</span><span class="token string">&quot;(prefers-color-scheme: dark)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>matches<span class="token punctuation">;</span>

<span class="token function">prefersDarkColorScheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="如何检查设备是否支持触摸事件"><a href="#如何检查设备是否支持触摸事件" class="header-anchor">#</a> 如何检查设备是否支持触摸事件</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">supportsTouchEvents</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> window <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;ontouchstart&quot;</span> <span class="token keyword">in</span> window<span class="token punctuation">;</span>

<span class="token function">supportsTouchEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="在浏览器分析-npm-包"><a href="#在浏览器分析-npm-包" class="header-anchor">#</a> 在浏览器分析 npm 包</h3> <p><code>[pkg-size.dev](https://pkg-size.dev/)</code>，可以直接在浏览器对 npm 包进行分析（包括占用大小、打包大小、间接依赖项等等）。它的目标是让像我们可以更轻松地探索 npm 生态系统。</p> <h3 id="前端监听手机键盘是否弹起"><a href="#前端监听手机键盘是否弹起" class="header-anchor">#</a> 前端监听手机键盘是否弹起</h3> <p>安卓和 ios 判断手机键盘是否弹起的写法是有所不同的：</p> <ol><li>IOS 端可以通过 <code>focusin</code>、<code>focusout</code> 这两个事件来监听</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;focusin&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 键盘弹出事件处理</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;ios键盘弹出事件处理&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;focusout&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 键盘收起事件处理</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;ios键盘收起事件处理&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ol start="2"><li>安卓只能通过 resize 来判断屏幕大小是否发生变化来判断</li></ol> <p>由于某些 Android 手机收起键盘，输入框不会失去焦点，所以不能通过聚焦和失焦事件来判断。但由于窗口会变化，所以可以通过监听窗口高度的变化来间接监听键盘的弹起与收回。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> innerHeight <span class="token operator">=</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">;</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;resize&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> newInnerHeight <span class="token operator">=</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>innerHeight <span class="token operator">&gt;</span> newInnerHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 键盘弹出事件处理</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;android 键盘弹出事件&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 键盘收起事件处理</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;android 键盘收起事件处理&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ol start="3"><li>因为 ios 和安卓的处理不一样，所以还需要判断系统的代码</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> ua <span class="token operator">=</span> <span class="token keyword">typeof</span> window <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">?</span> window<span class="token punctuation">.</span>navigator<span class="token punctuation">.</span>userAgent <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> _isIOS <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> _isAndroid <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">isIOS</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>_isIOS <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    _isIOS <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">iPhone|iPod|iPad</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>ua<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> _isIOS <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">isAndroid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>_isAndroid <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    _isAndroid <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">Android</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>ua<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> _isAndroid <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><ol start="4"><li>复选框、单选框的点击也会导致<code>focusin</code> 和<code>focusout</code> 的触发，我们需要处理一下，使其点击复选框、单选框这类标签的时候不触发我们的回调函数</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 主要是通过判断一下当前被focus的dom类型</span>
<span class="token comment">// document.activeElement.tagName</span>
<span class="token comment">// tagName为输入框的时候才算触发键盘弹起</span>
<span class="token keyword">const</span> activeDom <span class="token operator">=</span> document<span class="token punctuation">.</span>activeElement<span class="token punctuation">.</span>tagName<span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token string">&quot;INPUT&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;TEXTAREA&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>activeDom<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;只有&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="5"><li>当有横屏功能的时候，resize 也会被触发，增加宽度是否有改变的判断，没有改变，才是真正的键盘弹起</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//初始化的时候获取一次原始宽度</span>
<span class="token keyword">const</span> originWidth <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
<span class="token comment">//结合处理复选框、单选框的点击也会导致`focusin` 和`focusout` 的触发问题的完整回调写法</span>
<span class="token keyword">function</span> <span class="token function">callbackHook</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> resizeWeight <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
  <span class="token keyword">const</span> activeDom <span class="token operator">=</span> document<span class="token punctuation">.</span>activeElement<span class="token punctuation">.</span>tagName<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>resizeWeight <span class="token operator">!==</span> originWidth <span class="token operator">||</span> <span class="token operator">!</span><span class="token punctuation">[</span><span class="token string">&quot;INPUT&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;TEXTAREA&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>activeDom<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>isFocus <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  cb <span class="token operator">&amp;&amp;</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ol start="6"><li>使用应当要注意销毁，也需要尽量减少绑定指令的次数，一般在 form 表单上绑定一个，即可监听这个表单下的所有输入框是否触发手机键盘唤起了</li></ol> <h3 id="页面滚动的代码"><a href="#页面滚动的代码" class="header-anchor">#</a> 页面滚动的代码</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>window<span class="token punctuation">.</span><span class="token function">scroll</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">top</span><span class="token operator">:</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollHeight<span class="token punctuation">,</span> <span class="token literal-property property">behavior</span><span class="token operator">:</span> <span class="token string">&quot;smooth&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

window<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="console-的妙用"><a href="#console-的妙用" class="header-anchor">#</a> console 的妙用</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// Basic logging</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Simple log&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;This is an error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;This is a warning&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Logging tabular data</span>
<span class="token keyword">const</span> users <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token literal-property property">city</span><span class="token operator">:</span> <span class="token string">&quot;New York&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Jane&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token literal-property property">city</span><span class="token operator">:</span> <span class="token string">&quot;San Francisco&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">table</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Grouping logs</span>
console<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token string">&quot;User Details&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;User 1: John&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;User 2: Jane&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">groupEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Timing code execution</span>
console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">&quot;Timer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Some heavy computation</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">&quot;Timer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="currying-的妙用"><a href="#currying-的妙用" class="header-anchor">#</a> Currying 的妙用</h3> <p>柯里化是一种将接受多个参数的函数转换为一系列仅接受一个参数的函数的过程。这项技术可以帮助创建更灵活且可重用的函数，尤其是在函数式编程中特别有用。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">applyDiscount</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">discount</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">price</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> price <span class="token operator">-</span> <span class="token punctuation">(</span>price <span class="token operator">*</span> discount<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> tenPercentOff <span class="token operator">=</span> <span class="token function">applyDiscount</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> twentyPercentOff <span class="token operator">=</span> <span class="token function">applyDiscount</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">tenPercentOff</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 90</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">twentyPercentOff</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 80</span>

<span class="token keyword">const</span> <span class="token function-variable function">applyTax</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">taxRate</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">price</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> price <span class="token operator">+</span> <span class="token punctuation">(</span>price <span class="token operator">*</span> taxRate<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> applyTenPercentTax <span class="token operator">=</span> <span class="token function">applyTax</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">applyTenPercentTax</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 110</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">applyTenPercentTax</span><span class="token punctuation">(</span><span class="token function">twentyPercentOff</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 88</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="记忆化函数-memoization"><a href="#记忆化函数-memoization" class="header-anchor">#</a> 记忆化函数 memoization</h3> <p>memoization 是一种优化技术，涉及缓存昂贵函数调用的结果，并在相同的输入再次出现时返回缓存的结果。这可以显著提高具有大量计算的函数的性能，特别是那些频繁以相同参数调用的函数。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">memoize</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> cache <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> fibonacci <span class="token operator">=</span> <span class="token function">memoize</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> n<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">fibonacci</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 102334155</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="proxy-代理对象"><a href="#proxy-代理对象" class="header-anchor">#</a> Proxy 代理对象</h3> <p>代理对象允许你为另一个对象创建代理，从而能够拦截并重新定义基本操作，如属性查找、赋值、枚举、函数调用等。这为向对象添加自定义行为提供了一种强大的方式。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> receiver</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Getting </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>prop<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> target<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>prop <span class="token operator">===</span> <span class="token string">&quot;age&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> value <span class="token operator">!==</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">&quot;Age must be a number&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Setting </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>prop<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> to </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    target<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> proxyUser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>proxyUser<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Getting name, John</span>
proxyUser<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">35</span><span class="token punctuation">;</span> <span class="token comment">// Setting age to 35</span>
<span class="token comment">// proxyUser.age = '35'; // Throws TypeError</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="_7-种在-javascript-中分解长任务的技术"><a href="#_7-种在-javascript-中分解长任务的技术" class="header-anchor">#</a> 7 种在 JavaScript 中分解长任务的技术</h3> <ol><li>setTimeout() + 递归：将任务分解为多个小任务，每个任务使用 setTimeout() 延迟执行，然后递归地调用自身，直到所有任务完成。</li> <li>Async/Await &amp; Timeout：通过 setTimeout 实现 sleep，然后使用 async/await 实现异步任务。</li> <li>scheduler.postTask(cb, options?)：Scheduler 接口是 Chromium 浏览器相对较新的功能，旨在成为一种一流的工具，用于以更多的控制和更高的效率来安排任务。它基本上是几十年来我们一直依赖的  setTimeout()  的更高级版本。<code>options:{priority: &quot;user-blocking&quot;}</code>通过设置 priority 控制优先级，优先级越高，越先执行。由它安排的所有任务都会被置于任务队列的前端，防止其他任务插队并延迟执行。<code>user-blocking&gt;default&gt;background</code></li> <li>scheduler.yield()</li> <li>requestAnimationFrame()：旨在根据浏览器的重绘周期安排工作。因此，它在调度回调方面非常精确。它总是会在下一次重绘之前执行。</li> <li>MessageChannel()：通常被选作零延迟超时的一种更轻量级的替代方案。与其让浏览器排队计时器并安排回调，不如实例化一个通道并立即向其发送消息</li> <li>Web Workers：将工作从主线程中分离出来</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 1.</span>
<span class="token keyword">function</span> <span class="token function">processItems</span><span class="token punctuation">(</span><span class="token parameter">items<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  index <span class="token operator">=</span> index <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> currentItem <span class="token operator">=</span> items<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;processing item:&quot;</span><span class="token punctuation">,</span> currentItem<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;</span> items<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">processItems</span><span class="token punctuation">(</span>items<span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">processItems</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;e&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;f&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;g&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;h&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;i&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;j&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 2.</span>
<span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">&quot;button&quot;</span><span class="token operator">&gt;</span>count<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Click count<span class="token operator">:</span> <span class="token operator">&lt;</span>span id<span class="token operator">=</span><span class="token string">&quot;clickCount&quot;</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Loop count<span class="token operator">:</span> <span class="token operator">&lt;</span>span id<span class="token operator">=</span><span class="token string">&quot;loopCount&quot;</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  <span class="token keyword">function</span> <span class="token function">waitSync</span><span class="token punctuation">(</span><span class="token parameter">milliseconds</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> start <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start <span class="token operator">&lt;</span> milliseconds<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    clickCount<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>clickCount<span class="token punctuation">.</span>innerText<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> items <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> i <span class="token keyword">of</span> items<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      loopCount<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>loopCount<span class="token punctuation">.</span>innerText<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>

      <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token function">waitSync</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token comment">//  3.</span>
<span class="token keyword">const</span> items <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> i <span class="token keyword">of</span> items<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  loopCount<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>loopCount<span class="token punctuation">.</span>innerText<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>

  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> scheduler<span class="token punctuation">.</span><span class="token function">postTask</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">waitSync</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
scheduler<span class="token punctuation">.</span><span class="token function">postTask</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;postTask - background&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token string">&quot;background&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;setTimeout&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

scheduler<span class="token punctuation">.</span><span class="token function">postTask</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;postTask - default&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// setTimeout</span>
<span class="token comment">// postTask - default</span>
<span class="token comment">// postTask - background</span>

<span class="token comment">// 4.</span>
<span class="token keyword">const</span> items <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> i <span class="token keyword">of</span> items<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  loopCount<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>loopCount<span class="token punctuation">.</span>innerText<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>

  <span class="token keyword">await</span> scheduler<span class="token punctuation">.</span><span class="token function">yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">waitSync</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 5.</span>


<span class="token comment">// 6.</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> i <span class="token keyword">of</span> items<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  loopCount<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>loopCount<span class="token punctuation">.</span>innerText<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>

  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> channel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MessageChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    channel<span class="token punctuation">.</span>port1<span class="token punctuation">.</span>onmessage <span class="token operator">=</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    channel<span class="token punctuation">.</span>port2<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">waitSync</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 7.</span>
<span class="token keyword">const</span> items <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> workerScript <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  function waitSync(milliseconds) {
    const start = Date.now();
    while (Date.now() - start &lt; milliseconds) {}
  }

  self.onmessage = function(e) {
    waitSync(50);
    self.postMessage('Process complete!');
  }
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> blob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span>workerScript<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;text/javascipt&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> i <span class="token keyword">of</span> items<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    worker<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      loopCount<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>loopCount<span class="token punctuation">.</span>innerText<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br></div></div><h3 id="重写-promise-的几个工具函数"><a href="#重写-promise-的几个工具函数" class="header-anchor">#</a> 重写 Promise 的几个工具函数</h3> <p>首先 Promise 有 A+规范和 Promise ES6 规范，其中 A+规范比较简单，ES6 规范比较复杂。我们常用的是 ES6 规范，但是 thenable 的概念是由 A+ 提出来的，所以 ES6 规范也支持 thenable。</p> <p>thenable 是一个对象，它拥有 then 方法，then 方法接受两个参数，第一个参数是成功的回调函数，第二个参数是失败的回调函数。</p> <ol><li>resolve 方法</li> <li>reject 方法</li> <li>then 方法</li> <li>catch 方法</li> <li>finally 方法</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 判断是否是thenable</span>
<span class="token keyword">function</span> <span class="token function">isThenable</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> obj <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> obj <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> obj<span class="token punctuation">.</span>then <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 1. resolve 方法</span>
<span class="token keyword">function</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token keyword">instanceof</span> <span class="token class-name">Promise</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isThenable</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      value<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 2. reject 方法</span>
<span class="token keyword">function</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">reject</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 4. catch 方法</span>
<span class="token class-name">Promise</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">catch</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">onRejected</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> onRejected<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 5. finally 方法</span>
<span class="token class-name">Promise</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span>onFinally<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token function">onFinally</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token parameter">reason</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token function">onFinally</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">throw</span> reason<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h3 id="重写-instanceof"><a href="#重写-instanceof" class="header-anchor">#</a> 重写 instanceof</h3> <p>本质就是判断一个对象是否是某个构造函数的实例，不断去比较构造函数的 prototype 和实例的<strong>proto</strong>原型是否相等。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">myInstanceof</span><span class="token punctuation">(</span><span class="token parameter">instance<span class="token punctuation">,</span> constructor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 首先检查 constructor 是否是一个函数</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> constructor <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">'Right-hand side of &quot;instanceof&quot; is not callable'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 获取构造函数的 prototype</span>
  <span class="token keyword">const</span> prototype <span class="token operator">=</span> constructor<span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>

  <span class="token comment">// 遍历原型链</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>instance<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 检查当前对象的 __proto__ 是否等于构造函数的 prototype</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>instance<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> prototype<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 向上查找原型链</span>
    instance <span class="token operator">=</span> instance<span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id=""><a href="#" class="header-anchor">#</a></h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="-2"><a href="#-2" class="header-anchor">#</a></h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="打开一个页面所触发的事件"><a href="#打开一个页面所触发的事件" class="header-anchor">#</a> 打开一个页面所触发的事件</h2> <p><img src="https://cdn.jsdelivr.net/gh/EricYangXD/vital-images/imgs/20250419160943831.jpeg" alt="页面加载事件"></p></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">5/6/2025</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/handbook/JavaScript/FrontEnd2.html" class="prev">
            前端开发技巧(2)
          </a></span> <span class="next"><a href="/handbook/JavaScript/Api.html">
            APIs
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#前端监控上报数据" class="sidebar-link reco-side-前端监控上报数据" data-v-cb1513f6>前端监控上报数据</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#同步-xmlhttprequest" class="sidebar-link reco-side-同步-xmlhttprequest" data-v-cb1513f6>同步 XMLHttpRequest</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#img-src" class="sidebar-link reco-side-img-src" data-v-cb1513f6>img.src</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#navigator-sendbeacon" class="sidebar-link reco-side-navigator-sendbeacon" data-v-cb1513f6>navigator.sendBeacon</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#fetch-keepalive" class="sidebar-link reco-side-fetch-keepalive" data-v-cb1513f6>fetch keepalive</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#web-see" class="sidebar-link reco-side-web-see" data-v-cb1513f6>web-see</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#undefined" class="sidebar-link reco-side-undefined" data-v-cb1513f6>undefined</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#js-判断图片是否被缓存" class="sidebar-link reco-side-js-判断图片是否被缓存" data-v-cb1513f6>js 判断图片是否被缓存</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#正则-捕获组" class="sidebar-link reco-side-正则-捕获组" data-v-cb1513f6>正则-捕获组</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#css-中-html-和-body-的区别" class="sidebar-link reco-side-css-中-html-和-body-的区别" data-v-cb1513f6>css 中 html 和 body 的区别</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#why-not-iframe" class="sidebar-link reco-side-why-not-iframe" data-v-cb1513f6>Why Not Iframe</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#为-iframe-正名" class="sidebar-link reco-side-为-iframe-正名" data-v-cb1513f6>为 iframe 正名</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#javascript-深拷贝性能分析" class="sidebar-link reco-side-javascript-深拷贝性能分析" data-v-cb1513f6>JavaScript 深拷贝性能分析</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#引用传值" class="sidebar-link reco-side-引用传值" data-v-cb1513f6>引用传值</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#浅拷贝-object-assign" class="sidebar-link reco-side-浅拷贝-object-assign" data-v-cb1513f6>浅拷贝：Object.assign ()</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#深拷贝的几种方法" class="sidebar-link reco-side-深拷贝的几种方法" data-v-cb1513f6>深拷贝的几种方法</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#console-log-与内存泄漏" class="sidebar-link reco-side-console-log-与内存泄漏" data-v-cb1513f6>console.log 与内存泄漏</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#peerdependency" class="sidebar-link reco-side-peerdependency" data-v-cb1513f6>peerDependency</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#webgl" class="sidebar-link reco-side-webgl" data-v-cb1513f6>WebGL</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#vue3diff" class="sidebar-link reco-side-vue3diff" data-v-cb1513f6>Vue3diff</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#iframe-防止他人嵌套自己的网站" class="sidebar-link reco-side-iframe-防止他人嵌套自己的网站" data-v-cb1513f6>iframe 防止他人嵌套自己的网站</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#几个框架对比总结" class="sidebar-link reco-side-几个框架对比总结" data-v-cb1513f6>几个框架对比总结</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#totp" class="sidebar-link reco-side-totp" data-v-cb1513f6>TOTP</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#本地快速启动-server" class="sidebar-link reco-side-本地快速启动-server" data-v-cb1513f6>本地快速启动 server</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#js-实现函数重载" class="sidebar-link reco-side-js-实现函数重载" data-v-cb1513f6>JS 实现函数重载</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#画中画" class="sidebar-link reco-side-画中画" data-v-cb1513f6>画中画</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#for-和-foreach-的区别" class="sidebar-link reco-side-for-和-foreach-的区别" data-v-cb1513f6>for 和 forEach 的区别</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#页面加载解析渲染时触发的事件" class="sidebar-link reco-side-页面加载解析渲染时触发的事件" data-v-cb1513f6>页面加载解析渲染时触发的事件</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#domcontentloaded" class="sidebar-link reco-side-domcontentloaded" data-v-cb1513f6>DOMContentLoaded</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#load" class="sidebar-link reco-side-load" data-v-cb1513f6>load</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#beforeunload" class="sidebar-link reco-side-beforeunload" data-v-cb1513f6>beforeunload</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#unload" class="sidebar-link reco-side-unload" data-v-cb1513f6>unload</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#readystatechange" class="sidebar-link reco-side-readystatechange" data-v-cb1513f6>readystatechange</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#error" class="sidebar-link reco-side-error" data-v-cb1513f6>error</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#在-input-标签中-我们可以使用哪些事件" class="sidebar-link reco-side-在-input-标签中-我们可以使用哪些事件" data-v-cb1513f6>在 input 标签中，我们可以使用哪些事件</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#有用的-js-函数片段" class="sidebar-link reco-side-有用的-js-函数片段" data-v-cb1513f6>有用的 JS 函数片段</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#js-数值转换为金融字符串" class="sidebar-link reco-side-js-数值转换为金融字符串" data-v-cb1513f6>js 数值转换为金融字符串</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#如何平滑滚动到元素视图中" class="sidebar-link reco-side-如何平滑滚动到元素视图中" data-v-cb1513f6>如何平滑滚动到元素视图中</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#如何生成-uuid" class="sidebar-link reco-side-如何生成-uuid" data-v-cb1513f6>如何生成 UUID？</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#如何获取选定的文本" class="sidebar-link reco-side-如何获取选定的文本" data-v-cb1513f6>如何获取选定的文本</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#如何将文本复制到剪贴板" class="sidebar-link reco-side-如何将文本复制到剪贴板" data-v-cb1513f6>如何将文本复制到剪贴板</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#如何切换全屏模式" class="sidebar-link reco-side-如何切换全屏模式" data-v-cb1513f6>如何切换全屏模式</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#如何检测大写锁定是否打开" class="sidebar-link reco-side-如何检测大写锁定是否打开" data-v-cb1513f6>如何检测大写锁定是否打开</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#如何检查日期是否有效" class="sidebar-link reco-side-如何检查日期是否有效" data-v-cb1513f6>如何检查日期是否有效</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#如何检查当前用户的首选语言" class="sidebar-link reco-side-如何检查当前用户的首选语言" data-v-cb1513f6>如何检查当前用户的首选语言</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#如何检查当前用户的首选颜色方案" class="sidebar-link reco-side-如何检查当前用户的首选颜色方案" data-v-cb1513f6>如何检查当前用户的首选颜色方案</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#如何检查设备是否支持触摸事件" class="sidebar-link reco-side-如何检查设备是否支持触摸事件" data-v-cb1513f6>如何检查设备是否支持触摸事件</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#在浏览器分析-npm-包" class="sidebar-link reco-side-在浏览器分析-npm-包" data-v-cb1513f6>在浏览器分析 npm 包</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#前端监听手机键盘是否弹起" class="sidebar-link reco-side-前端监听手机键盘是否弹起" data-v-cb1513f6>前端监听手机键盘是否弹起</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#页面滚动的代码" class="sidebar-link reco-side-页面滚动的代码" data-v-cb1513f6>页面滚动的代码</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#console-的妙用" class="sidebar-link reco-side-console-的妙用" data-v-cb1513f6>console 的妙用</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#currying-的妙用" class="sidebar-link reco-side-currying-的妙用" data-v-cb1513f6>Currying 的妙用</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#记忆化函数-memoization" class="sidebar-link reco-side-记忆化函数-memoization" data-v-cb1513f6>记忆化函数 memoization</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#proxy-代理对象" class="sidebar-link reco-side-proxy-代理对象" data-v-cb1513f6>Proxy 代理对象</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#_7-种在-javascript-中分解长任务的技术" class="sidebar-link reco-side-_7-种在-javascript-中分解长任务的技术" data-v-cb1513f6>7 种在 JavaScript 中分解长任务的技术</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#重写-promise-的几个工具函数" class="sidebar-link reco-side-重写-promise-的几个工具函数" data-v-cb1513f6>重写 Promise 的几个工具函数</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#重写-instanceof" class="sidebar-link reco-side-重写-instanceof" data-v-cb1513f6>重写 instanceof</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#" class="sidebar-link reco-side-" data-v-cb1513f6></a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#-2" class="sidebar-link reco-side--2" data-v-cb1513f6></a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/JavaScript/FrontEnd3.html#打开一个页面所触发的事件" class="sidebar-link reco-side-打开一个页面所触发的事件" data-v-cb1513f6>打开一个页面所触发的事件</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div></div></div></div>
    <script src="/assets/js/app.6c202dd4.js" defer></script><script src="/assets/js/4.e4a90c70.js" defer></script><script src="/assets/js/3.ad1ccd56.js" defer></script><script src="/assets/js/2.0240bc78.js" defer></script><script src="/assets/js/1.b94e320b.js" defer></script><script src="/assets/js/74.0fb29e26.js" defer></script>
  </body>
</html>
