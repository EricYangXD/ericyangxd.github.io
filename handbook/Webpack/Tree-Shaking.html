<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Tree Shaking | 木易的OT</title>
    <meta name="generator" content="VuePress 1.9.10">
    <script>
        (function() {
          if (location.href.indexOf('github.io') > -1 || location.href.indexOf('gitee.io') > -1) {
             location.href = 'https://ericyangxd.top'
           }
        })();
        </script><script type='application/ld+json'>
          {
            "@context": "https://schema.org",
            "@type": "Article",
            "headline": "Tree Shaking",
            "url": "https://ericyangxd.top/handbook/Webpack/Tree-Shaking.html",
            "image": [
              "https://ericyangxd.top/logo.png"
              ],
            "datePublished": "2022-02-08T00:00:00.000Z",
            "dateModified": "2025-01-23T00:00:00.000Z",
            "author": [{
                "@type": "Person",
                "name": "EricYangXD",
                "url": "https://github.com/EricYangXD/ericyangxd.github.io"
            }]
          }
      </script>
    <meta name="description" content="前端面试,React,Vue,JavaScript,CSS,HTML,HTTP,HTTPS,websocket,UDP,TCP,Webpack,算法,数据结构,LeetCode,小程序,油猴,计算机网络,NodeJs,Vite,Antdesign,EricYangXD,Eric,Chrome,Android,V8,Mac,git,网络安全,开发技巧,路由,router,诗歌,金句,源码,面试,Docker,Shell,clash,Windows">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="keywords" content="前端面试,React,Vue,JavaScript,CSS,HTML,HTTP,TCP,Webpack,算法,数据结构,LeetCode,小程序,油猴,计算机网络,NodeJs,Vite,Antdesign,EricYangXD,Eric,Chrome,Android,V8,Mac,git,网络安全,开发技巧,路由,router,话费,充值,诗歌,金句,源码,面试,docker">
    
    <link rel="preload" href="/assets/css/0.styles.82c89da6.css" as="style"><link rel="preload" href="/assets/js/app.9dbaa7ad.js" as="script"><link rel="preload" href="/assets/js/4.e4a90c70.js" as="script"><link rel="preload" href="/assets/js/3.ad1ccd56.js" as="script"><link rel="preload" href="/assets/js/2.0240bc78.js" as="script"><link rel="preload" href="/assets/js/1.b94e320b.js" as="script"><link rel="preload" href="/assets/js/139.297af1ee.js" as="script"><link rel="prefetch" href="/assets/js/10.d09001be.js"><link rel="prefetch" href="/assets/js/100.224e82db.js"><link rel="prefetch" href="/assets/js/101.1d539bb9.js"><link rel="prefetch" href="/assets/js/102.0d1728a5.js"><link rel="prefetch" href="/assets/js/103.43ff595b.js"><link rel="prefetch" href="/assets/js/104.84588066.js"><link rel="prefetch" href="/assets/js/105.2b31342f.js"><link rel="prefetch" href="/assets/js/106.f5444f16.js"><link rel="prefetch" href="/assets/js/107.fc3576aa.js"><link rel="prefetch" href="/assets/js/108.9373d153.js"><link rel="prefetch" href="/assets/js/109.479676ad.js"><link rel="prefetch" href="/assets/js/11.74c854af.js"><link rel="prefetch" href="/assets/js/110.89c8fd9f.js"><link rel="prefetch" href="/assets/js/111.15b64467.js"><link rel="prefetch" href="/assets/js/112.71ec5b28.js"><link rel="prefetch" href="/assets/js/113.f7cb9e25.js"><link rel="prefetch" href="/assets/js/114.8209d551.js"><link rel="prefetch" href="/assets/js/115.5bd7b3b7.js"><link rel="prefetch" href="/assets/js/116.8d604475.js"><link rel="prefetch" href="/assets/js/117.d687cc9f.js"><link rel="prefetch" href="/assets/js/118.afde34fb.js"><link rel="prefetch" href="/assets/js/119.e11d7ee3.js"><link rel="prefetch" href="/assets/js/120.6f8598e7.js"><link rel="prefetch" href="/assets/js/121.279e086f.js"><link rel="prefetch" href="/assets/js/122.ff000a0f.js"><link rel="prefetch" href="/assets/js/123.641f55f9.js"><link rel="prefetch" href="/assets/js/124.0d0c428a.js"><link rel="prefetch" href="/assets/js/125.913a19ee.js"><link rel="prefetch" href="/assets/js/126.7a6aba9c.js"><link rel="prefetch" href="/assets/js/127.0c516ade.js"><link rel="prefetch" href="/assets/js/128.0574b092.js"><link rel="prefetch" href="/assets/js/129.8887261b.js"><link rel="prefetch" href="/assets/js/130.b53c8bfd.js"><link rel="prefetch" href="/assets/js/131.9ef37f50.js"><link rel="prefetch" href="/assets/js/132.9ab4b4b7.js"><link rel="prefetch" href="/assets/js/133.97742083.js"><link rel="prefetch" href="/assets/js/134.01313643.js"><link rel="prefetch" href="/assets/js/135.5a954551.js"><link rel="prefetch" href="/assets/js/136.fd7f0d32.js"><link rel="prefetch" href="/assets/js/137.0e28b53f.js"><link rel="prefetch" href="/assets/js/138.7c1bcac8.js"><link rel="prefetch" href="/assets/js/14.d1f30751.js"><link rel="prefetch" href="/assets/js/140.ee9fd7ee.js"><link rel="prefetch" href="/assets/js/15.13cca212.js"><link rel="prefetch" href="/assets/js/16.4899876e.js"><link rel="prefetch" href="/assets/js/17.13bc3b8f.js"><link rel="prefetch" href="/assets/js/18.76e876d7.js"><link rel="prefetch" href="/assets/js/19.b5d33ae1.js"><link rel="prefetch" href="/assets/js/20.29dbec92.js"><link rel="prefetch" href="/assets/js/21.96fceba8.js"><link rel="prefetch" href="/assets/js/22.d2b3e267.js"><link rel="prefetch" href="/assets/js/23.64c64b94.js"><link rel="prefetch" href="/assets/js/24.b558a260.js"><link rel="prefetch" href="/assets/js/25.bb57ebb2.js"><link rel="prefetch" href="/assets/js/26.47cd7229.js"><link rel="prefetch" href="/assets/js/27.8d7938d4.js"><link rel="prefetch" href="/assets/js/28.f894eb36.js"><link rel="prefetch" href="/assets/js/29.525cb35a.js"><link rel="prefetch" href="/assets/js/30.cbeef5b7.js"><link rel="prefetch" href="/assets/js/31.51f58f47.js"><link rel="prefetch" href="/assets/js/32.3f80a1ce.js"><link rel="prefetch" href="/assets/js/33.418aa3e9.js"><link rel="prefetch" href="/assets/js/34.ce30b292.js"><link rel="prefetch" href="/assets/js/35.097a405e.js"><link rel="prefetch" href="/assets/js/36.2bca446e.js"><link rel="prefetch" href="/assets/js/37.03c8c74a.js"><link rel="prefetch" href="/assets/js/38.06c1896e.js"><link rel="prefetch" href="/assets/js/39.631eea29.js"><link rel="prefetch" href="/assets/js/40.aefbd995.js"><link rel="prefetch" href="/assets/js/41.34037413.js"><link rel="prefetch" href="/assets/js/42.f71a3339.js"><link rel="prefetch" href="/assets/js/43.a5f1c40c.js"><link rel="prefetch" href="/assets/js/44.788162ac.js"><link rel="prefetch" href="/assets/js/45.06190cdc.js"><link rel="prefetch" href="/assets/js/46.1c3faa0c.js"><link rel="prefetch" href="/assets/js/47.d484bee0.js"><link rel="prefetch" href="/assets/js/48.cf12d96c.js"><link rel="prefetch" href="/assets/js/49.b73c53bf.js"><link rel="prefetch" href="/assets/js/5.73d03319.js"><link rel="prefetch" href="/assets/js/50.ac3ee5ec.js"><link rel="prefetch" href="/assets/js/51.9f4c51c5.js"><link rel="prefetch" href="/assets/js/52.54ef7ea2.js"><link rel="prefetch" href="/assets/js/53.8e00ebf2.js"><link rel="prefetch" href="/assets/js/54.a8079928.js"><link rel="prefetch" href="/assets/js/55.5374dfb1.js"><link rel="prefetch" href="/assets/js/56.a40f5a1b.js"><link rel="prefetch" href="/assets/js/57.39ee9ae6.js"><link rel="prefetch" href="/assets/js/58.9c84fe43.js"><link rel="prefetch" href="/assets/js/59.9cc3c454.js"><link rel="prefetch" href="/assets/js/6.ef81b8ef.js"><link rel="prefetch" href="/assets/js/60.9555c624.js"><link rel="prefetch" href="/assets/js/61.f1763db0.js"><link rel="prefetch" href="/assets/js/62.dbe0df0e.js"><link rel="prefetch" href="/assets/js/63.23403b01.js"><link rel="prefetch" href="/assets/js/64.23f11329.js"><link rel="prefetch" href="/assets/js/65.ef672003.js"><link rel="prefetch" href="/assets/js/66.9c070dd0.js"><link rel="prefetch" href="/assets/js/67.07fa302c.js"><link rel="prefetch" href="/assets/js/68.b73fb6b7.js"><link rel="prefetch" href="/assets/js/69.7dce264a.js"><link rel="prefetch" href="/assets/js/7.126283bf.js"><link rel="prefetch" href="/assets/js/70.4b1d4eda.js"><link rel="prefetch" href="/assets/js/71.23a6349a.js"><link rel="prefetch" href="/assets/js/72.3c2cab68.js"><link rel="prefetch" href="/assets/js/73.b8c27236.js"><link rel="prefetch" href="/assets/js/74.4c17685f.js"><link rel="prefetch" href="/assets/js/75.442b50be.js"><link rel="prefetch" href="/assets/js/76.6e22efae.js"><link rel="prefetch" href="/assets/js/77.7a271692.js"><link rel="prefetch" href="/assets/js/78.2ebbbd98.js"><link rel="prefetch" href="/assets/js/79.04242639.js"><link rel="prefetch" href="/assets/js/8.4a5e8a86.js"><link rel="prefetch" href="/assets/js/80.425f3c74.js"><link rel="prefetch" href="/assets/js/81.bb37bddb.js"><link rel="prefetch" href="/assets/js/82.c6811fad.js"><link rel="prefetch" href="/assets/js/83.b7daeed4.js"><link rel="prefetch" href="/assets/js/84.123f6b1b.js"><link rel="prefetch" href="/assets/js/85.f64644ba.js"><link rel="prefetch" href="/assets/js/86.ae125169.js"><link rel="prefetch" href="/assets/js/87.69cebc81.js"><link rel="prefetch" href="/assets/js/88.c41dcb51.js"><link rel="prefetch" href="/assets/js/89.f16f9b5e.js"><link rel="prefetch" href="/assets/js/9.ed44c863.js"><link rel="prefetch" href="/assets/js/90.0967cadf.js"><link rel="prefetch" href="/assets/js/91.d3d12213.js"><link rel="prefetch" href="/assets/js/92.c50dafb4.js"><link rel="prefetch" href="/assets/js/93.79404a9c.js"><link rel="prefetch" href="/assets/js/94.3c0c5117.js"><link rel="prefetch" href="/assets/js/95.8a0861c3.js"><link rel="prefetch" href="/assets/js/96.da51c5d6.js"><link rel="prefetch" href="/assets/js/97.140cdb90.js"><link rel="prefetch" href="/assets/js/98.4f80efb4.js"><link rel="prefetch" href="/assets/js/99.1d8d9b4c.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.52b9ad0c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.82c89da6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-130b300a><div data-v-130b300a><div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-130b300a data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>木易的OT</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>前端面试,React,Vue,JavaScript,CSS,HTML,HTTP,HTTPS,websocket,UDP,TCP,Webpack,算法,数据结构,LeetCode,小程序,油猴,计算机网络,NodeJs,Vite,Antdesign,EricYangXD,Eric,Chrome,Android,V8,Mac,git,网络安全,开发技巧,路由,router,诗歌,金句,源码,面试,Docker,Shell,clash,Windows</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>EricYangXD</span>
            
          <!---->
          2025
        </a></span></div></div> <div class="hide" data-v-130b300a><header class="navbar" data-v-130b300a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">木易的OT</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      木易的OT
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/EricYangXD" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/2295436007445021" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-130b300a></div> <aside class="sidebar" data-v-130b300a><div class="personal-info-wrapper" data-v-39576ba9 data-v-130b300a><!----> <h3 class="name" data-v-39576ba9>
    EricYangXD
  </h3> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>102</h3> <h6 data-v-39576ba9>文章</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>0</h3> <h6 data-v-39576ba9>标签</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      木易的OT
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/EricYangXD" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/2295436007445021" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/" class="sidebar-heading clickable router-link-active"><span>About</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Android</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>LeetCode</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>AntDesign</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>小程序</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Webpack</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/handbook/Webpack/Basic.html" class="sidebar-link">Webpack基础知识</a></li><li><a href="/handbook/Webpack/Plugin-Loader.html" class="sidebar-link">常用插件和Loader</a></li><li><a href="/handbook/Webpack/Tree-Shaking.html" aria-current="page" class="active sidebar-link">Tree Shaking</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>开发技巧</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Angular</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Backend（Java Based）</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>油猴</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Nodejs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vite</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Web安全</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Google Chrome V8</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Mac使用记录</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>文章诗句</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Office软件</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>股海浮沉</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>打工人须知</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>Tree Shaking</h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>EricYangXD</span>
            
          <!---->
          2025
        </a></span></div></div> <div data-v-130b300a><main class="page"><section><div class="page-title"><h1 class="title">Tree Shaking</h1> <div data-v-f875f3fc><i class="iconfont reco-account" data-v-f875f3fc><span data-v-f875f3fc>EricYangXD</span></i> <i class="iconfont reco-date" data-v-f875f3fc><span data-v-f875f3fc>2022/2/8</span></i> <i class="iconfont reco-eye" data-v-f875f3fc><span id="/handbook/Webpack/Tree-Shaking.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-f875f3fc><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <!----></div></div> <div class="theme-reco-content content__default"><h2 id="tree-shaking-定义"><a href="#tree-shaking-定义" class="header-anchor">#</a> Tree Shaking 定义</h2> <ul><li>利用 ES Module 可以进行静态分析的特点来检测模块内容的导出、导入以及被使用的情况，保留 Live Code。</li> <li>Rollup 对 Tree-shaking 的定义已经不仅仅是 ES Module 相关，此外它还支持了 DCE -- 消除不会被执行和没有副作用（Side Effect） 的 Dead Code，即 DCE 过程。</li> <li>Tree Shaking 指基于 ES Module 进行静态分析，通过 AST 将用不到的函数进行移除，从而减小打包体积。</li> <li>与代码压缩不同，代码压缩主要是移除模块内部的无效代码，而 Tree Shaking 则是移除模块之间未使用的导出。</li></ul> <h3 id="原理"><a href="#原理" class="header-anchor">#</a> 原理</h3> <ul><li>ESM 要求所有的导入导出语句只能出现在模块顶层，且导入导出的模块名必须为字符串常量，所以，ESM 下模块之间的依赖关系是高度确定的，与运行状态无关，编译工具只需要对 ESM 模块做静态分析，就可以从代码字面量中推断出哪些模块值未曾被其它模块使用，这是实现 Tree Shaking 技术的必要条件。</li> <li>webpack5 已经自带了这个功能了，当打包环境为 <code>production: true</code> 时，默认开启 <code>tree-shaking</code> 功能。</li></ul> <h3 id="在-webpack-中实现-tree-shaking-的原理"><a href="#在-webpack-中实现-tree-shaking-的原理" class="header-anchor">#</a> 在 Webpack 中实现 Tree Shaking 的原理</h3> <p>Webpack 中，Tree-shaking 的实现一是「先标记出模块导出值中哪些没有被用过」，二是「使用 Terser、UglifyJS 等 DCE 工具删掉这些没被用到的导出语句」。标记过程大致可划分为三个步骤：</p> <ol><li>Make （构建）阶段，收集模块导出变量并记录到模块依赖关系图 ModuleGraph 变量中</li> <li>Seal （封装阶段），遍历 ModuleGraph 标记模块导出变量有没有被使用</li> <li>生成产物时，若变量没有被其它模块使用则删除对应的导出语句</li></ol> <h3 id="详细一点"><a href="#详细一点" class="header-anchor">#</a> 详细一点</h3> <p>Webpack 中 Tree Shaking 的实现分为如下步骤：</p> <ul><li>在 <code>FlagDependencyExportsPlugin</code> 插件中根据模块的 dependencies 列表收集模块导出值，并记录到 ModuleGraph 体系的 <code>exportsInfo</code> 中；</li> <li>在 <code>FlagDependencyUsagePlugin</code> 插件中收集模块的导出值的使用情况，并记录到 <code>exportInfo._usedInRuntime</code> 集合中；</li> <li>在 <code>HarmonyExportXXXDependency.Template.apply</code> 方法中根据导出值的使用情况生成不同的导出语句；</li> <li>使用 DCE（Terser、UglifyJS 等）工具删除 Dead Code，实现完整的树摇效果。</li></ul> <h2 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h2> <ol><li>使用&gt;= ES2015 模块语法（即 import 和 export）</li> <li>确保没有编译器将 ES2015 模块语法转换为 CommonJS 的（这是现在常用的@babel/preset-env 的默认行为）</li> <li>在项目的 package.json 文件中，添加<code>&quot;sideEffects&quot;: &quot;false&quot;</code>属性</li> <li>使用 <code>mode: &quot;production&quot;</code>的配置项以启用更多优化项，包括压缩代码与 tree shaking</li></ol> <h3 id="在-webpack-中启动-tree-shaking"><a href="#在-webpack-中启动-tree-shaking" class="header-anchor">#</a> 在 Webpack 中启动 Tree Shaking</h3> <p>在 Webpack 中，启动 Tree Shaking 功能必须同时满足三个条件：</p> <ol><li><p>使用 ESM 规范编写模块代码 - 绝对的大前提</p></li> <li><p>配置 <code>optimization.usedExports = true</code>，启动标记功能 -（在开发环境启动 Tree Shaking）</p></li> <li><p>启动代码优化功能，可以通过如下方式实现：</p> <ul><li>配置 <code>mode = production</code> - 在 Webpack5 中，Tree Shaking 在生产环境下默认启动</li> <li>配置 <code>optimization.minimize = true</code> -（在开发环境启动 Tree Shaking）</li> <li>提供 <code>optimization.minimizer</code> 数组 -（在开发环境启动 Tree Shaking）</li></ul></li></ol> <h2 id="tips-实践"><a href="#tips-实践" class="header-anchor">#</a> tips 实践</h2> <ol><li>当使用语法 <code>import *</code> 时，Tree Shaking 依然生效。</li> <li>Tree Shaking 甚至可对 JSON 进行优化。原理是因为 JSON 格式简单，通过 AST 容易预测结果，不像 JS 对象有复杂的类型与副作用。</li> <li>为了减小生产环境体积，我们可以使用一些支持 ES 的 package，比如使用 <code>lodash-es</code>/<code>babel-plugin-lodash</code> 替代 <code>lodash</code>。</li> <li>我们可以在 <a href="//npm.devtool.tech">npm.devtool.tech</a> (opens new window)中查看某个库是否支持 Tree Shaking。</li> <li>使用 <code>/*#__PURE__*/</code> 标注纯函数调用：在调用语句前添加 <code>/*#__PURE__*/</code> 备注，明确告诉 Webpack 该次函数调用并不会对上下文环境产生副作用</li> <li>禁止 Babel 转译模块导入导出语句：Babel 可以将 <code>import/export</code> 风格的 ESM 语句等价转译为 CommonJS 风格的模块化语句，但该功能却导致 Webpack 无法对转译后的模块导入导出内容做静态分析</li> <li>优化导出值的粒度：比如 default 导出了一个包含多个属性/值的对象，即使实际上只用到导出值的其中一个属性，整个 default 对象依然会被完整保留。所以实际开发中，应该尽量保持导出值颗粒度和原子性</li> <li>避免无意义的赋值，原因参考缺陷如下</li></ol> <h2 id="缺陷"><a href="#缺陷" class="header-anchor">#</a> 缺陷</h2> <p>Webpack 的 Tree Shaking 逻辑停留在代码静态分析层面，只是浅显地判断：</p> <ul><li>模块导出变量是否被其它模块引用；</li> <li>引用模块的主体代码中有没有出现这个变量。</li></ul> <p>没有进一步，从语义上分析模块导出值是不是真的被有效使用。</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>综上，Tree-Shaking 是一种只对 ESM 有效的 Dead Code Elimination 技术，它能够自动删除无效（没有被使用，且没有副作用）的模块导出变量，优化产物体积。不过，受限于 JavaScript 语言灵活性所带来的高度动态特性，Tree-Shaking 并不能完美删除所有无效的模块导出，需要我们在业务代码中遵循若干最佳实践规则，帮助 Tree-Shaking 更好地运行。</p></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">1/23/2025</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/handbook/Webpack/Plugin-Loader.html" class="prev">
            常用插件和Loader
          </a></span> <span class="next"><a href="/handbook/Skill/DevelopmentSkills.html">
            前端常用开发技巧
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-2" data-v-cb1513f6><a href="/handbook/Webpack/Tree-Shaking.html#tree-shaking-定义" class="sidebar-link reco-side-tree-shaking-定义" data-v-cb1513f6>Tree Shaking 定义</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Webpack/Tree-Shaking.html#原理" class="sidebar-link reco-side-原理" data-v-cb1513f6>原理</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Webpack/Tree-Shaking.html#在-webpack-中实现-tree-shaking-的原理" class="sidebar-link reco-side-在-webpack-中实现-tree-shaking-的原理" data-v-cb1513f6>在 Webpack 中实现 Tree Shaking 的原理</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Webpack/Tree-Shaking.html#详细一点" class="sidebar-link reco-side-详细一点" data-v-cb1513f6>详细一点</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/Webpack/Tree-Shaking.html#使用" class="sidebar-link reco-side-使用" data-v-cb1513f6>使用</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Webpack/Tree-Shaking.html#在-webpack-中启动-tree-shaking" class="sidebar-link reco-side-在-webpack-中启动-tree-shaking" data-v-cb1513f6>在 Webpack 中启动 Tree Shaking</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/Webpack/Tree-Shaking.html#tips-实践" class="sidebar-link reco-side-tips-实践" data-v-cb1513f6>tips 实践</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/Webpack/Tree-Shaking.html#缺陷" class="sidebar-link reco-side-缺陷" data-v-cb1513f6>缺陷</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/Webpack/Tree-Shaking.html#总结" class="sidebar-link reco-side-总结" data-v-cb1513f6>总结</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div></div></div></div>
    <script src="/assets/js/app.9dbaa7ad.js" defer></script><script src="/assets/js/4.e4a90c70.js" defer></script><script src="/assets/js/3.ad1ccd56.js" defer></script><script src="/assets/js/2.0240bc78.js" defer></script><script src="/assets/js/1.b94e320b.js" defer></script><script src="/assets/js/139.297af1ee.js" defer></script>
  </body>
</html>
