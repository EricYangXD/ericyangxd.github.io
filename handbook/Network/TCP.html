<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TCP协议 | 木易的OT</title>
    <meta name="generator" content="VuePress 1.9.10">
    <script>
        (function() {
          if (location.href.indexOf('github.io') > -1 || location.href.indexOf('gitee.io') > -1) {
             location.href = 'https://ericyangxd.top'
           }
        })();
        </script><script type='application/ld+json'>
          {
            "@context": "https://schema.org",
            "@type": "Article",
            "headline": "TCP协议",
            "url": "https://ericyangxd.top/handbook/Network/TCP.html",
            "image": [
              "https://ericyangxd.top/logo.png"
              ],
            "datePublished": "2022-01-27T00:00:00.000Z",
            "dateModified": "2024-05-31T00:00:00.000Z",
            "author": [{
                "@type": "Person",
                "name": "EricYangXD",
                "url": "https://github.com/EricYangXD/ericyangxd.github.io"
            }]
          }
      </script>
    <meta name="description" content="前端面试,React,Vue,JavaScript,CSS,HTML,HTTP,HTTPS,websocket,UDP,TCP,Webpack,算法,数据结构,LeetCode,小程序,油猴,计算机网络,NodeJs,Vite,Antdesign,EricYangXD,Eric,Chrome,Android,V8,Mac,git,网络安全,开发技巧,路由,router,诗歌,金句,源码,面试,Docker,Shell,clash,Windows">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="keywords" content="前端面试,React,Vue,JavaScript,CSS,HTML,HTTP,TCP,Webpack,算法,数据结构,LeetCode,小程序,油猴,计算机网络,NodeJs,Vite,Antdesign,EricYangXD,Eric,Chrome,Android,V8,Mac,git,网络安全,开发技巧,路由,router,话费,充值,诗歌,金句,源码,面试,docker">
    
    <link rel="preload" href="/assets/css/0.styles.82c89da6.css" as="style"><link rel="preload" href="/assets/js/app.ca1d76da.js" as="script"><link rel="preload" href="/assets/js/4.e4331d91.js" as="script"><link rel="preload" href="/assets/js/3.561be8e5.js" as="script"><link rel="preload" href="/assets/js/2.b25d4684.js" as="script"><link rel="preload" href="/assets/js/1.c7cb60d4.js" as="script"><link rel="preload" href="/assets/js/96.c29a4ae9.js" as="script"><link rel="prefetch" href="/assets/js/10.26f8cbb6.js"><link rel="prefetch" href="/assets/js/100.40a25ce4.js"><link rel="prefetch" href="/assets/js/101.0232c0a3.js"><link rel="prefetch" href="/assets/js/102.e2249fe9.js"><link rel="prefetch" href="/assets/js/103.cdcddc52.js"><link rel="prefetch" href="/assets/js/104.a6f9d639.js"><link rel="prefetch" href="/assets/js/105.041b8b30.js"><link rel="prefetch" href="/assets/js/106.a265a78c.js"><link rel="prefetch" href="/assets/js/107.7967ef0d.js"><link rel="prefetch" href="/assets/js/108.0de088d8.js"><link rel="prefetch" href="/assets/js/109.9fc377c0.js"><link rel="prefetch" href="/assets/js/11.ec88ce3f.js"><link rel="prefetch" href="/assets/js/110.efe683b8.js"><link rel="prefetch" href="/assets/js/111.154288b9.js"><link rel="prefetch" href="/assets/js/112.8568d484.js"><link rel="prefetch" href="/assets/js/113.d5c6f75b.js"><link rel="prefetch" href="/assets/js/114.a99dc67c.js"><link rel="prefetch" href="/assets/js/115.0ae94bcd.js"><link rel="prefetch" href="/assets/js/116.f670923e.js"><link rel="prefetch" href="/assets/js/117.df6d0c89.js"><link rel="prefetch" href="/assets/js/118.c6b29bf6.js"><link rel="prefetch" href="/assets/js/119.5fe4b270.js"><link rel="prefetch" href="/assets/js/120.a6dd7c76.js"><link rel="prefetch" href="/assets/js/121.a6986fb2.js"><link rel="prefetch" href="/assets/js/122.c3aab5dc.js"><link rel="prefetch" href="/assets/js/123.10a33a10.js"><link rel="prefetch" href="/assets/js/124.b41bc578.js"><link rel="prefetch" href="/assets/js/125.c16b090e.js"><link rel="prefetch" href="/assets/js/126.2bca71f7.js"><link rel="prefetch" href="/assets/js/127.2aedcc6f.js"><link rel="prefetch" href="/assets/js/128.389e5996.js"><link rel="prefetch" href="/assets/js/129.4d4b9bdb.js"><link rel="prefetch" href="/assets/js/130.eb9de013.js"><link rel="prefetch" href="/assets/js/131.338b677c.js"><link rel="prefetch" href="/assets/js/132.2e92c1a1.js"><link rel="prefetch" href="/assets/js/133.1a0649d8.js"><link rel="prefetch" href="/assets/js/134.a142872a.js"><link rel="prefetch" href="/assets/js/135.e7553635.js"><link rel="prefetch" href="/assets/js/136.3a8619c4.js"><link rel="prefetch" href="/assets/js/137.c101b8ca.js"><link rel="prefetch" href="/assets/js/138.786b1940.js"><link rel="prefetch" href="/assets/js/14.2a1415d9.js"><link rel="prefetch" href="/assets/js/15.b8e5af0a.js"><link rel="prefetch" href="/assets/js/16.ed296b89.js"><link rel="prefetch" href="/assets/js/17.d9e3ba74.js"><link rel="prefetch" href="/assets/js/18.8ddab221.js"><link rel="prefetch" href="/assets/js/19.57a74dfb.js"><link rel="prefetch" href="/assets/js/20.e3da0919.js"><link rel="prefetch" href="/assets/js/21.546b406c.js"><link rel="prefetch" href="/assets/js/22.9450f156.js"><link rel="prefetch" href="/assets/js/23.c854b682.js"><link rel="prefetch" href="/assets/js/24.877c6c49.js"><link rel="prefetch" href="/assets/js/25.1110b637.js"><link rel="prefetch" href="/assets/js/26.3f26d858.js"><link rel="prefetch" href="/assets/js/27.533548d8.js"><link rel="prefetch" href="/assets/js/28.98a340e2.js"><link rel="prefetch" href="/assets/js/29.edf59bdf.js"><link rel="prefetch" href="/assets/js/30.b7cf2b52.js"><link rel="prefetch" href="/assets/js/31.1fe66269.js"><link rel="prefetch" href="/assets/js/32.e46a6d14.js"><link rel="prefetch" href="/assets/js/33.db6ae149.js"><link rel="prefetch" href="/assets/js/34.66c83798.js"><link rel="prefetch" href="/assets/js/35.1f8028c0.js"><link rel="prefetch" href="/assets/js/36.86d9fc47.js"><link rel="prefetch" href="/assets/js/37.c2037205.js"><link rel="prefetch" href="/assets/js/38.334016b8.js"><link rel="prefetch" href="/assets/js/39.a4f75b3a.js"><link rel="prefetch" href="/assets/js/40.89908c21.js"><link rel="prefetch" href="/assets/js/41.94a0d2b6.js"><link rel="prefetch" href="/assets/js/42.0694f316.js"><link rel="prefetch" href="/assets/js/43.9f57cdd0.js"><link rel="prefetch" href="/assets/js/44.cec8de12.js"><link rel="prefetch" href="/assets/js/45.cd99ff4b.js"><link rel="prefetch" href="/assets/js/46.49efbfee.js"><link rel="prefetch" href="/assets/js/47.667b3ec5.js"><link rel="prefetch" href="/assets/js/48.97f60782.js"><link rel="prefetch" href="/assets/js/49.586ea507.js"><link rel="prefetch" href="/assets/js/5.41516153.js"><link rel="prefetch" href="/assets/js/50.5be26e63.js"><link rel="prefetch" href="/assets/js/51.8bb4ded3.js"><link rel="prefetch" href="/assets/js/52.df66741e.js"><link rel="prefetch" href="/assets/js/53.6b5a2ceb.js"><link rel="prefetch" href="/assets/js/54.60134b0a.js"><link rel="prefetch" href="/assets/js/55.bfd8e63b.js"><link rel="prefetch" href="/assets/js/56.c55c73b7.js"><link rel="prefetch" href="/assets/js/57.34a19df7.js"><link rel="prefetch" href="/assets/js/58.1e10bb2c.js"><link rel="prefetch" href="/assets/js/59.225450b1.js"><link rel="prefetch" href="/assets/js/6.dca3a5c8.js"><link rel="prefetch" href="/assets/js/60.da1b8fd0.js"><link rel="prefetch" href="/assets/js/61.db7c0635.js"><link rel="prefetch" href="/assets/js/62.30818796.js"><link rel="prefetch" href="/assets/js/63.dec779c3.js"><link rel="prefetch" href="/assets/js/64.ce3df64d.js"><link rel="prefetch" href="/assets/js/65.d8235b03.js"><link rel="prefetch" href="/assets/js/66.dd47e1dd.js"><link rel="prefetch" href="/assets/js/67.9ac5d151.js"><link rel="prefetch" href="/assets/js/68.250d087b.js"><link rel="prefetch" href="/assets/js/69.d56868ed.js"><link rel="prefetch" href="/assets/js/7.8f6e299c.js"><link rel="prefetch" href="/assets/js/70.22777af1.js"><link rel="prefetch" href="/assets/js/71.06b60850.js"><link rel="prefetch" href="/assets/js/72.656807ac.js"><link rel="prefetch" href="/assets/js/73.2a639633.js"><link rel="prefetch" href="/assets/js/74.82b8d0fe.js"><link rel="prefetch" href="/assets/js/75.a0bdbafe.js"><link rel="prefetch" href="/assets/js/76.03afdf16.js"><link rel="prefetch" href="/assets/js/77.547080f4.js"><link rel="prefetch" href="/assets/js/78.3de85c6b.js"><link rel="prefetch" href="/assets/js/79.0a46cb18.js"><link rel="prefetch" href="/assets/js/8.41d4a20d.js"><link rel="prefetch" href="/assets/js/80.4ce368d7.js"><link rel="prefetch" href="/assets/js/81.e1c7082b.js"><link rel="prefetch" href="/assets/js/82.2d5f3042.js"><link rel="prefetch" href="/assets/js/83.d1bf2400.js"><link rel="prefetch" href="/assets/js/84.13c236ab.js"><link rel="prefetch" href="/assets/js/85.11f57122.js"><link rel="prefetch" href="/assets/js/86.d587da06.js"><link rel="prefetch" href="/assets/js/87.623630d8.js"><link rel="prefetch" href="/assets/js/88.366d197d.js"><link rel="prefetch" href="/assets/js/89.79c205fa.js"><link rel="prefetch" href="/assets/js/9.492c22f0.js"><link rel="prefetch" href="/assets/js/90.ddc619a0.js"><link rel="prefetch" href="/assets/js/91.c05b5c0e.js"><link rel="prefetch" href="/assets/js/92.81d92374.js"><link rel="prefetch" href="/assets/js/93.7d127785.js"><link rel="prefetch" href="/assets/js/94.519a97aa.js"><link rel="prefetch" href="/assets/js/95.8c8092c3.js"><link rel="prefetch" href="/assets/js/97.dc151a8f.js"><link rel="prefetch" href="/assets/js/98.041ba4da.js"><link rel="prefetch" href="/assets/js/99.d058f81a.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.bd007aa5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.82c89da6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-130b300a><div data-v-130b300a><div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-130b300a data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>木易的OT</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>前端面试,React,Vue,JavaScript,CSS,HTML,HTTP,HTTPS,websocket,UDP,TCP,Webpack,算法,数据结构,LeetCode,小程序,油猴,计算机网络,NodeJs,Vite,Antdesign,EricYangXD,Eric,Chrome,Android,V8,Mac,git,网络安全,开发技巧,路由,router,诗歌,金句,源码,面试,Docker,Shell,clash,Windows</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>EricYangXD</span>
            
          <!---->
          2025
        </a></span></div></div> <div class="hide" data-v-130b300a><header class="navbar" data-v-130b300a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">木易的OT</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      木易的OT
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/EricYangXD" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/2295436007445021" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-130b300a></div> <aside class="sidebar" data-v-130b300a><div class="personal-info-wrapper" data-v-39576ba9 data-v-130b300a><!----> <h3 class="name" data-v-39576ba9>
    EricYangXD
  </h3> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>100</h3> <h6 data-v-39576ba9>文章</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>0</h3> <h6 data-v-39576ba9>标签</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      木易的OT
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/EricYangXD" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/2295436007445021" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/" class="sidebar-heading clickable router-link-active"><span>About</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Android</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>LeetCode</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>AntDesign</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>小程序</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>开发技巧</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Angular</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Backend（Java Based）</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>油猴</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>计算机网络</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/handbook/Network/Http.html" class="sidebar-link">Http(s)协议相关知识</a></li><li><a href="/handbook/Network/TCP.html" aria-current="page" class="active sidebar-link">TCP协议相关知识</a></li><li><a href="/handbook/Network/DMZ.html" class="sidebar-link">DMZ区域</a></li><li><a href="/handbook/Network/KnowHow.html" class="sidebar-link">knowhow</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Nodejs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vite</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Web安全</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Google Chrome V8</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Mac使用记录</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>文章诗句</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Office软件</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>股海浮沉</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>打工人须知</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>TCP协议</h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>EricYangXD</span>
            
          <!---->
          2025
        </a></span></div></div> <div data-v-130b300a><main class="page"><section><div class="page-title"><h1 class="title">TCP协议</h1> <div data-v-f875f3fc><i class="iconfont reco-account" data-v-f875f3fc><span data-v-f875f3fc>EricYangXD</span></i> <i class="iconfont reco-date" data-v-f875f3fc><span data-v-f875f3fc>2022/1/27</span></i> <i class="iconfont reco-eye" data-v-f875f3fc><span id="/handbook/Network/TCP.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-f875f3fc><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <!----></div></div> <div class="theme-reco-content content__default"><h2 id="拥塞控制"><a href="#拥塞控制" class="header-anchor">#</a> 拥塞控制</h2> <p>为了防止网络的拥塞现象，TCP 提出了一系列的拥塞控制机制。</p> <p>TCP 的拥塞控制主要原理依赖于一个拥塞窗口(cwnd)来控制，TCP 还有一个对端通告的接收窗口(rwnd)用于流量控制。窗口值的大小就代表能够发送出去的但还没有收到 ACK 的最大数据报文段，显然窗口越大那么数据发送的速度也就越快，但是也有越可能使得网络出现拥塞，如果窗口值为 1，那么就简化为一个停等协议，每发送一个数据，都要等到对方的确认才能发送第二个数据包，显然数据传输效率低下。TCP 的拥塞控制算法就是要在这两者之间权衡，选取最好的 cwnd 值，从而使得网络吞吐量最大化且不产生拥塞。</p> <p>由于需要考虑拥塞控制和流量控制两个方面的内容，因此 TCP 的真正的发送窗口=min(rwnd, cwnd)。但是 rwnd 是由对端确定的，网络环境对其没有影响，所以在考虑拥塞的时候我们一般不考虑 rwnd 的值，我们暂时只讨论如何确定 cwnd 值的大小。</p> <h3 id="慢启动-slow-start"><a href="#慢启动-slow-start" class="header-anchor">#</a> 慢启动(Slow Start)</h3> <p>最初的 TCP 在连接建立成功后会向网络中发送大量的数据包，这样很容易导致网络中路由器缓存空间耗尽，从而发生拥塞。</p> <p>因此新建立的连接不能够一开始就大量发送数据包，而只能根据网络情况逐步增加每次发送的数据量，以避免上述现象的发生。</p> <p>具体来说，当新建连接时，cwnd 初始化为 1 个最大报文段(MSS)大小，发送端开始按照拥塞窗口大小发送数据，每当有一个报文段被确认，cwnd 就增加 1 个 MSS 大小。这样 cwnd 的值就随着网络往返时间(Round Trip Time,RTT)呈指数级增长，事实上，慢启动的速度一点也不慢，只是它的起点比较低一点而已。</p> <h3 id="拥塞避免-congestion-avoidance"><a href="#拥塞避免-congestion-avoidance" class="header-anchor">#</a> 拥塞避免(Congestion Avoidance)</h3> <p>从慢启动可以看到，cwnd 可以很快的增长上来，从而最大程度利用网络带宽资源，但是 cwnd 不能一直这样无限增长下去，一定需要某个限制。</p> <p>TCP 使用了一个叫慢启动门限(ssthresh)的变量，当 cwnd 超过该值后，慢启动过程结束，进入拥塞避免阶段。</p> <p>对于大多数 TCP 实现来说，ssthresh 的值是 65536(同样以字节计算)。拥塞避免的主要思想是加法增大，也就是 cwnd 的值不再指数级往上升，开始加法增加。此时当窗口中所有的报文段都被确认时，cwnd 的大小加 1，cwnd 的值就随着 RTT 开始线性增加，这样就可以避免增长过快导致网络拥塞，慢慢的增加调整到网络的最佳值。</p> <p>TCP 是如何确定网络进入了拥塞状态的--TCP 认为网络拥塞的主要依据是它重传了一个报文段。发生重传时：</p> <ol><li>把 ssthresh 降低为 cwnd 值的一半</li> <li>把 cwnd 重新设置为 1</li> <li>重新进入慢启动过程。</li></ol> <p>从整体上来讲，TCP 拥塞控制窗口变化的原则是 AIMD 原则，即加法增大、乘法减小。可以看出 TCP 的该原则可以较好地保证流之间的公平性，因为一旦出现丢包，那么立即减半退避，可以给其他新建的流留有足够的空间，从而保证整个的公平性。</p> <h3 id="快速重传-fast-retransmit"><a href="#快速重传-fast-retransmit" class="header-anchor">#</a> 快速重传(Fast Retransmit)</h3> <p>收到 3 个相同的 ACK 也会进行重传。TCP 在收到乱序到达包时就会立即发送 ACK，TCP 利用 3 个相同的 ACK 来判定数据包的丢失，此时进行快速重传，快速重传做的事情有：</p> <ol><li>把 ssthresh 设置为 cwnd 的一半</li> <li>把 cwnd 再设置为 ssthresh 的值(具体实现有些为 ssthresh+3)</li> <li>重新进入拥塞避免阶段。</li></ol> <h3 id="快速恢复-fast-recovery"><a href="#快速恢复-fast-recovery" class="header-anchor">#</a> 快速恢复(Fast Recovery)</h3> <p>“快速恢复”算法是在上述的“快速重传”算法后添加的，当收到 3 个重复 ACK 时，TCP 最后进入的不是拥塞避免阶段，而是快速恢复阶段。快速重传和快速恢复算法一般同时使用。</p> <p>快速恢复的思想是“数据包守恒”原则，即同一个时刻在网络中的数据包数量是恒定的，只有当“老”数据包离开了网络后，才能向网络中发送一个“新”的数据包，如果发送方收到一个重复的 ACK，那么根据 TCP 的 ACK 机制就表明有一个数据包离开了网络，于是 cwnd 加 1。如果能够严格按照该原则那么网络中很少会发生拥塞，事实上拥塞控制的目的也就在修正违反该原则的地方。</p> <p>主要步骤是：</p> <ol><li>当收到 3 个重复 ACK 时，把 ssthresh 设置为 cwnd 的一半，把 cwnd 设置为 ssthresh 的值加 3，然后重传丢失的报文段，加 3 的原因是因为收到 3 个重复的 ACK，表明有 3 个“老”的数据包离开了网络。</li> <li>再收到重复的 ACK 时，拥塞窗口增加 1。</li> <li>当收到新的数据包的 ACK 时，把 cwnd 设置为第一步中的 ssthresh 的值。原因是因为该 ACK 确认了新的数据，说明从重复 ACK 时的数据都已收到，该恢复过程已经结束，可以回到恢复之前的状态了，也即再次进入拥塞避免状态。</li></ol> <h3 id="快速恢复算法改进版"><a href="#快速恢复算法改进版" class="header-anchor">#</a> 快速恢复算法改进版</h3> <p>可以看出 Reno 的快速重传算法是针对一个包的重传情况的，然而在实际中，一个重传超时可能导致许多的数据包的重传，因此当多个数据包从一个数据窗口中丢失时并且触发快速重传和快速恢复算法时，问题就产生了。</p> <p>因此 NewReno 出现了，它在 Reno 快速恢复的基础上稍加了修改，可以恢复一个窗口内多个包丢失的情况。具体来讲就是：Reno 在收到一个新的数据的 ACK 时就退出了快速恢复状态了，而 NewReno 需要收到该窗口内所有数据包的确认后才会退出快速恢复状态，从而进一步提高吞吐量。</p> <h3 id="选择性应答-selective-acknowledgement-sack"><a href="#选择性应答-selective-acknowledgement-sack" class="header-anchor">#</a> 选择性应答(Selective Acknowledgement, SACK)</h3> <p>SACK 就是改变 TCP 的确认机制，最初的 TCP 只确认当前已连续收到的数据，SACK 则把乱序等信息会全部告诉对方，从而减少数据发送方重传的盲目性。</p> <p>比如说序号 1，2，3，5，7 的数据收到了，那么普通的 ACK 只会确认序列号 4，而 SACK 会把当前的 5，7 已经收到的信息在 SACK 选项里面告知对端，从而提高性能，当使用 SACK 的时候，NewReno 算法可以不使用，因为 SACK 本身携带的信息就可以使得发送方有足够的信息来知道需要重传哪些包，而不需要重传哪些包。</p> <h2 id="tcp-和-udp"><a href="#tcp-和-udp" class="header-anchor">#</a> TCP 和 UDP</h2> <h3 id="tcp-和-udp-可以同时绑定相同的端口吗"><a href="#tcp-和-udp-可以同时绑定相同的端口吗" class="header-anchor">#</a> TCP 和 UDP 可以同时绑定相同的端口吗？</h3> <p>TCP 和 UDP 可以同时绑定相同的端口吗？</p> <p>可以的。</p> <p>TCP 和 UDP 传输协议，在内核中是由两个完全独立的软件模块实现的。</p> <p>当主机收到数据包后，可以在 IP 包头的「协议号」字段知道该数据包是 TCP/UDP，所以可以根据这个信息确定送给哪个模块（TCP/UDP）处理，送给 TCP/UDP 模块的报文根据「端口号」确定送给哪个应用程序处理。</p> <p>因此， TCP/UDP 各自的端口号也相互独立，互不影响。</p> <h3 id="多个-tcp-服务进程可以同时绑定同一个端口吗"><a href="#多个-tcp-服务进程可以同时绑定同一个端口吗" class="header-anchor">#</a> 多个 TCP 服务进程可以同时绑定同一个端口吗？</h3> <p>如果两个 TCP 服务进程同时绑定的 IP 地址和端口都相同，那么执行 bind() 时候就会出错，错误是“Address already in use”。</p> <p>如果两个 TCP 服务进程绑定的端口都相同，而 IP 地址不同，那么执行 bind() 不会出错。</p> <h3 id="如何解决服务端重启时-报错-address-already-in-use-的问题"><a href="#如何解决服务端重启时-报错-address-already-in-use-的问题" class="header-anchor">#</a> 如何解决服务端重启时，报错“Address already in use”的问题？</h3> <p>当我们重启 TCP 服务进程的时候，意味着通过服务器端发起了关闭连接操作，于是就会经过四次挥手，而对于主动关闭方，会在 TIME_WAIT 这个状态里停留一段时间，这个时间大约为 2MSL。</p> <p>当 TCP 服务进程重启时，服务端会出现 TIME_WAIT 状态的连接，TIME_WAIT 状态的连接使用的 IP+PORT 仍然被认为是一个有效的 IP+PORT 组合，相同机器上不能够在该 IP+PORT 组合上进行绑定，那么执行 bind() 函数的时候，就会返回了 Address already in use 的错误。</p> <p>要解决这个问题，我们可以对 socket 设置 SO_REUSEADDR 属性。</p> <p>这样即使存在一个和绑定 IP+PORT 一样的 TIME_WAIT 状态的连接，依然可以正常绑定成功，因此可以正常重启成功。</p> <h3 id="客户端的端口可以重复使用吗"><a href="#客户端的端口可以重复使用吗" class="header-anchor">#</a> 客户端的端口可以重复使用吗？</h3> <p>在客户端执行 connect 函数的时候，只要客户端连接的服务器不是同一个，内核允许端口重复使用。</p> <p>TCP 连接是由四元组（源 IP 地址，源端口，目的 IP 地址，目的端口）唯一确认的，那么只要四元组中其中一个元素发生了变化，那么就表示不同的 TCP 连接的。</p> <p>所以，如果客户端已使用端口 64992 与服务端 A 建立了连接，那么客户端要与服务端 B 建立连接，还是可以使用端口 64992 的，因为内核是通过四元祖信息来定位一个 TCP 连接的，并不会因为客户端的端口号相同，而导致连接冲突的问题。</p> <h3 id="客户端-tcp-连接-time-wait-状态过多-会导致端口资源耗尽而无法建立新的连接吗"><a href="#客户端-tcp-连接-time-wait-状态过多-会导致端口资源耗尽而无法建立新的连接吗" class="header-anchor">#</a> 客户端 TCP 连接 TIME_WAIT 状态过多，会导致端口资源耗尽而无法建立新的连接吗？</h3> <p>要看客户端是否都是与同一个服务器（目标地址和目标端口一样）建立连接。</p> <p>如果客户端都是与同一个服务器（目标地址和目标端口一样）建立连接，那么如果客户端 TIME_WAIT 状态的连接过多，当端口资源被耗尽，就无法与这个服务器再建立连接了。即使在这种状态下，还是可以与其他服务器建立连接的，只要客户端连接的服务器不是同一个，那么端口是重复使用的。</p> <h3 id="如何解决客户端-tcp-连接-time-wait-过多-导致无法与同一个服务器建立连接的问题"><a href="#如何解决客户端-tcp-连接-time-wait-过多-导致无法与同一个服务器建立连接的问题" class="header-anchor">#</a> 如何解决客户端 TCP 连接 TIME_WAIT 过多，导致无法与同一个服务器建立连接的问题？</h3> <p>打开 net.ipv4.tcp_tw_reuse 这个内核参数。</p> <p>因为开启了这个内核参数后，客户端调用 connect 函数时，如果选择到的端口，已经被相同四元组的连接占用的时候，就会判断该连接是否处于 TIME_WAIT 状态。</p> <p>如果该连接处于 TIME_WAIT 状态并且 TIME_WAIT 状态持续的时间超过了 1 秒，那么就会重用这个连接，然后就可以正常使用该端口了。</p> <h3 id="服务端挂掉时后续会怎样-还会进行四次挥手吗"><a href="#服务端挂掉时后续会怎样-还会进行四次挥手吗" class="header-anchor">#</a> 服务端挂掉时后续会怎样？还会进行四次挥手吗？</h3> <ol><li>如果「服务端挂掉」指的是「服务端进程崩溃」，那么服务端进程在发生崩溃时，内核会发送 FIN 报文，与客户端进行四次挥手。</li> <li>如果「服务端挂掉」指的是「服务端主机宕机」，那么是不会发生四次挥手的，具体发生什么要看客户端会不会继续发送数据：
<ol><li>如果客户端会发送数据，由于服务端已经不存在，客户端的数据报文会超时重传，当重传总间隔时长达到一定的阈值（内核会根据 tcp_retries2 设置的值计算出一个阈值）后，会断开 TCP 连接；</li> <li>如果客户端一直不会发送数据，再看客户端有没有开启 TCP Keepalive 机制：
<ol><li>如果开启了，客户端在一段时间没有进行数据交互时，会触发 TCP Keepalive 机制，探测对方是否存在，如果探测到对方已经消亡，则会断开自身的 TCP 连接；</li> <li>如果没有开启，客户端的 TCP 连接会一直存在，并且一直保持在 ESTABLISHED 状态。</li></ol></li></ol></li></ol> <h3 id="udp-一定比-tcp-快吗"><a href="#udp-一定比-tcp-快吗" class="header-anchor">#</a> UDP 一定比 TCP 快吗？</h3> <p>显然不一定。举例：</p> <p>传输特大数据包时，在传输层 TCP 内部会根据 MSS 的大小进行分段，这时候数据进入到 IP 层时每个包的大小都不会超过 MTU，因此 IP 层一般不会再次进行分片，这时如果发生丢包，只需要重传每个 MSS 分段就够了。但是对于 UDP，其本身并不会分段，如果数据过大，到了 IP 层就会进行分片，此时发生丢包的话，再次重传就会重传整个大数据包，这时使用 UDP 就比 TCP 慢。比如：早期基于 UDP 的 NFS 协议就有这个问题。</p></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">5/31/2024</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/handbook/Network/Http.html" class="prev">
            Http(s)协议相关知识
          </a></span> <span class="next"><a href="/handbook/Network/DMZ.html">
            DMZ区域
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-2" data-v-cb1513f6><a href="/handbook/Network/TCP.html#拥塞控制" class="sidebar-link reco-side-拥塞控制" data-v-cb1513f6>拥塞控制</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Network/TCP.html#慢启动-slow-start" class="sidebar-link reco-side-慢启动-slow-start" data-v-cb1513f6>慢启动(Slow Start)</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Network/TCP.html#拥塞避免-congestion-avoidance" class="sidebar-link reco-side-拥塞避免-congestion-avoidance" data-v-cb1513f6>拥塞避免(Congestion Avoidance)</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Network/TCP.html#快速重传-fast-retransmit" class="sidebar-link reco-side-快速重传-fast-retransmit" data-v-cb1513f6>快速重传(Fast Retransmit)</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Network/TCP.html#快速恢复-fast-recovery" class="sidebar-link reco-side-快速恢复-fast-recovery" data-v-cb1513f6>快速恢复(Fast Recovery)</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Network/TCP.html#快速恢复算法改进版" class="sidebar-link reco-side-快速恢复算法改进版" data-v-cb1513f6>快速恢复算法改进版</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Network/TCP.html#选择性应答-selective-acknowledgement-sack" class="sidebar-link reco-side-选择性应答-selective-acknowledgement-sack" data-v-cb1513f6>选择性应答(Selective Acknowledgement, SACK)</a></li><li class="level-2" data-v-cb1513f6><a href="/handbook/Network/TCP.html#tcp-和-udp" class="sidebar-link reco-side-tcp-和-udp" data-v-cb1513f6>TCP 和 UDP</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Network/TCP.html#tcp-和-udp-可以同时绑定相同的端口吗" class="sidebar-link reco-side-tcp-和-udp-可以同时绑定相同的端口吗" data-v-cb1513f6>TCP 和 UDP 可以同时绑定相同的端口吗？</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Network/TCP.html#多个-tcp-服务进程可以同时绑定同一个端口吗" class="sidebar-link reco-side-多个-tcp-服务进程可以同时绑定同一个端口吗" data-v-cb1513f6>多个 TCP 服务进程可以同时绑定同一个端口吗？</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Network/TCP.html#如何解决服务端重启时-报错-address-already-in-use-的问题" class="sidebar-link reco-side-如何解决服务端重启时-报错-address-already-in-use-的问题" data-v-cb1513f6>如何解决服务端重启时，报错“Address already in use”的问题？</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Network/TCP.html#客户端的端口可以重复使用吗" class="sidebar-link reco-side-客户端的端口可以重复使用吗" data-v-cb1513f6>客户端的端口可以重复使用吗？</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Network/TCP.html#客户端-tcp-连接-time-wait-状态过多-会导致端口资源耗尽而无法建立新的连接吗" class="sidebar-link reco-side-客户端-tcp-连接-time-wait-状态过多-会导致端口资源耗尽而无法建立新的连接吗" data-v-cb1513f6>客户端 TCP 连接 TIME_WAIT 状态过多，会导致端口资源耗尽而无法建立新的连接吗？</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Network/TCP.html#如何解决客户端-tcp-连接-time-wait-过多-导致无法与同一个服务器建立连接的问题" class="sidebar-link reco-side-如何解决客户端-tcp-连接-time-wait-过多-导致无法与同一个服务器建立连接的问题" data-v-cb1513f6>如何解决客户端 TCP 连接 TIME_WAIT 过多，导致无法与同一个服务器建立连接的问题？</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Network/TCP.html#服务端挂掉时后续会怎样-还会进行四次挥手吗" class="sidebar-link reco-side-服务端挂掉时后续会怎样-还会进行四次挥手吗" data-v-cb1513f6>服务端挂掉时后续会怎样？还会进行四次挥手吗？</a></li><li class="level-3" data-v-cb1513f6><a href="/handbook/Network/TCP.html#udp-一定比-tcp-快吗" class="sidebar-link reco-side-udp-一定比-tcp-快吗" data-v-cb1513f6>UDP 一定比 TCP 快吗？</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div></div></div></div>
    <script src="/assets/js/app.ca1d76da.js" defer></script><script src="/assets/js/4.e4331d91.js" defer></script><script src="/assets/js/3.561be8e5.js" defer></script><script src="/assets/js/2.b25d4684.js" defer></script><script src="/assets/js/1.c7cb60d4.js" defer></script><script src="/assets/js/96.c29a4ae9.js" defer></script>
  </body>
</html>
